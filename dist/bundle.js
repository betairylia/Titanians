(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n,r=function(){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=this,t="listeners",r=new Set,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,this.emit=this.emit.bind(this)}var r,i;return r=n,(i=[{key:"clear",value:function(){this.listeners.clear()}},{key:"add",value:function(e){var t=this;return this.listeners.add(e),function(){return t.remove(e)}}},{key:"remove",value:function(e){this.listeners.delete(e)}},{key:"emit",value:function(t){var n,r=function(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var e=r.next();return u=e.done,e},e:function(e){a=!0,s=e},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw s}}}}(this.listeners);try{for(r.s();!(n=r.n()).done;)(0,n.value)(t)}catch(e){r.e(e)}finally{r.f()}}}])&&t(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),n}();function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n=Symbol.iterator;var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o(this,e),u(this,"onEntityAdded",new r),u(this,"onEntityRemoved",new r),u(this,"entityPositions",new Map),this.entities=t,this.add=this.add.bind(this),this.remove=this.remove.bind(this);for(var n=0;n<t.length;n++)this.entityPositions.set(t[n],n)}var t,a;return t=e,(a=[{key:n,value:function(){var e=this,t=this.entities.length;return{next:function(){return{value:e.entities[--t],done:t<0}}}}},{key:"size",get:function(){return this.entities.length}},{key:"has",value:function(e){return this.entityPositions.has(e)}},{key:"add",value:function(e){return e&&!this.has(e)&&(this.entities.push(e),this.entityPositions.set(e,this.entities.length-1),this.onEntityAdded.emit(e)),e}},{key:"remove",value:function(e){if(this.has(e)){this.onEntityRemoved.emit(e);var t=this.entityPositions.get(e);this.entityPositions.delete(e);var n=this.entities[this.entities.length-1];n!==e&&(this.entities[t]=n,this.entityPositions.set(n,t)),this.entities.pop()}return e}},{key:"clear",value:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,u=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){a=!0,s=e},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw s}}}}(this);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.remove(n)}}catch(e){t.e(e)}finally{t.f()}}}])&&s(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function d(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function M(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return M(this,n)}}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(){function e(){y(this,e),S(this,"cache",new Map)}return v(e,[{key:"get",value:function(e,t){var n=this.cache.get(e);return void 0===n&&(this.cache.set(e,t),n=t),n}}]),e}();function O(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.every((function(t){return void 0!==e[t]}))}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.every((function(t){return void 0===e[t]}))}new T;var R=function(e){return d(new Set(e.sort().filter((function(e){return!!e&&""!==e}))))},E=new T,I=function(e){var t=function(e){return{with:void 0!==e.with?R(e.with):[],without:void 0!==e.without?R(e.without):[]}}(e),n=JSON.stringify(t);return E.get(n,t)},P=function(e){w(n,e);var t=k(n);function n(){var e;y(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return S(m(e=t.call.apply(t,[this].concat(i))),"buckets",new Set),e}return v(n,[{key:"wants",value:function(e){return!0}},{key:"evaluate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.wants(t)?this.add(e):this.remove(e),this.has(e)){var n,r=f(this.buckets);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.evaluate(e,t)}}catch(e){r.e(e)}finally{r.f()}}}},{key:"where",value:function(e){var t=this,n=this.entities.length,r=function(){var r;do{r=t.entities[--n]}while(r&&!e(r));return{value:r,done:n<0}};return S({},Symbol.iterator,(function(){return{next:r}}))}},{key:"with",value:function(){return this.archetype.apply(this,arguments)}},{key:"without",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.archetype({without:t})}},{key:"archetype",value:function(e){if("function"==typeof e){var t,n=f(this.buckets);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r instanceof B&&r.predicate===e)return r}}catch(e){n.e(e)}finally{n.f()}var i=new B(this,e);return this.buckets.add(i),i}if("object"!==h(e)){for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return this.archetype({with:[e].concat(s)})}var a,c=I(e),l=f(this.buckets);try{for(l.s();!(a=l.n()).done;){var d=a.value;if(d instanceof U&&d.query===c)return d}}catch(e){l.e(e)}finally{l.f()}var y=new U(this,c);return this.buckets.add(y),y}}]),n}(a),j=function(e){w(n,e);var t=k(n);function n(e){var r;return y(this,n),(r=t.call(this)).source=e,r}return v(n,[{key:"startUpdating",value:function(){var e=this;this.source.onEntityAdded.add((function(t){e.wants(t)&&e.add(t)})),this.source.onEntityRemoved.add((function(t){e.remove(t)})),this.update()}},{key:"update",value:function(){var e,t=f(this.source);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.evaluate(n)}}catch(e){t.e(e)}finally{t.f()}}}]),n}(P),B=function(e){w(n,e);var t=k(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).source=e,i.predicate=r,i.startUpdating(),i}return v(n,[{key:"wants",value:function(e){return this.predicate(e)}}]),n}(j),U=function(e){w(n,e);var t=k(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).source=e,i.query=r,i.startUpdating(),i}return v(n,[{key:"wants",value:function(e){return O.apply(void 0,[e].concat(d(this.query.with||[])))&&A.apply(void 0,[e].concat(d(this.query.without||[])))}}]),n}(j);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var x,H=function(e){w(n,e);var t=k(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return y(this,n),S(m(e=t.call(this,r)),"entityToId",new Map),S(m(e),"idToEntity",new Map),S(m(e),"nextId",0),e.onEntityRemoved.add((function(t){if(e.entityToId.has(t)){var n=e.entityToId.get(t);e.idToEntity.delete(n),e.entityToId.delete(t)}})),e}return v(n,[{key:"update",value:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){if("function"==typeof t){var r=t(e);r&&Object.assign(e,r)}else"string"==typeof t?e[t]=n:t&&Object.assign(e,t);return this.has(e)&&this.evaluate(e),e}))},{key:"addComponent",value:function(e,t,n){void 0===e[t]&&(e[t]=n,this.has(e)&&this.evaluate(e))}},{key:"removeComponent",value:function(e,t){if(void 0!==e[t]){if(this.has(e)){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);delete n[t],this.evaluate(e,n)}delete e[t]}}},{key:"id",value:function(e){if(this.has(e)){if(!this.entityToId.has(e)){var t=this.nextId++;this.entityToId.set(e,t),this.idToEntity.set(t,e)}return this.entityToId.get(e)}}},{key:"entity",value:function(e){return this.idToEntity.get(e)}}]),n}(P);function D(e,t){let n={};return Object.assign(n,t),n.isActivity=!0,e.add(n)}function q(e,t){console.log(e),function(e,t){if(e.hasOwnProperty("UseResourceOnce")&&!t.resources.IsAllResourceEnough(e.UseResourceOnce))return!1;if(e.hasOwnProperty("UseResourceOnce"))for(const n of e.UseResourceOnce)t.resources.AddResource(n.type,-n.amount,!1);return!0}(e,t)&&(function(e,t){if(e.hasOwnProperty("AddResourceOnce"))for(const n of e.AddResourceOnce)t.resources.AddResource(n.type,n.amount,!1)}(e,t),function(e,t){e.hasOwnProperty("ConstructBuilding")&&(t.buildings.AddBuilding(t.buildings.GetBuildingPrototype(e.ConstructBuilding.type)),e.hasOwnProperty("UseResourceOnce")&&(e.UseResourceOnce=t.buildings.GetBuildingCost(e.ConstructBuilding.type)))}(e,t)),t.UpdateUI()}!function(e){e[e.GatherFruit=0]="GatherFruit"}(x||(x={}));const L={id:"aGatherFruit",AddResourceOnce:[{type:"Fruit",amount:1}]},G={id:"aGatherBranch",AddResourceOnce:[{type:"Branch",amount:1}]},F={Grass:0,Shrub:0,Oak:0,Picea:0,Fruit:0,Wood:0,Branch:0,Culture:0,Science:0};class ${town;resourceData=new Map;resourceMap=new Map;resourceMapEnv=new Map;static resourceMapUniversal=new Map;environment={amount:0,capacity:1e3};onResourceAdded=new r;onResourceRemoved=new r;constructor(e){this.town=e}Init(){Object.keys(F).forEach((e=>{this.AddResourceEntry(e)}))}AddResourceEntry(e){if(!this.resourceMap.has(e)){let t={type:e,current:0,max:this.resourceData.get(e).initialMaxStacks,tickModify:0,visible:!1};if(this.resourceMap.set(e,t),!0===this.resourceData.get(e).env&&this.resourceMapEnv.set(e,t),!$.resourceMapUniversal.has(e)){let t={type:e,current:0,max:this.resourceData.get(e).initialUMaxStacks,tickModify:0,visible:!1};$.resourceMapUniversal.set(e,t)}return this.onResourceAdded.emit(t),t}}IsResourceEnough(e,t){return t<=this.GetResource(e).current}IsAllResourceEnough(e){for(const t of e)if(this.GetResourceAmount(t.type)<t.amount)return!1;return!0}AddResource(e,t,n=!0){this.resourceMap.has(e)||this.AddResourceEntry(e);let r=this.resourceMap.get(e);if(r.visible=!0,t<0&&r.current<-t){let n=$.resourceMapUniversal.get(e),r=n.current;n.current+=t,n.current<0&&(n.current=0),t-=n.current-r}let i=r.current;return r.current+=t,!0===this.resourceData.get(e).env&&!1===n&&console.warn("Environment resource is modified without `tick == true`!! Doing so will break environment constraints ..."),r.max>0&&r.current>=r.max&&(r.current=r.max),r.current<0&&(r.current=0),n&&(r.tickModify+=r.current-i),(r.current-i)/t}GetResource(e){if(this.resourceMap.has(e)){if($.resourceMapUniversal.has(e)){let t=$.resourceMapUniversal.get(e),n=this.resourceMap.get(e);return{type:e,current:t.current+n.current,max:t.max+n.max,tickModify:n.tickModify,tickModifyEnvHint:n.tickModifyEnvHint,visible:n.visible||t.visible}}return console.warn(`Universal data not found for resource ${e}. It might be a bug.`),this.resourceMap.get(e)}return null}GetResourceAmount(e){return this.resourceMap.has(e)?this.resourceMap.get(e).current:0}SetupEnvironment(){this.environment.amount=0;for(const e of this.resourceMapEnv.values())!0===this.resourceData.get(e.type).env&&(this.environment.amount+=e.current);this.environment.amount>this.environment.capacity&&console.warn("Env amount > capacity. Auto-rebalance not implemented. TODO: implement this.")}sRefreshResource(){for(const e of this.resourceMap.values()){e.tickModify=0;let t=e.type;if(this.resourceData.has(t)){let n=this.resourceData.get(t),r=n.regenBase+n.regenFactor*e.current;r>1e-5&&this.AddResource(e.type,r)}}}sUpdateEnvTickHint(){for(const e of this.resourceMapEnv.values())e.tickModifyEnvHint=e.tickModify}sAdjustEnvironment(){let e=0,t=0;for(const n of this.resourceMapEnv.values())n.tickModify>0?e+=n.tickModify:t+=-n.tickModify;let n=e;this.environment.amount-t+e>this.environment.capacity&&(n=this.environment.capacity-this.environment.amount+t);let r=1-n/e;for(const e of this.resourceMapEnv.values())e.tickModify>0&&(e.current-=e.tickModify*r,e.tickModify-=e.tickModify*r)}sTransferUniversalResource(){}}let N={en:{rFruit:"Wild fruits"},zh:{tick:"刻",sec:"秒",min:"分",rOak:"橡树",rPicea:"云杉",rShrub:"灌木丛",rGrass:"草",rFruit:"野果",rWood:"木材",rBranch:"树枝",rCulture:"文化",bPlantation:"种植园",bFarm:"农场",bLoggingCamp:"伐木场",bForestKeeper:"护林员小屋",bBonfire:"篝火堆",bHouse:"木屋",bGuild:"探险工会",bAtelier:"风车工房",bLibrary:"图书馆",bAcademy:"学院",bTheatre:"剧院",bMine:"矿井",aGatherFruit:"收集一些野果",aGatherBranch:"收集一些树枝"}};function _(e){return N.zh[e]||e}class z{artResourceDiv=document.querySelector("#resources #artResources");envResourceDiv=document.querySelector("#resources #envResources");resourcePanels=new Map;resourceTemplate=document.querySelector("#resources").querySelector("template");activityDiv=document.querySelector("#activities");activityButtons=new Map;buildingInfoDiv=document.querySelector("#buildings");buildingInfoPanels=new Map;buildingInfoTemplate=this.buildingInfoDiv.querySelector("template");tooltipDiv=document.querySelector("#tooltip");town;constructor(e){this.town=e}Init(){this.town.resources.onResourceAdded.add((e=>{if(!this.resourcePanels.has(e.type)){let t=this.resourceTemplate.content.cloneNode(!0).querySelector("div");t.classList.add("resource"),!0===this.town.resources.resourceData.get(e.type).env?this.envResourceDiv.appendChild(t):this.artResourceDiv.appendChild(t);let n={container:t,name:t.querySelector("#name"),stack:t.querySelector("#stack"),regen:t.querySelector("#regen")};this.resourcePanels.set(e.type,n),n.name.innerHTML=`${_("r"+e.type)}`}})),this.town.archetypes.activities.onEntityAdded.add((e=>{if(!this.activityButtons.has(e.id)){let t=document.createElement("button");t.classList.add("activity"),this.activityDiv.appendChild(t),t.onclick=t=>{q(e,this.town)},t.innerHTML=`${_(null==e.displayName?e.id:e.displayName)}`,this.activityButtons.set(e.id,t),this.town.world.addComponent(e,"HTMLElement",{elem:t,prevDisplay:t.style.display})}})),this.town.archetypes.buildingInfo.onEntityAdded.add((e=>{if(!this.buildingInfoPanels.has(e.id)){let t=this.buildingInfoTemplate.content.cloneNode(!0).querySelector("div");this.buildingInfoDiv.appendChild(t),t.id="info-"+e.buildingInfo.type;let n={container:t,constructBtn:t.querySelector("#construct"),name:t.querySelector("#name"),count:t.querySelector("#count")};n.constructBtn.onclick=t=>{q(e,this.town),this.ShowBuildingTooltip(e.buildingInfo.type)},n.constructBtn.onpointerenter=t=>{this.ShowBuildingTooltip(e.buildingInfo.type)},n.constructBtn.onpointerleave=e=>{this.HideTooltip()},n.name.innerHTML=_("b"+e.buildingInfo.type),n.count.innerHTML="0",this.activityButtons.set(e.id,n.constructBtn),this.town.world.addComponent(e,"HTMLElement",{elem:n.container,prevDisplay:n.container.style.display}),e.buildingInfo.ui=n}})),this.town.archetypes.hiddenHTML.onEntityAdded.add((e=>{"none"!=e.HTMLElement.elem.style.display&&(e.HTMLElement.prevDisplay=e.HTMLElement.elem.style.display,e.HTMLElement.elem.style.display="none")})),this.town.archetypes.visibleHTML.onEntityAdded.add((e=>{e.HTMLElement.elem.style.display=e.HTMLElement.prevDisplay})),this.town.world.onEntityAdded.add((e=>{console.log(`Added ${e.id}`,e)}))}ShowTooltip(e){this.tooltipDiv.innerHTML=e}HideTooltip(){this.tooltipDiv.innerHTML=""}ShowBuildingTooltip(e){let t="";this.town.buildings.GetBuildingCost(e).forEach((e=>{t+=`${_("r"+e.type)} x${e.amount.toFixed(2)}<br/>`})),this.ShowTooltip(t)}Update(){this.sUpdateResources(),this.sUpdateBuildingInfo()}sUpdateResources(){for(const e of this.town.resources.resourceMap.values()){let t=this.resourcePanels.get(e.type);e.max>0?t.stack.innerHTML=`${e.current.toFixed(2)} / ${e.max.toFixed(0)}`:t.stack.innerHTML=`${e.current.toFixed(2)}`;let n=e.tickModifyEnvHint;if(void 0===n&&(n=e.tickModify),Math.abs(n)>1e-8){let e=n;t.regen.innerHTML=`${(e<0?"":"+")+e.toFixed(4)} / ${_("tick")}`}else t.regen.innerHTML="";!1===e.visible?t.container.style.display="none":t.container.style.display="flex"}}sUpdateBuildingInfo(){for(const e of this.town.archetypes.buildingInfo)this.town.buildings.IsBuildingUnlocked(e.buildingInfo.type)&&this.town.world.removeComponent(e,"hidden"),e.buildingInfo.ui.count.innerHTML=`${this.town.buildings.archetypes[e.buildingInfo.type].size}`,this.town.resources.IsAllResourceEnough(this.town.buildings.GetBuildingCost(e.buildingInfo.type))?e.buildingInfo.ui.constructBtn.disabled=!1:e.buildingInfo.ui.constructBtn.disabled=!0}}const W={Plantation:{},Farm:{},LoggingCamp:{},ForestKeeper:{},Bonfire:{},House:{},Guild:{},Atelier:{},Academy:{},Mine:{}};class K{town;archetypes={};data=new Map;constructor(e){this.town=e}Init(){Object.keys(W).forEach((e=>{this.archetypes[e]=this.town.world.with("isBuilding",e),this.town.world.add({id:"aConstruct"+e,buildingInfo:{type:e},hidden:!0,UseResourceOnce:this.GetBuildingCost(e),ConstructBuilding:{type:e}})}))}AddBuilding(e){let t={};return Object.assign(t,e),t.isBuilding=!0,this.town.world.add(t)}GetBuildingPrototype(e){return this.data.get(e).prototype}GetBuildingCost(e){let t=this.archetypes[e].size;return this.data.get(e).buildCost.map((e=>({type:e.type,amount:e.base*Math.pow(e.growth,t)})))}IsBuildingUnlocked(e){let t=this.data.get(e).visibleRequirements,n=!0;return 0==t?t:(t.forEach((e=>{n=n&&this.town.resources.GetResource(e.type).visible})),n)}sModifyResources(){for(const e of this.town.archetypes.resourceBuildings){let t=1;for(const n of e.ChangeResourcePerTick.requires)t=Math.min(t,this.town.resources.GetResourceAmount(n.type)/n.amount);for(const n of e.ChangeResourcePerTick.products){let e=this.town.resources.GetResource(n.type);t=Math.min(t,(e.max-e.current)/n.amount)}if(!(t<=1e-5)){for(const n of e.ChangeResourcePerTick.requires)this.town.resources.AddResource(n.type,-n.amount*t);for(const n of e.ChangeResourcePerTick.products)this.town.resources.AddResource(n.type,n.amount*t)}}}}function J(e){return new Promise(((t,n)=>{var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&t(r.responseText)},r.open("GET",e),r.send()}))}const X={initialMaxStacks:0,regenBase:0,regenFactor:0,color:"#000000",initialUMaxStacks:0,initialUTransferSpeed:0,env:!1},Q={buildCost:[],growthAll:1.5,visibleRequirements:[],prototype:{id:"UNKNOWN"}};class V{world=new H;archetypes={hiddenHTML:this.world.with("hidden","HTMLElement"),visibleHTML:this.world.with("HTMLElement").without("hidden"),activities:this.world.with("id","isActivity"),resourceBuildings:this.world.with("isBuilding","ChangeResourcePerTick"),buildingInfo:this.world.with("buildingInfo"),hiddenBuildingInfo:this.world.with("buildingInfo").with("hidden")};ui=new z(this);resources=new $(this);buildings=new K(this);Init(){return new Promise(((e,t)=>{var n;(n=this,new Promise(((e,t)=>{Promise.all([J("data/resources.json"),J("data/buildings.json")]).then((t=>{{let e=t[0],r=JSON.parse(e);r.hasOwnProperty("$schema")&&delete r.$schema;for(const e in r){let t=r[e],i={type:e};Object.assign(i,structuredClone(X)),Object.assign(i,structuredClone(t)),n.resources.resourceData.set(e,i),console.log(`Read resource data of ${e}:`,i)}}{let e=t[1],r=JSON.parse(e);r.hasOwnProperty("$schema")&&delete r.$schema;for(const e in r){let t=r[e],i={};Object.assign(i,structuredClone(Q)),Object.assign(i,structuredClone(t)),i.buildCost.forEach((e=>{void 0===e.growth&&(e.growth=i.growthAll)})),i.prototype.hasOwnProperty(e)||(i.prototype[e]={}),i.prototype.hasOwnProperty("id")&&"UNKNOWN"!==i.prototype.id||(i.prototype.id="b"+e),n.buildings.data.set(e,i),console.log(`Read buliding data of ${e}:`,i)}}e()}))}))).then((()=>{this.ui.Init(),this.resources.Init(),this.buildings.Init(),this.resources.AddResource("Oak",250,!1),this.resources.AddResource("Picea",5,!1),this.resources.AddResource("Grass",545,!1),this.resources.AddResource("Shrub",200,!1),this.resources.SetupEnvironment(),D(this.world,L),D(this.world,G),e()}))}))}UpdateUI(){this.ui.Update()}Tick(){this.resources.sRefreshResource(),this.buildings.sModifyResources(),this.resources.sTransferUniversalResource(),this.resources.sUpdateEnvTickHint(),this.resources.sAdjustEnvironment(),this.UpdateUI()}}let Y=new class{n=0;e;_lastTimestamp=0;_lastTick=0;tickTimeMS=250;tickTimeMSBase=250;town;constructor(){this.town=new V}SetupTestUI(){let e=document.querySelector("#timeSlider");var t=document.getElementById("timeScale");document.getElementById("time1x").onclick=e=>{document.querySelector("#timeSlider").value="1",document.querySelector("#timeSlider").oninput(null)},document.getElementById("time10x").onclick=e=>{document.querySelector("#timeSlider").value="10",document.querySelector("#timeSlider").oninput(null)},t.innerHTML=e.valueAsNumber.toFixed(1)+"x",e.oninput=function(){t.innerHTML=e.valueAsNumber.toFixed(1)+"x",Y.tickTimeMS=Y.tickTimeMSBase/e.valueAsNumber},document.querySelector("#timeSlider").oninput(null)}Init(){this.SetupTestUI(),this.town.Init().then((()=>{this._lastTick=Date.now(),window.requestAnimationFrame((()=>this.Update()))}))}Update(){const e=Date.now()-this._lastTick;e>=this.tickTimeMS&&(this._lastTick=Date.now()-(e-this.tickTimeMS),this.town.Tick()),window.requestAnimationFrame((()=>this.Update()))}};Y.Init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFBQSxTQUFTQSxFQUFrQkMsRUFBS0MsSUFDbkIsTUFBUEEsR0FBZUEsRUFBTUQsRUFBSUUsVUFBUUQsRUFBTUQsRUFBSUUsUUFFL0MsSUFBSyxJQUFJQyxFQUFJLEVBQUdDLEVBQU8sSUFBSUMsTUFBTUosR0FBTUUsRUFBSUYsRUFBS0UsSUFBS0MsRUFBS0QsR0FBS0gsRUFBSUcsR0FFbkUsT0FBT0MsQ0FDVCxDQTBFQSxTQUFTRSxFQUFrQkMsRUFBUUMsR0FDakMsSUFBSyxJQUFJTCxFQUFJLEVBQUdBLEVBQUlLLEVBQU1OLE9BQVFDLElBQUssQ0FDckMsSUFBSU0sRUFBYUQsRUFBTUwsR0FDdkJNLEVBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFDakRELEVBQVdFLGNBQWUsRUFDdEIsVUFBV0YsSUFBWUEsRUFBV0csVUFBVyxHQUNqREMsT0FBT0MsZUFBZVAsRUFBUUUsRUFBV00sSUFBS04sRUFDaEQsQ0FDRixDQTBCQSxJQ1BJTyxFRE9BQyxFQUFxQixXQUN2QixTQUFTQSxJQWhCWCxJQUF5QkMsRUFBS0gsRUFBS0ksR0F6Qm5DLFNBQXlCQyxFQUFVQyxHQUNqQyxLQUFNRCxhQUFvQkMsR0FDeEIsTUFBTSxJQUFJQyxVQUFVLG9DQUV4QixDQXNDSUMsQ0FBZ0JDLEtBQU1QLEdBakJEQyxFQW1CTE0sS0FuQlVULEVBbUJKLFlBbkJTSSxFQW1CSSxJQUFJTSxJQWxCckNWLEtBQU9HLEVBQ1RMLE9BQU9DLGVBQWVJLEVBQUtILEVBQUssQ0FDOUJJLE1BQU9BLEVBQ1BULFlBQVksRUFDWkMsY0FBYyxFQUNkQyxVQUFVLElBR1pNLEVBQUlILEdBQU9JLEVBWVhLLEtBQUtFLEtBQU9GLEtBQUtFLEtBQUtDLEtBQUtILEtBQzdCLENBL0JGLElBQXNCSCxFQUFhTyxFQXdFakMsT0F4RW9CUCxFQWlDUEosR0FqQ29CVyxFQWlDYixDQUFDLENBQ25CYixJQUFLLFFBQ0xJLE1BQU8sV0FDTEssS0FBS0ssVUFBVUMsT0FDakIsR0FDQyxDQUNEZixJQUFLLE1BQ0xJLE1BQU8sU0FBYVksR0FDbEIsSUFBSUMsRUFBUVIsS0FHWixPQURBQSxLQUFLSyxVQUFVSSxJQUFJRixHQUNaLFdBQ0wsT0FBT0MsRUFBTUUsT0FBT0gsRUFDdEIsQ0FDRixHQUNDLENBQ0RoQixJQUFLLFNBQ0xJLE1BQU8sU0FBZ0JZLEdBQ3JCUCxLQUFLSyxVQUFrQixPQUFFRSxFQUMzQixHQUNDLENBQ0RoQixJQUFLLE9BQ0xJLE1BQU8sU0FBY2dCLEdBQ25CLElBQ0lDLEVBREFDLEVBaklWLFNBQW9DQyxFQUFHQyxHQUNyQyxJQUFJQyxFQUF1QixvQkFBWEMsUUFBMEJILEVBQUVHLE9BQU9DLFdBQWFKLEVBQUUsY0FFbEUsSUFBS0UsRUFBSSxDQUNQLEdBQUluQyxNQUFNc0MsUUFBUUwsS0FBT0UsRUFiN0IsU0FBcUNGLEVBQUdNLEdBQ3RDLEdBQUtOLEVBQUwsQ0FDQSxHQUFpQixpQkFBTkEsRUFBZ0IsT0FBT3ZDLEVBQWtCdUMsRUFBR00sR0FDdkQsSUFBSUMsRUFBSWhDLE9BQU9pQyxVQUFVQyxTQUFTQyxLQUFLVixHQUFHVyxNQUFNLEdBQUksR0FFcEQsTUFEVSxXQUFOSixHQUFrQlAsRUFBRVksY0FBYUwsRUFBSVAsRUFBRVksWUFBWUMsTUFDN0MsUUFBTk4sR0FBcUIsUUFBTkEsRUFBb0J4QyxNQUFNK0MsS0FBS2QsR0FDeEMsY0FBTk8sR0FBcUIsMkNBQTJDUSxLQUFLUixHQUFXOUMsRUFBa0J1QyxFQUFHTSxRQUF6RyxDQUxjLENBTWhCLENBTWtDVSxDQUE0QmhCLEtBQU9DLEdBQWtCRCxHQUF5QixpQkFBYkEsRUFBRXBDLE9BQXFCLENBQ2hIc0MsSUFBSUYsRUFBSUUsR0FDWixJQUFJckMsRUFBSSxFQUVKb0QsRUFBSSxXQUFhLEVBRXJCLE1BQU8sQ0FDTEMsRUFBR0QsRUFDSFYsRUFBRyxXQUNELE9BQUkxQyxHQUFLbUMsRUFBRXBDLE9BQWUsQ0FDeEJ1RCxNQUFNLEdBRUQsQ0FDTEEsTUFBTSxFQUNOdEMsTUFBT21CLEVBQUVuQyxLQUViLEVBQ0F1RCxFQUFHLFNBQVVBLEdBQ1gsTUFBTUEsQ0FDUixFQUNBQyxFQUFHSixFQUVQLENBRUEsTUFBTSxJQUFJakMsVUFBVSx3SUFDdEIsQ0FFQSxJQUVJc0MsRUFGQUMsR0FBbUIsRUFDbkJDLEdBQVMsRUFFYixNQUFPLENBQ0xOLEVBQUcsV0FDRGhCLEVBQUtBLEVBQUdRLEtBQUtWLEVBQ2YsRUFDQU8sRUFBRyxXQUNELElBQUlrQixFQUFPdkIsRUFBR3dCLE9BRWQsT0FEQUgsRUFBbUJFLEVBQUtOLEtBQ2pCTSxDQUNULEVBQ0FMLEVBQUcsU0FBVUEsR0FDWEksR0FBUyxFQUNURixFQUFNRixDQUNSLEVBQ0FDLEVBQUcsV0FDRCxJQUNPRSxHQUFpQyxNQUFickIsRUFBR3lCLFFBQWdCekIsRUFBR3lCLFFBR2pELENBRkUsUUFDQSxHQUFJSCxFQUFRLE1BQU1GLENBQ3BCLENBQ0YsRUFFSixDQTBFc0JNLENBQTJCMUMsS0FBS0ssV0FHaEQsSUFDRSxJQUFLUSxFQUFVbUIsTUFBT3BCLEVBQVFDLEVBQVVRLEtBQUtZLE9BRTNDMUIsRUFEZUssRUFBTWpCLE9BQ1pnQixFQU1iLENBSkUsTUFBT3lCLEdBQ1B2QixFQUFVcUIsRUFBRUUsRUFDZCxDQUFFLFFBQ0F2QixFQUFVc0IsR0FDWixDQUNGLE1BcEVjckQsRUFBa0JlLEVBQVl5QixVQUFXbEIsR0FFekRmLE9BQU9DLGVBQWVPLEVBQWEsWUFBYSxDQUM5Q1QsVUFBVSxJQW9FTEssQ0FDVCxDQWpEeUIsR0NoSHpCLFNBQVMsRUFBa0JqQixFQUFLQyxJQUNuQixNQUFQQSxHQUFlQSxFQUFNRCxFQUFJRSxVQUFRRCxFQUFNRCxFQUFJRSxRQUMvQyxJQUFLLElBQUlDLEVBQUksRUFBR0MsRUFBTyxJQUFJQyxNQUFNSixHQUFNRSxFQUFJRixFQUFLRSxJQUFLQyxFQUFLRCxHQUFLSCxFQUFJRyxHQUNuRSxPQUFPQyxDQUNULENBK0RBLFNBQVMsRUFBZ0JnQixFQUFVQyxHQUNqQyxLQUFNRCxhQUFvQkMsR0FDeEIsTUFBTSxJQUFJQyxVQUFVLG9DQUV4QixDQUVBLFNBQVMsRUFBa0JmLEVBQVFDLEdBQ2pDLElBQUssSUFBSUwsRUFBSSxFQUFHQSxFQUFJSyxFQUFNTixPQUFRQyxJQUFLLENBQ3JDLElBQUlNLEVBQWFELEVBQU1MLEdBQ3ZCTSxFQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQ2pERCxFQUFXRSxjQUFlLEVBQ3RCLFVBQVdGLElBQVlBLEVBQVdHLFVBQVcsR0FDakRDLE9BQU9DLGVBQWVQLEVBQVFFLEVBQVdNLElBQUtOLEVBQ2hELENBQ0YsQ0FVQSxTQUFTLEVBQWdCUyxFQUFLSCxFQUFLSSxHQVdqQyxPQVZJSixLQUFPRyxFQUNUTCxPQUFPQyxlQUFlSSxFQUFLSCxFQUFLLENBQzlCSSxNQUFPQSxFQUNQVCxZQUFZLEVBQ1pDLGNBQWMsRUFDZEMsVUFBVSxJQUdaTSxFQUFJSCxHQUFPSSxFQUVORCxDQUNULENBU0FGLEVBQW1CeUIsT0FBT0MsU0FDMUIsSUFBSXlCLEVBQXNCLFdBQ3hCLFNBQVNBLElBQ1AsSUFBSUMsRUFBV0MsVUFBVW5FLE9BQVMsUUFBc0JvRSxJQUFqQkQsVUFBVSxHQUFtQkEsVUFBVSxHQUFLLEdBQ25GLEVBQWdCN0MsS0FBTTJDLEdBQ3RCLEVBQWdCM0MsS0FBTSxnQkFBaUIsSUFBSVAsR0FDM0MsRUFBZ0JPLEtBQU0sa0JBQW1CLElBQUlQLEdBQzdDLEVBQWdCTyxLQUFNLGtCQUFtQixJQUFJK0MsS0FDN0MvQyxLQUFLNEMsU0FBV0EsRUFDaEI1QyxLQUFLUyxJQUFNVCxLQUFLUyxJQUFJTixLQUFLSCxNQUN6QkEsS0FBS1UsT0FBU1YsS0FBS1UsT0FBT1AsS0FBS0gsTUFHL0IsSUFBSyxJQUFJckIsRUFBSSxFQUFHQSxFQUFJaUUsRUFBU2xFLE9BQVFDLElBQ25DcUIsS0FBS2dELGdCQUFnQkMsSUFBSUwsRUFBU2pFLEdBQUlBLEVBRTFDLENBOUNGLElBQXNCa0IsRUFBYU8sRUFpSWpDLE9BaklvQlAsRUFtRFA4QyxHQW5Eb0J2QyxFQW1EWixDQUFDLENBQ3BCYixJQUFLQyxFQUNMRyxNQUNBLFdBQ0UsSUFBSWEsRUFBUVIsS0FDUmtELEVBQVFsRCxLQUFLNEMsU0FBU2xFLE9BQzFCLE1BQU8sQ0FDTDhELEtBQU0sV0FFSixNQUFPLENBQ0w3QyxNQUZVYSxFQUFNb0MsV0FBV00sR0FHM0JqQixLQUFNaUIsRUFBUSxFQUVsQixFQUVKLEdBQ0MsQ0FDRDNELElBQUssT0FDTDRELElBQUssV0FDSCxPQUFPbkQsS0FBSzRDLFNBQVNsRSxNQUN2QixHQUNDLENBQ0RhLElBQUssTUFDTEksTUFBTyxTQUFheUQsR0FDbEIsT0FBT3BELEtBQUtnRCxnQkFBZ0JLLElBQUlELEVBQ2xDLEdBQ0MsQ0FDRDdELElBQUssTUFDTEksTUFBTyxTQUFheUQsR0FRbEIsT0FQSUEsSUFBV3BELEtBQUtxRCxJQUFJRCxLQUN0QnBELEtBQUs0QyxTQUFTVSxLQUFLRixHQUNuQnBELEtBQUtnRCxnQkFBZ0JDLElBQUlHLEVBQVFwRCxLQUFLNEMsU0FBU2xFLE9BQVMsR0FHeERzQixLQUFLdUQsY0FBY3JELEtBQUtrRCxJQUVuQkEsQ0FDVCxHQUNDLENBQ0Q3RCxJQUFLLFNBQ0xJLE1BQU8sU0FBZ0J5RCxHQUNyQixHQUFJcEQsS0FBS3FELElBQUlELEdBQVMsQ0FFcEJwRCxLQUFLd0QsZ0JBQWdCdEQsS0FBS2tELEdBRzFCLElBQUlGLEVBQVFsRCxLQUFLZ0QsZ0JBQWdCRyxJQUFJQyxHQUNyQ3BELEtBQUtnRCxnQkFBd0IsT0FBRUksR0FHL0IsSUFBSUssRUFBUXpELEtBQUs0QyxTQUFTNUMsS0FBSzRDLFNBQVNsRSxPQUFTLEdBQzdDK0UsSUFBVUwsSUFDWnBELEtBQUs0QyxTQUFTTSxHQUFTTyxFQUN2QnpELEtBQUtnRCxnQkFBZ0JDLElBQUlRLEVBQU9QLElBSWxDbEQsS0FBSzRDLFNBQVNjLEtBQ2hCLENBQ0EsT0FBT04sQ0FDVCxHQUNDLENBQ0Q3RCxJQUFLLFFBQ0xJLE1BQU8sV0FDTCxJQUNFaUIsRUFERUMsRUF0TFYsU0FBb0NDLEVBQUdDLEdBQ3JDLElBQUlDLEVBQXVCLG9CQUFYQyxRQUEwQkgsRUFBRUcsT0FBT0MsV0FBYUosRUFBRSxjQUNsRSxJQUFLRSxFQUFJLENBQ1AsR0FBSW5DLE1BQU1zQyxRQUFRTCxLQUFPRSxFQVo3QixTQUFxQ0YsRUFBR00sR0FDdEMsR0FBS04sRUFBTCxDQUNBLEdBQWlCLGlCQUFOQSxFQUFnQixPQUFPLEVBQWtCQSxFQUFHTSxHQUN2RCxJQUFJQyxFQUFJaEMsT0FBT2lDLFVBQVVDLFNBQVNDLEtBQUtWLEdBQUdXLE1BQU0sR0FBSSxHQUVwRCxNQURVLFdBQU5KLEdBQWtCUCxFQUFFWSxjQUFhTCxFQUFJUCxFQUFFWSxZQUFZQyxNQUM3QyxRQUFOTixHQUFxQixRQUFOQSxFQUFvQnhDLE1BQU0rQyxLQUFLZCxHQUN4QyxjQUFOTyxHQUFxQiwyQ0FBMkNRLEtBQUtSLEdBQVcsRUFBa0JQLEVBQUdNLFFBQXpHLENBTGMsQ0FNaEIsQ0FLa0MsQ0FBNEJOLEtBQU9DLEdBQWtCRCxHQUF5QixpQkFBYkEsRUFBRXBDLE9BQXFCLENBQ2hIc0MsSUFBSUYsRUFBSUUsR0FDWixJQUFJckMsRUFBSSxFQUNKb0QsRUFBSSxXQUFhLEVBQ3JCLE1BQU8sQ0FDTEMsRUFBR0QsRUFDSFYsRUFBRyxXQUNELE9BQUkxQyxHQUFLbUMsRUFBRXBDLE9BQWUsQ0FDeEJ1RCxNQUFNLEdBRUQsQ0FDTEEsTUFBTSxFQUNOdEMsTUFBT21CLEVBQUVuQyxLQUViLEVBQ0F1RCxFQUFHLFNBQVVBLEdBQ1gsTUFBTUEsQ0FDUixFQUNBQyxFQUFHSixFQUVQLENBQ0EsTUFBTSxJQUFJakMsVUFBVSx3SUFDdEIsQ0FDQSxJQUVFc0MsRUFGRUMsR0FBbUIsRUFDckJDLEdBQVMsRUFFWCxNQUFPLENBQ0xOLEVBQUcsV0FDRGhCLEVBQUtBLEVBQUdRLEtBQUtWLEVBQ2YsRUFDQU8sRUFBRyxXQUNELElBQUlrQixFQUFPdkIsRUFBR3dCLE9BRWQsT0FEQUgsRUFBbUJFLEVBQUtOLEtBQ2pCTSxDQUNULEVBQ0FMLEVBQUcsU0FBVUEsR0FDWEksR0FBUyxFQUNURixFQUFNRixDQUNSLEVBQ0FDLEVBQUcsV0FDRCxJQUNPRSxHQUFpQyxNQUFickIsRUFBR3lCLFFBQWdCekIsRUFBR3lCLFFBR2pELENBRkUsUUFDQSxHQUFJSCxFQUFRLE1BQU1GLENBQ3BCLENBQ0YsRUFFSixDQW9Jc0IsQ0FBMkJwQyxNQUUzQyxJQUNFLElBQUthLEVBQVVtQixNQUFPcEIsRUFBUUMsRUFBVVEsS0FBS1ksTUFBTyxDQUNsRCxJQUFJbUIsRUFBU3hDLEVBQU1qQixNQUNuQkssS0FBS1UsT0FBTzBDLEVBQ2QsQ0FLRixDQUpFLE1BQU9oQixHQUNQdkIsRUFBVXFCLEVBQUVFLEVBQ2QsQ0FBRSxRQUNBdkIsRUFBVXNCLEdBQ1osQ0FDRixNQTlIYyxFQUFrQnRDLEVBQVl5QixVQUFXbEIsR0FFekRmLE9BQU9DLGVBQWVPLEVBQWEsWUFBYSxDQUM5Q1QsVUFBVSxJQTZITHVELENBQ1QsQ0FuRzBCLEdDaEgxQixTQUFTLEVBQWtCbkUsRUFBS0MsSUFDbkIsTUFBUEEsR0FBZUEsRUFBTUQsRUFBSUUsVUFBUUQsRUFBTUQsRUFBSUUsUUFDL0MsSUFBSyxJQUFJQyxFQUFJLEVBQUdDLEVBQU8sSUFBSUMsTUFBTUosR0FBTUUsRUFBSUYsRUFBS0UsSUFBS0MsRUFBS0QsR0FBS0gsRUFBSUcsR0FDbkUsT0FBT0MsQ0FDVCxDQVVBLFNBQVMsRUFBNEJrQyxFQUFHTSxHQUN0QyxHQUFLTixFQUFMLENBQ0EsR0FBaUIsaUJBQU5BLEVBQWdCLE9BQU8sRUFBa0JBLEVBQUdNLEdBQ3ZELElBQUlDLEVBQUloQyxPQUFPaUMsVUFBVUMsU0FBU0MsS0FBS1YsR0FBR1csTUFBTSxHQUFJLEdBRXBELE1BRFUsV0FBTkosR0FBa0JQLEVBQUVZLGNBQWFMLEVBQUlQLEVBQUVZLFlBQVlDLE1BQzdDLFFBQU5OLEdBQXFCLFFBQU5BLEVBQW9CeEMsTUFBTStDLEtBQUtkLEdBQ3hDLGNBQU5PLEdBQXFCLDJDQUEyQ1EsS0FBS1IsR0FBVyxFQUFrQlAsRUFBR00sUUFBekcsQ0FMYyxDQU1oQixDQU1BLFNBQVN1QyxFQUFtQm5GLEdBQzFCLE9BdEJGLFNBQTRCQSxHQUMxQixHQUFJSyxNQUFNc0MsUUFBUTNDLEdBQU0sT0FBTyxFQUFrQkEsRUFDbkQsQ0FvQlNvRixDQUFtQnBGLElBbEI1QixTQUEwQnFGLEdBQ3hCLEdBQXNCLG9CQUFYNUMsUUFBbUQsTUFBekI0QyxFQUFLNUMsT0FBT0MsV0FBMkMsTUFBdEIyQyxFQUFLLGNBQXVCLE9BQU9oRixNQUFNK0MsS0FBS2lDLEVBQ3RILENBZ0JvQ0MsQ0FBaUJ0RixJQUFRLEVBQTRCQSxJQUx6RixXQUNFLE1BQU0sSUFBSXNCLFVBQVUsdUlBQ3RCLENBR2lHaUUsRUFDakcsQ0FFQSxTQUFTQyxFQUFRdEUsR0FHZixPQUFPc0UsRUFBVSxtQkFBcUIvQyxRQUFVLGlCQUFtQkEsT0FBT0MsU0FBVyxTQUFVeEIsR0FDN0YsY0FBY0EsQ0FDaEIsRUFBSSxTQUFVQSxHQUNaLE9BQU9BLEdBQU8sbUJBQXFCdUIsUUFBVXZCLEVBQUlnQyxjQUFnQlQsUUFBVXZCLElBQVF1QixPQUFPSyxVQUFZLGdCQUFrQjVCLENBQzFILEVBQUdzRSxFQUFRdEUsRUFDYixDQUVBLFNBQVMsRUFBMkJvQixFQUFHQyxHQUNyQyxJQUFJQyxFQUF1QixvQkFBWEMsUUFBMEJILEVBQUVHLE9BQU9DLFdBQWFKLEVBQUUsY0FDbEUsSUFBS0UsRUFBSSxDQUNQLEdBQUluQyxNQUFNc0MsUUFBUUwsS0FBT0UsRUFBSyxFQUE0QkYsS0FBT0MsR0FBa0JELEdBQXlCLGlCQUFiQSxFQUFFcEMsT0FBcUIsQ0FDaEhzQyxJQUFJRixFQUFJRSxHQUNaLElBQUlyQyxFQUFJLEVBQ0pvRCxFQUFJLFdBQWEsRUFDckIsTUFBTyxDQUNMQyxFQUFHRCxFQUNIVixFQUFHLFdBQ0QsT0FBSTFDLEdBQUttQyxFQUFFcEMsT0FBZSxDQUN4QnVELE1BQU0sR0FFRCxDQUNMQSxNQUFNLEVBQ050QyxNQUFPbUIsRUFBRW5DLEtBRWIsRUFDQXVELEVBQUcsU0FBVUEsR0FDWCxNQUFNQSxDQUNSLEVBQ0FDLEVBQUdKLEVBRVAsQ0FDQSxNQUFNLElBQUlqQyxVQUFVLHdJQUN0QixDQUNBLElBRUVzQyxFQUZFQyxHQUFtQixFQUNyQkMsR0FBUyxFQUVYLE1BQU8sQ0FDTE4sRUFBRyxXQUNEaEIsRUFBS0EsRUFBR1EsS0FBS1YsRUFDZixFQUNBTyxFQUFHLFdBQ0QsSUFBSWtCLEVBQU92QixFQUFHd0IsT0FFZCxPQURBSCxFQUFtQkUsRUFBS04sS0FDakJNLENBQ1QsRUFDQUwsRUFBRyxTQUFVQSxHQUNYSSxHQUFTLEVBQ1RGLEVBQU1GLENBQ1IsRUFDQUMsRUFBRyxXQUNELElBQ09FLEdBQWlDLE1BQWJyQixFQUFHeUIsUUFBZ0J6QixFQUFHeUIsUUFHakQsQ0FGRSxRQUNBLEdBQUlILEVBQVEsTUFBTUYsQ0FDcEIsQ0FDRixFQUVKLENBRUEsU0FBUyxFQUFnQnhDLEVBQVVDLEdBQ2pDLEtBQU1ELGFBQW9CQyxHQUN4QixNQUFNLElBQUlDLFVBQVUsb0NBRXhCLENBRUEsU0FBUyxFQUFrQmYsRUFBUUMsR0FDakMsSUFBSyxJQUFJTCxFQUFJLEVBQUdBLEVBQUlLLEVBQU1OLE9BQVFDLElBQUssQ0FDckMsSUFBSU0sRUFBYUQsRUFBTUwsR0FDdkJNLEVBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFDakRELEVBQVdFLGNBQWUsRUFDdEIsVUFBV0YsSUFBWUEsRUFBV0csVUFBVyxHQUNqREMsT0FBT0MsZUFBZVAsRUFBUUUsRUFBV00sSUFBS04sRUFDaEQsQ0FDRixDQUNBLFNBQVMsRUFBYVksRUFBYU8sRUFBWTZELEdBTTdDLE9BTEk3RCxHQUFZLEVBQWtCUCxFQUFZeUIsVUFBV2xCLEdBQ3JENkQsR0FBYSxFQUFrQnBFLEVBQWFvRSxHQUNoRDVFLE9BQU9DLGVBQWVPLEVBQWEsWUFBYSxDQUM5Q1QsVUFBVSxJQUVMUyxDQUNULENBRUEsU0FBU3FFLEVBQXVCQyxHQUM5QixRQUFhLElBQVRBLEVBQ0YsTUFBTSxJQUFJQyxlQUFlLDZEQUUzQixPQUFPRCxDQUNULENBRUEsU0FBU0UsRUFBZ0J2RCxFQUFHd0QsR0FLMUIsT0FKQUQsRUFBa0JoRixPQUFPa0YsZUFBaUJsRixPQUFPa0YsZUFBZXBFLE9BQVMsU0FBeUJXLEVBQUd3RCxHQUVuRyxPQURBeEQsRUFBRTBELFVBQVlGLEVBQ1B4RCxDQUNULEVBQ091RCxFQUFnQnZELEVBQUd3RCxFQUM1QixDQUVBLFNBQVNHLEVBQVVDLEVBQVVDLEdBQzNCLEdBQTBCLG1CQUFmQSxHQUE0QyxPQUFmQSxFQUN0QyxNQUFNLElBQUk3RSxVQUFVLHNEQUV0QjRFLEVBQVNwRCxVQUFZakMsT0FBT3VGLE9BQU9ELEdBQWNBLEVBQVdyRCxVQUFXLENBQ3JFSSxZQUFhLENBQ1gvQixNQUFPK0UsRUFDUHRGLFVBQVUsRUFDVkQsY0FBYyxLQUdsQkUsT0FBT0MsZUFBZW9GLEVBQVUsWUFBYSxDQUMzQ3RGLFVBQVUsSUFFUnVGLEdBQVlOLEVBQWdCSyxFQUFVQyxFQUM1QyxDQUVBLFNBQVNFLEVBQWdCL0QsR0FJdkIsT0FIQStELEVBQWtCeEYsT0FBT2tGLGVBQWlCbEYsT0FBT3lGLGVBQWUzRSxPQUFTLFNBQXlCVyxHQUNoRyxPQUFPQSxFQUFFMEQsV0FBYW5GLE9BQU95RixlQUFlaEUsRUFDOUMsRUFDTytELEVBQWdCL0QsRUFDekIsQ0FjQSxTQUFTaUUsRUFBMkJaLEVBQU0zQyxHQUN4QyxHQUFJQSxJQUF5QixpQkFBVEEsR0FBcUMsbUJBQVRBLEdBQzlDLE9BQU9BLEVBQ0YsUUFBYSxJQUFUQSxFQUNULE1BQU0sSUFBSTFCLFVBQVUsNERBRXRCLE9BQU9vRSxFQUF1QkMsRUFDaEMsQ0FFQSxTQUFTYSxFQUFhQyxHQUNwQixJQUFJQyxFQXRCTixXQUNFLEdBQXVCLG9CQUFaQyxVQUE0QkEsUUFBUUMsVUFBVyxPQUFPLEVBQ2pFLEdBQUlELFFBQVFDLFVBQVVDLEtBQU0sT0FBTyxFQUNuQyxHQUFxQixtQkFBVkMsTUFBc0IsT0FBTyxFQUN4QyxJQUVFLE9BREFDLFFBQVFqRSxVQUFVa0UsUUFBUWhFLEtBQUsyRCxRQUFRQyxVQUFVRyxRQUFTLElBQUksV0FBYSxNQUNwRSxDQUdULENBRkUsTUFBT3JELEdBQ1AsT0FBTyxDQUNULENBQ0YsQ0FZa0N1RCxHQUNoQyxPQUFPLFdBQ0wsSUFDRUMsRUFERUMsRUFBUWQsRUFBZ0JJLEdBRTVCLEdBQUlDLEVBQTJCLENBQzdCLElBQUlVLEVBQVlmLEVBQWdCN0UsTUFBTTBCLFlBQ3RDZ0UsRUFBU1AsUUFBUUMsVUFBVU8sRUFBTzlDLFVBQVcrQyxFQUMvQyxNQUNFRixFQUFTQyxFQUFNRSxNQUFNN0YsS0FBTTZDLFdBRTdCLE9BQU9rQyxFQUEyQi9FLEtBQU0wRixFQUMxQyxDQUNGLENBRUEsU0FBUyxFQUFnQmhHLEVBQUtILEVBQUtJLEdBV2pDLE9BVklKLEtBQU9HLEVBQ1RMLE9BQU9DLGVBQWVJLEVBQUtILEVBQUssQ0FDOUJJLE1BQU9BLEVBQ1BULFlBQVksRUFDWkMsY0FBYyxFQUNkQyxVQUFVLElBR1pNLEVBQUlILEdBQU9JLEVBRU5ELENBQ1QsQ0FFQSxJQUFJb0csRUFBd0IsV0FDMUIsU0FBU0EsSUFDUCxFQUFnQjlGLEtBQU04RixHQUN0QixFQUFnQjlGLEtBQU0sUUFBUyxJQUFJK0MsSUFDckMsQ0FZQSxPQVhBLEVBQWErQyxFQUFVLENBQUMsQ0FDdEJ2RyxJQUFLLE1BQ0xJLE1BQU8sU0FBYUosRUFBS3dHLEdBQ3ZCLElBQUlwRyxFQUFRSyxLQUFLZ0csTUFBTTdDLElBQUk1RCxHQUszQixZQUpjdUQsSUFBVm5ELElBQ0ZLLEtBQUtnRyxNQUFNL0MsSUFBSTFELEVBQUt3RyxHQUNwQnBHLEVBQVFvRyxHQUVIcEcsQ0FDVCxLQUVLbUcsQ0FDVCxDQWpCNEIsR0F5QjVCLFNBQVNHLEVBQWM3QyxHQUNyQixJQUFLLElBQUk4QyxFQUFRckQsVUFBVW5FLE9BQVF5SCxFQUFhLElBQUl0SCxNQUFNcUgsRUFBUSxFQUFJQSxFQUFRLEVBQUksR0FBSUUsRUFBUSxFQUFHQSxFQUFRRixFQUFPRSxJQUM5R0QsRUFBV0MsRUFBUSxHQUFLdkQsVUFBVXVELEdBRXBDLE9BQU9ELEVBQVdFLE9BQU0sU0FBVUMsR0FDaEMsWUFBcUJ4RCxJQUFkTSxFQUFPa0QsRUFDaEIsR0FDRixDQVNBLFNBQVNDLEVBQWdCbkQsR0FDdkIsSUFBSyxJQUFJb0QsRUFBUTNELFVBQVVuRSxPQUFReUgsRUFBYSxJQUFJdEgsTUFBTTJILEVBQVEsRUFBSUEsRUFBUSxFQUFJLEdBQUlDLEVBQVEsRUFBR0EsRUFBUUQsRUFBT0MsSUFDOUdOLEVBQVdNLEVBQVEsR0FBSzVELFVBQVU0RCxHQUVwQyxPQUFPTixFQUFXRSxPQUFNLFNBQVVDLEdBQ2hDLFlBQXFCeEQsSUFBZE0sRUFBT2tELEVBQ2hCLEdBQ0YsQ0FJZSxJQUFJUixFQUFuQixJQU9JWSxFQUFzQixTQUE2QlAsR0FDckQsT0FBT3hDLEVBQW1CLElBQUkxRCxJQUFJa0csRUFBV1EsT0FBT0MsUUFBTyxTQUFVTixHQUNuRSxRQUFTQSxHQUFXLEtBQU5BLENBQ2hCLEtBQ0YsRUFVSU8sRUFBYSxJQUFJZixFQUNqQmdCLEVBQWUsU0FBc0JDLEdBQ3ZDLElBQUlDLEVBUmUsU0FBd0JELEdBQzNDLE1BQU8sQ0FDTCxVQUEwQmpFLElBQWxCaUUsRUFBWSxLQUFrQkwsRUFBb0JLLEVBQVksTUFBSyxHQUMzRUUsYUFBMkJuRSxJQUFsQmlFLEVBQU1FLFFBQXdCUCxFQUFvQkssRUFBTUUsU0FBVyxHQUVoRixDQUd3QkMsQ0FBZUgsR0FDakN4SCxFQUFNNEgsS0FBS0MsVUFBVUosR0FDekIsT0FBT0gsRUFBVzFELElBQUk1RCxFQUFLeUgsRUFDN0IsRUFNSUssRUFBNEIsU0FBVUMsR0FDeEM3QyxFQUFVNEMsRUFBY0MsR0FDeEIsSUFBSUMsRUFBU3ZDLEVBQWFxQyxHQUMxQixTQUFTQSxJQUNQLElBQUk3RyxFQUNKLEVBQWdCUixLQUFNcUgsR0FDdEIsSUFBSyxJQUFJRyxFQUFPM0UsVUFBVW5FLE9BQVErSSxFQUFPLElBQUk1SSxNQUFNMkksR0FBT0UsRUFBTyxFQUFHQSxFQUFPRixFQUFNRSxJQUMvRUQsRUFBS0MsR0FBUTdFLFVBQVU2RSxHQUl6QixPQURBLEVBQWdCeEQsRUFEaEIxRCxFQUFRK0csRUFBTy9GLEtBQUtxRSxNQUFNMEIsRUFBUSxDQUFDdkgsTUFBTTJILE9BQU9GLEtBQ0QsVUFBVyxJQUFJeEgsS0FDdkRPLENBQ1QsQ0E0SkEsT0EzSkEsRUFBYTZHLEVBQWMsQ0FBQyxDQUMxQjlILElBQUssUUFDTEksTUFRQSxTQUFleUQsR0FDYixPQUFPLENBQ1QsR0FlQyxDQUNEN0QsSUFBSyxXQUNMSSxNQUFPLFNBQWtCeUQsR0FDdkIsSUFBSXdFLEVBQVMvRSxVQUFVbkUsT0FBUyxRQUFzQm9FLElBQWpCRCxVQUFVLEdBQW1CQSxVQUFVLEdBQUtPLEVBU2pGLEdBUElwRCxLQUFLNkgsTUFBTUQsR0FDYjVILEtBQUtTLElBQUkyQyxHQUVUcEQsS0FBS1UsT0FBTzBDLEdBSVZwRCxLQUFLcUQsSUFBSUQsR0FBUyxDQUNwQixJQUNFeEMsRUFERUMsRUFBWSxFQUEyQmIsS0FBSzhILFNBRWhELElBQ0UsSUFBS2pILEVBQVVtQixNQUFPcEIsRUFBUUMsRUFBVVEsS0FBS1ksTUFBTyxDQUNsRCxJQUFJOEYsRUFBU25ILEVBQU1qQixNQUNuQm9JLEVBQU9DLFNBQVM1RSxFQUFRd0UsRUFDMUIsQ0FLRixDQUpFLE1BQU94RixHQUNQdkIsRUFBVXFCLEVBQUVFLEVBQ2QsQ0FBRSxRQUNBdkIsRUFBVXNCLEdBQ1osQ0FDRixDQUNGLEdBQ0MsQ0FDRDVDLElBQUssUUFDTEksTUFBTyxTQUFlb0csR0FDcEIsSUFBSWtDLEVBQVNqSSxLQUNUa0QsRUFBUWxELEtBQUs0QyxTQUFTbEUsT0FDdEI4RCxFQUFPLFdBQ1QsSUFBSTdDLEVBQ0osR0FDRUEsRUFBUXNJLEVBQU9yRixXQUFXTSxTQUNuQnZELElBQVVvRyxFQUFVcEcsSUFDN0IsTUFBTyxDQUNMQSxNQUFPQSxFQUNQc0MsS0FBTWlCLEVBQVEsRUFFbEIsRUFDQSxPQUFPLEVBQWdCLENBQUMsRUFBR2pDLE9BQU9DLFVBQVUsV0FDMUMsTUFBTyxDQUNMc0IsS0FBTUEsRUFFVixHQUNGLEdBR0MsQ0FDRGpELElBQUssT0FDTEksTUFBTyxXQUNMLE9BQU9LLEtBQUtrSSxVQUFVckMsTUFBTTdGLEtBQU02QyxVQUNwQyxHQUdDLENBQ0R0RCxJQUFLLFVBQ0xJLE1BQU8sV0FDTCxJQUFLLElBQUl1RyxFQUFRckQsVUFBVW5FLE9BQVFNLEVBQVEsSUFBSUgsTUFBTXFILEdBQVFFLEVBQVEsRUFBR0EsRUFBUUYsRUFBT0UsSUFDckZwSCxFQUFNb0gsR0FBU3ZELFVBQVV1RCxHQUUzQixPQUFPcEcsS0FBS2tJLFVBQVUsQ0FDcEJqQixRQUFTakksR0FFYixHQUdDLENBQ0RPLElBQUssWUFDTEksTUFFQSxTQUFtQm9ILEdBRWpCLEdBQXFCLG1CQUFWQSxFQUFzQixDQUMvQixJQUNFb0IsRUFERUMsRUFBYSxFQUEyQnBJLEtBQUs4SCxTQUVqRCxJQUNFLElBQUtNLEVBQVdwRyxNQUFPbUcsRUFBU0MsRUFBVy9HLEtBQUtZLE1BQU8sQ0FDckQsSUFBSW9HLEVBQVdGLEVBQU94SSxNQUN0QixHQUFJMEksYUFBb0JDLEdBQW1CRCxFQUFTdEMsWUFBY2dCLEVBQ2hFLE9BQU9zQixDQUVYLENBS0YsQ0FKRSxNQUFPakcsR0FDUGdHLEVBQVdsRyxFQUFFRSxFQUNmLENBQUUsUUFDQWdHLEVBQVdqRyxHQUNiLENBQ0EsSUFBSW9HLEVBQVUsSUFBSUQsRUFBZ0J0SSxLQUFNK0csR0FFeEMsT0FEQS9HLEtBQUs4SCxRQUFRckgsSUFBSThILEdBQ1ZBLENBQ1QsQ0FHQSxHQUF1QixXQUFuQnZFLEVBQVErQyxHQUFxQixDQUMvQixJQUFLLElBQUl5QixFQUFRM0YsVUFBVW5FLE9BQVErSixFQUFPLElBQUk1SixNQUFNMkosRUFBUSxFQUFJQSxFQUFRLEVBQUksR0FBSUUsRUFBUSxFQUFHQSxFQUFRRixFQUFPRSxJQUN4R0QsRUFBS0MsRUFBUSxHQUFLN0YsVUFBVTZGLEdBRTlCLE9BQU8xSSxLQUFLa0ksVUFBVSxDQUNwQixLQUFRLENBQUNuQixHQUFPWSxPQUFPYyxJQUUzQixDQUdBLElBRUVFLEVBRkVDLEVBQWdCOUIsRUFBYUMsR0FDN0I4QixFQUFhLEVBQTJCN0ksS0FBSzhILFNBRWpELElBQ0UsSUFBS2UsRUFBVzdHLE1BQU8yRyxFQUFTRSxFQUFXeEgsS0FBS1ksTUFBTyxDQUNyRCxJQUFJNkcsRUFBV0gsRUFBT2hKLE1BQ3RCLEdBQUltSixhQUFvQkMsR0FBbUJELEVBQVMvQixRQUFVNkIsRUFDNUQsT0FBT0UsQ0FFWCxDQU9GLENBSkUsTUFBTzFHLEdBQ1B5RyxFQUFXM0csRUFBRUUsRUFDZixDQUFFLFFBQ0F5RyxFQUFXMUcsR0FDYixDQUNBLElBQUk0RixFQUFTLElBQUlnQixFQUFnQi9JLEtBQU00SSxHQUV2QyxPQURBNUksS0FBSzhILFFBQVFySCxJQUFJc0gsR0FDVkEsQ0FDVCxLQUVLVixDQUNULENBektnQyxDQXlLOUIxRSxHQUNFcUcsRUFBbUMsU0FBVUMsR0FDL0N4RSxFQUFVdUUsRUFBcUJDLEdBQy9CLElBQUlDLEVBQVVsRSxFQUFhZ0UsR0FDM0IsU0FBU0EsRUFBb0JHLEdBQzNCLElBQUlDLEVBSUosT0FIQSxFQUFnQnBKLEtBQU1nSixJQUN0QkksRUFBU0YsRUFBUTFILEtBQUt4QixPQUNmbUosT0FBU0EsRUFDVEMsQ0FDVCxDQW9DQSxPQW5DQSxFQUFhSixFQUFxQixDQUFDLENBQ2pDekosSUFBSyxnQkFDTEksTUFBTyxXQUNMLElBQUkwSixFQUFTckosS0FDYkEsS0FBS21KLE9BQU81RixjQUFjOUMsS0FBSSxTQUFVeUIsR0FDbENtSCxFQUFPeEIsTUFBTTNGLElBQUltSCxFQUFPNUksSUFBSXlCLEVBQ2xDLElBQ0FsQyxLQUFLbUosT0FBTzNGLGdCQUFnQi9DLEtBQUksU0FBVXlCLEdBQ3hDbUgsRUFBTzNJLE9BQU93QixFQUNoQixJQUNBbEMsS0FBS3NKLFFBQ1AsR0FPQyxDQUNEL0osSUFBSyxTQUNMSSxNQUFPLFdBQ0wsSUFDRTRKLEVBREVDLEVBQWEsRUFBMkJ4SixLQUFLbUosUUFFakQsSUFDRSxJQUFLSyxFQUFXeEgsTUFBT3VILEVBQVNDLEVBQVduSSxLQUFLWSxNQUFPLENBQ3JELElBQUltQixFQUFTbUcsRUFBTzVKLE1BQ3BCSyxLQUFLZ0ksU0FBUzVFLEVBQ2hCLENBS0YsQ0FKRSxNQUFPaEIsR0FDUG9ILEVBQVd0SCxFQUFFRSxFQUNmLENBQUUsUUFDQW9ILEVBQVdySCxHQUNiLENBQ0YsS0FFSzZHLENBQ1QsQ0E5Q3VDLENBOENyQzNCLEdBTUVpQixFQUErQixTQUFVbUIsR0FDM0NoRixFQUFVNkQsRUFBaUJtQixHQUMzQixJQUFJQyxFQUFVMUUsRUFBYXNELEdBQzNCLFNBQVNBLEVBQWdCYSxFQUFRcEQsR0FDL0IsSUFBSTRELEVBTUosT0FMQSxFQUFnQjNKLEtBQU1zSSxJQUN0QnFCLEVBQVNELEVBQVFsSSxLQUFLeEIsS0FBTW1KLElBQ3JCQSxPQUFTQSxFQUNoQlEsRUFBTzVELFVBQVlBLEVBQ25CNEQsRUFBT0MsZ0JBQ0FELENBQ1QsQ0FPQSxPQU5BLEVBQWFyQixFQUFpQixDQUFDLENBQzdCL0ksSUFBSyxRQUNMSSxNQUFPLFNBQWV5RCxHQUNwQixPQUFPcEQsS0FBSytGLFVBQVUzQyxFQUN4QixLQUVLa0YsQ0FDVCxDQW5CbUMsQ0FtQmpDVSxHQU1FRCxFQUErQixTQUFVYyxHQUMzQ3BGLEVBQVVzRSxFQUFpQmMsR0FDM0IsSUFBSUMsRUFBVTlFLEVBQWErRCxHQUMzQixTQUFTQSxFQUFnQkksRUFBUXBDLEdBQy9CLElBQUlnRCxFQU1KLE9BTEEsRUFBZ0IvSixLQUFNK0ksSUFDdEJnQixFQUFTRCxFQUFRdEksS0FBS3hCLEtBQU1tSixJQUNyQkEsT0FBU0EsRUFDaEJZLEVBQU9oRCxNQUFRQSxFQUNmZ0QsRUFBT0gsZ0JBQ0FHLENBQ1QsQ0FPQSxPQU5BLEVBQWFoQixFQUFpQixDQUFDLENBQzdCeEosSUFBSyxRQUNMSSxNQUFPLFNBQWV5RCxHQUNwQixPQUFPNkMsRUFBY0osV0FBTSxFQUFRLENBQUN6QyxHQUFRdUUsT0FBT2hFLEVBQW1CM0QsS0FBSytHLE1BQVksTUFBSyxPQUFTUixFQUFnQlYsV0FBTSxFQUFRLENBQUN6QyxHQUFRdUUsT0FBT2hFLEVBQW1CM0QsS0FBSytHLE1BQU1FLFNBQVcsS0FDOUwsS0FFSzhCLENBQ1QsQ0FuQm1DLENBbUJqQ0MsR0FFRixTQUFTZ0IsRUFBUUMsRUFBUUMsR0FDdkIsSUFBSUMsRUFBTzlLLE9BQU84SyxLQUFLRixHQUN2QixHQUFJNUssT0FBTytLLHNCQUF1QixDQUNoQyxJQUFJQyxFQUFVaEwsT0FBTytLLHNCQUFzQkgsR0FDM0NDLElBQW1CRyxFQUFVQSxFQUFRekQsUUFBTyxTQUFVMEQsR0FDcEQsT0FBT2pMLE9BQU9rTCx5QkFBeUJOLEVBQVFLLEdBQUtwTCxVQUN0RCxLQUFLaUwsRUFBSzdHLEtBQUt1QyxNQUFNc0UsRUFBTUUsRUFDN0IsQ0FDQSxPQUFPRixDQUNULENBYUEsSUM5aUJZSyxFRDhpQlJDLEVBQXFCLFNBQVV4QixHQUNqQ3hFLEVBQVVnRyxFQUFPeEIsR0FDakIsSUFBSTFCLEVBQVN2QyxFQUFheUYsR0FDMUIsU0FBU0EsSUFDUCxJQUFJakssRUFDQW9DLEVBQVdDLFVBQVVuRSxPQUFTLFFBQXNCb0UsSUFBakJELFVBQVUsR0FBbUJBLFVBQVUsR0FBSyxHQWdCbkYsT0FmQSxFQUFnQjdDLEtBQU15SyxHQUl0QixFQUFnQnZHLEVBSGhCMUQsRUFBUStHLEVBQU8vRixLQUFLeEIsS0FBTTRDLElBR3FCLGFBQWMsSUFBSUcsS0FDakUsRUFBZ0JtQixFQUF1QjFELEdBQVEsYUFBYyxJQUFJdUMsS0FDakUsRUFBZ0JtQixFQUF1QjFELEdBQVEsU0FBVSxHQUN6REEsRUFBTWdELGdCQUFnQi9DLEtBQUksU0FBVTJDLEdBRWxDLEdBQUk1QyxFQUFNa0ssV0FBV3JILElBQUlELEdBQVMsQ0FDaEMsSUFBSXVILEVBQUtuSyxFQUFNa0ssV0FBV3ZILElBQUlDLEdBQzlCNUMsRUFBTW9LLFdBQW1CLE9BQUVELEdBQzNCbkssRUFBTWtLLFdBQW1CLE9BQUV0SCxFQUM3QixDQUNGLElBQ081QyxDQUNULENBK0VBLE9BOUVBLEVBQWFpSyxFQUFPLENBQUMsQ0FDbkJsTCxJQUFLLFNBQ0xJLE1BQU8sU0FBVWtMLEdBQ2YsU0FBU3ZCLEVBQU93QixFQUFJQyxFQUFLQyxHQUN2QixPQUFPSCxFQUFRaEYsTUFBTTdGLEtBQU02QyxVQUM3QixDQUlBLE9BSEF5RyxFQUFPL0gsU0FBVyxXQUNoQixPQUFPc0osRUFBUXRKLFVBQ2pCLEVBQ08rSCxDQUNULENBUk8sRUFRTCxTQUFVbEcsRUFBUWtHLEVBQVEzSixHQUMxQixHQUFzQixtQkFBWDJKLEVBQXVCLENBQ2hDLElBQUkyQixFQUFVM0IsRUFBT2xHLEdBQ3JCNkgsR0FBVzVMLE9BQU82TCxPQUFPOUgsRUFBUTZILEVBQ25DLEtBQTZCLGlCQUFYM0IsRUFDaEJsRyxFQUFPa0csR0FBVTNKLEVBQ1IySixHQUNUakssT0FBTzZMLE9BQU85SCxFQUFRa0csR0FPeEIsT0FISXRKLEtBQUtxRCxJQUFJRCxJQUNYcEQsS0FBS2dJLFNBQVM1RSxHQUVUQSxDQUNULEtBQ0MsQ0FDRDdELElBQUssZUFDTEksTUFBTyxTQUFzQnlELEVBQVErSCxFQUFXeEwsUUFFcEJtRCxJQUF0Qk0sRUFBTytILEtBR1gvSCxFQUFPK0gsR0FBYXhMLEVBR2hCSyxLQUFLcUQsSUFBSUQsSUFDWHBELEtBQUtnSSxTQUFTNUUsR0FFbEIsR0FDQyxDQUNEN0QsSUFBSyxrQkFDTEksTUFBTyxTQUF5QnlELEVBQVErSCxHQUV0QyxRQUEwQnJJLElBQXRCTSxFQUFPK0gsR0FBWCxDQUdBLEdBQUluTCxLQUFLcUQsSUFBSUQsR0FBUyxDQUNwQixJQUFJd0UsRUFuRlosU0FBd0I3SSxHQUN0QixJQUFLLElBQUlKLEVBQUksRUFBR0EsRUFBSWtFLFVBQVVuRSxPQUFRQyxJQUFLLENBQ3pDLElBQUl3SyxFQUFTLE1BQVF0RyxVQUFVbEUsR0FBS2tFLFVBQVVsRSxHQUFLLENBQUMsRUFDcERBLEVBQUksRUFBSXFMLEVBQVEzSyxPQUFPOEosSUFBUyxHQUFJaUMsU0FBUSxTQUFVN0wsR0FDcEQsRUFBZ0JSLEVBQVFRLEVBQUs0SixFQUFPNUosR0FDdEMsSUFBS0YsT0FBT2dNLDBCQUE0QmhNLE9BQU9pTSxpQkFBaUJ2TSxFQUFRTSxPQUFPZ00sMEJBQTBCbEMsSUFBV2EsRUFBUTNLLE9BQU84SixJQUFTaUMsU0FBUSxTQUFVN0wsR0FDNUpGLE9BQU9DLGVBQWVQLEVBQVFRLEVBQUtGLE9BQU9rTCx5QkFBeUJwQixFQUFRNUosR0FDN0UsR0FDRixDQUNBLE9BQU9SLENBQ1QsQ0F5RXFCd00sQ0FBZSxDQUFDLEVBQUduSSxVQUN6QndFLEVBQU91RCxHQUNkbkwsS0FBS2dJLFNBQVM1RSxFQUFRd0UsRUFDeEIsUUFHT3hFLEVBQU8rSCxFQVY2QixDQVc3QyxHQUdDLENBQ0Q1TCxJQUFLLEtBQ0xJLE1BQU8sU0FBWXlELEdBRWpCLEdBQUtwRCxLQUFLcUQsSUFBSUQsR0FBZCxDQUdBLElBQUtwRCxLQUFLMEssV0FBV3JILElBQUlELEdBQVMsQ0FDaEMsSUFBSXVILEVBQUszSyxLQUFLd0wsU0FDZHhMLEtBQUswSyxXQUFXekgsSUFBSUcsRUFBUXVILEdBQzVCM0ssS0FBSzRLLFdBQVczSCxJQUFJMEgsRUFBSXZILEVBQzFCLENBQ0EsT0FBT3BELEtBQUswSyxXQUFXdkgsSUFBSUMsRUFSWSxDQVN6QyxHQUNDLENBQ0Q3RCxJQUFLLFNBQ0xJLE1BQU8sU0FBZ0JnTCxHQUNyQixPQUFPM0ssS0FBSzRLLFdBQVd6SCxJQUFJd0gsRUFDN0IsS0FFS0YsQ0FDVCxDQXRHeUIsQ0FzR3ZCcEQsR0Mvb0JLLFNBQVNvRSxFQUNaQyxFQUNBcEssR0FHQSxJQUFJOEIsRUFBYyxDQUFDLEVBS25CLE9BSkEvRCxPQUFPNkwsT0FBTzlILEVBQVE5QixHQUV0QjhCLEVBQU91SSxZQUFhLEVBRWJELEVBQU1qTCxJQUFJMkMsRUFDckIsQ0FZTyxTQUFTd0ksRUFBZUMsRUFBYUMsR0FFeENDLFFBQVFDLElBQUlILEdBc0JoQixTQUF5QkEsRUFBYUMsR0FHbEMsR0FBSUQsRUFBSUksZUFBZSxxQkFFZEgsRUFBS0ksVUFBVUMsb0JBQW9CTixFQUFJTyxpQkFHeEMsT0FBTyxFQUtmLEdBQUlQLEVBQUlJLGVBQWUsbUJBRW5CLElBQUssTUFBTUksS0FBUVIsRUFBSU8sZ0JBRW5CTixFQUFLSSxVQUFVSSxZQUFZRCxFQUFLRSxNQUFPRixFQUFLRyxRQUFRLEdBSTVELE9BQU8sQ0FDWCxDQTFDUUosQ0FBZ0JQLEVBQUtDLEtBUzdCLFNBQXlCRCxFQUFhQyxHQUVsQyxHQUFJRCxFQUFJSSxlQUFlLG1CQUVuQixJQUFLLE1BQU1JLEtBQVFSLEVBQUlZLGdCQUVuQlgsRUFBS0ksVUFBVUksWUFBWUQsRUFBS0UsS0FBTUYsRUFBS0csUUFBUSxFQUcvRCxDQWhCUUMsQ0FBZ0JaLEVBQUtDLEdBMEM3QixTQUEyQkQsRUFBYUMsR0FFaENELEVBQUlJLGVBQWUsdUJBR25CSCxFQUFLWSxVQUFVQyxZQUFZYixFQUFLWSxVQUFVRSxxQkFBcUJmLEVBQUlnQixrQkFBa0JOLE9BR2pGVixFQUFJSSxlQUFlLHFCQUVuQkosRUFBSU8sZ0JBQWtCTixFQUFLWSxVQUFVSSxnQkFBZ0JqQixFQUFJZ0Isa0JBQWtCTixPQUd2RixDQXREUU0sQ0FBa0JoQixFQUFLQyxJQUczQkEsRUFBS2lCLFVBQ1QsRUF2Q0EsU0FBWXZDLEdBRVIsZ0NBQ0gsQ0FIRCxDQUFZQSxJQUFBQSxFQUFVLEtBOEZmLE1BQU13QyxFQUNJLENBQ1RyQyxHQUFJLGVBQ0o4QixnQkFBaUIsQ0FBQyxDQUFFRixLQUFNLFFBQVNDLE9BQVEsS0FIdENRLEVBS0ssQ0FDVnJDLEdBQUksZ0JBQ0o4QixnQkFBaUIsQ0FBQyxDQUFFRixLQUFNLFNBQVVDLE9BQVEsS0M3RnZDUyxFQUNiLENBQ0ksTUFBUyxFQUNULE1BQVMsRUFDVCxJQUFPLEVBQ1AsTUFBUyxFQUVULE1BQVMsRUFDVCxLQUFRLEVBQ1IsT0FBVSxFQUVWLFFBQVcsRUFDWCxRQUFXLEdBSVIsTUFBTUMsRUFFRnBCLEtBRUFxQixhQUFnRCxJQUFJcEssSUFFM0RxSyxZQUErQyxJQUFJckssSUFDbkRzSyxlQUFrRCxJQUFJdEssSUFDdER1Syw0QkFBK0QsSUFBSXZLLElBRTVEd0ssWUFBK0IsQ0FDbENmLE9BQVEsRUFDUmdCLFNBQVUsS0FHUEMsZ0JBQXVDLElBQUloTyxFQUMzQ2lPLGtCQUF5QyxJQUFJak8sRUFFcERpQyxZQUFZb0ssR0FFUjlMLEtBQUs4TCxLQUFPQSxDQUNoQixDQUVPNkIsT0FFRnRPLE9BQU84SyxLQUFLOEMsR0FBdUM3QixTQUFTbUIsSUFFekR2TSxLQUFLNE4saUJBQWlCckIsRUFBSyxHQUVuQyxDQUVRcUIsaUJBQ0pyQixHQUdBLElBQUt2TSxLQUFLb04sWUFBWS9KLElBQUlrSixHQUMxQixDQUNJLElBRUlzQixFQUFPLENBQ1B0QixLQUFNQSxFQUNOdUIsUUFBUyxFQUNUQyxJQUxjL04sS0FBS21OLGFBQWFoSyxJQUFJb0osR0FBTXlCLGlCQU0xQ0MsV0FBWSxFQUVaQyxTQUFTLEdBVWIsR0FSQWxPLEtBQUtvTixZQUFZbkssSUFBSXNKLEVBQU1zQixJQUVhLElBQXBDN04sS0FBS21OLGFBQWFoSyxJQUFJb0osR0FBTTRCLEtBRTVCbk8sS0FBS3FOLGVBQWVwSyxJQUFJc0osRUFBTXNCLElBSTdCWCxFQUFla0IscUJBQXFCL0ssSUFBSWtKLEdBQzdDLENBQ0ksSUFFSXNCLEVBQU8sQ0FDUHRCLEtBQU1BLEVBQ051QixRQUFTLEVBQ1RDLElBTGMvTixLQUFLbU4sYUFBYWhLLElBQUlvSixHQUFNOEIsa0JBTTFDSixXQUFZLEVBRVpDLFNBQVMsR0FFYmhCLEVBQWVrQixxQkFBcUJuTCxJQUFJc0osRUFBTXNCLEUsQ0FJbEQsT0FEQTdOLEtBQUt5TixnQkFBZ0J2TixLQUFLMk4sR0FDbkJBLEMsQ0FFZixDQUVPUyxpQkFDSC9CLEVBQ0FDLEdBSUEsT0FBT0EsR0FER3hNLEtBQUt1TyxZQUFZaEMsR0FDTnVCLE9BQ3pCLENBRU8zQixvQkFDSEQsR0FHQSxJQUFLLE1BQU1HLEtBQVFILEVBR2YsR0FBSWxNLEtBQUt3TyxrQkFBa0JuQyxFQUFLRSxNQUFRRixFQUFLRyxPQUFVLE9BQU8sRUFHbEUsT0FBTyxDQUNYLENBR09GLFlBQ0hDLEVBQ0FDLEVBQ0FpQyxHQUFnQixHQUVYek8sS0FBS29OLFlBQVkvSixJQUFJa0osSUFHdEJ2TSxLQUFLNE4saUJBQWlCckIsR0FHMUIsSUFBSXNCLEVBQU83TixLQUFLb04sWUFBWWpLLElBQUlvSixHQUloQyxHQUhBc0IsRUFBS0ssU0FBVSxFQUdYMUIsRUFBUyxHQUdMcUIsRUFBS0MsU0FBWXRCLEVBQ3JCLENBQ0ksSUFBSWtDLEVBQVF4QixFQUFla0IscUJBQXFCakwsSUFBSW9KLEdBQ2hEb0MsRUFBVUQsRUFBTVosUUFDcEJZLEVBQU1aLFNBQVd0QixFQUNia0MsRUFBTVosUUFBVSxJQUVoQlksRUFBTVosUUFBVSxHQUdwQnRCLEdBQVdrQyxFQUFNWixRQUFVYSxDLENBSW5DLElBQUlDLEVBQVlmLEVBQUtDLFFBMkJyQixPQTFCQUQsRUFBS0MsU0FBV3RCLEdBRXdCLElBQXBDeE0sS0FBS21OLGFBQWFoSyxJQUFJb0osR0FBTTRCLE1BRWYsSUFBVE0sR0FFQTFDLFFBQVE4QyxLQUFLLDZHQUlqQmhCLEVBQUtFLElBQU0sR0FDWEYsRUFBS0MsU0FBV0QsRUFBS0UsTUFFckJGLEVBQUtDLFFBQVVELEVBQUtFLEtBR3BCRixFQUFLQyxRQUFVLElBRWZELEVBQUtDLFFBQVUsR0FHZlcsSUFFQVosRUFBS0ksWUFBY0osRUFBS0MsUUFBVWMsSUFHOUJmLEVBQUtDLFFBQVVjLEdBQWFwQyxDQUN4QyxDQUVPK0IsWUFBWWhDLEdBRWYsR0FBSXZNLEtBQUtvTixZQUFZL0osSUFBSWtKLEdBQ3pCLENBRUksR0FBSVcsRUFBZWtCLHFCQUFxQi9LLElBQUlrSixHQUM1QyxDQUNJLElBQUltQyxFQUFReEIsRUFBZWtCLHFCQUFxQmpMLElBQUlvSixHQUNoRHVDLEVBQVE5TyxLQUFLb04sWUFBWWpLLElBQUlvSixHQUNqQyxNQUFPLENBQ0hBLEtBQU1BLEVBQ051QixRQUFTWSxFQUFNWixRQUFVZ0IsRUFBTWhCLFFBQy9CQyxJQUFLVyxFQUFNWCxJQUFNZSxFQUFNZixJQUN2QkUsV0FBWWEsRUFBTWIsV0FDbEJjLGtCQUFtQkQsRUFBTUMsa0JBQ3pCYixRQUFTWSxFQUFNWixTQUFXUSxFQUFNUixRLENBT3BDLE9BREFuQyxRQUFROEMsS0FBSyx5Q0FBeUN0Qyx5QkFDL0N2TSxLQUFLb04sWUFBWWpLLElBQUlvSixFLENBR3BDLE9BQU8sSUFDWCxDQUVPaUMsa0JBQWtCakMsR0FFckIsT0FBSXZNLEtBQUtvTixZQUFZL0osSUFBSWtKLEdBRWR2TSxLQUFLb04sWUFBWWpLLElBQUlvSixHQUFNdUIsUUFFL0IsQ0FDWCxDQUVPa0IsbUJBRUhoUCxLQUFLdU4sWUFBWWYsT0FBUyxFQUMxQixJQUFLLE1BQU1xQixLQUFRN04sS0FBS3FOLGVBQWU0QixVQUdsQixJQUROalAsS0FBS21OLGFBQWFoSyxJQUFJMEssRUFBS3RCLE1BQzdCNEIsTUFFTG5PLEtBQUt1TixZQUFZZixRQUFVcUIsRUFBS0MsU0FJcEM5TixLQUFLdU4sWUFBWWYsT0FBU3hNLEtBQUt1TixZQUFZQyxVQUUzQ3pCLFFBQVE4QyxLQUFLLCtFQUVyQixDQUtPSyxtQkFFSCxJQUFLLE1BQU1yQixLQUFRN04sS0FBS29OLFlBQVk2QixTQUNwQyxDQUNJcEIsRUFBS0ksV0FBYSxFQUVsQixJQUFJMUIsRUFBT3NCLEVBQUt0QixLQUNoQixHQUFJdk0sS0FBS21OLGFBQWE5SixJQUFJa0osR0FDMUIsQ0FDSSxJQUFJNEMsRUFBT25QLEtBQUttTixhQUFhaEssSUFBSW9KLEdBQzdCNkMsRUFBY0QsRUFBS0UsVUFBWUYsRUFBS0csWUFBY3pCLEVBQUtDLFFBRXZEc0IsRUFBYyxNQUVkcFAsS0FBS3NNLFlBQVl1QixFQUFLdEIsS0FBTTZDLEUsRUFJNUMsQ0FFT0cscUJBRUgsSUFBSyxNQUFNMUIsS0FBUTdOLEtBQUtxTixlQUFlNEIsU0FHbkNwQixFQUFLa0Isa0JBQW9CbEIsRUFBS0ksVUFFdEMsQ0FFT3VCLHFCQUVILElBQUlDLEVBQVcsRUFBR0MsRUFBVyxFQUM3QixJQUFLLE1BQU03QixLQUFRN04sS0FBS3FOLGVBQWU0QixTQUcvQnBCLEVBQUtJLFdBQWEsRUFFbEJ3QixHQUFZNUIsRUFBS0ksV0FJakJ5QixJQUFjN0IsRUFBS0ksV0FJM0IsSUFBSTBCLEVBQU1GLEVBQ056UCxLQUFLdU4sWUFBWWYsT0FBU2tELEVBQVdELEVBQVd6UCxLQUFLdU4sWUFBWUMsV0FFakVtQyxFQUFNM1AsS0FBS3VOLFlBQVlDLFNBQVd4TixLQUFLdU4sWUFBWWYsT0FBU2tELEdBR2hFLElBQUlFLEVBQWEsRUFBS0QsRUFBTUYsRUFDNUIsSUFBSyxNQUFNNUIsS0FBUTdOLEtBQUtxTixlQUFlNEIsU0FHL0JwQixFQUFLSSxXQUFhLElBRWxCSixFQUFLQyxTQUFXRCxFQUFLSSxXQUFhMkIsRUFDbEMvQixFQUFLSSxZQUFjSixFQUFLSSxXQUFhMkIsRUFHakQsQ0FFT0MsNkJBR1AsRUNwVUosSUFBSUMsRUFBeUMsQ0FDekNDLEdBQUksQ0FDQUMsT0FBUSxlQUVaQyxHQUFJLENBQ0F4QixLQUFNLElBQ055QixJQUFLLElBQ0xDLElBQUssSUFFTEMsS0FBTSxLQUNOQyxPQUFRLEtBQ1JDLE9BQVEsTUFDUkMsT0FBUSxJQUVSUCxPQUFRLEtBQ1JRLE1BQU8sS0FDUEMsUUFBUyxLQUNUQyxTQUFVLEtBRVZDLFlBQWEsTUFDYkMsTUFBTyxLQUNQQyxhQUFjLE1BQ2RDLGNBQWUsUUFDZkMsU0FBVSxNQUNWQyxPQUFRLEtBQ1JDLE9BQVEsT0FDUkMsU0FBVSxPQUNWQyxTQUFVLE1BQ1ZDLFNBQVUsS0FDVkMsU0FBVSxLQUNWQyxNQUFPLEtBRVBDLGFBQWMsU0FDZEMsY0FBZSxXQUl2QixTQUFTQyxFQUFXbFMsR0FFaEIsT0FBT3VRLEVBQW9DLEdBQUV2USxJQUFRQSxDQUN6RCxDQzVCTyxNQUFNbVMsRUFFVEMsZUFBaUJDLFNBQVNDLGNBQWMsNEJBQ3hDQyxlQUFpQkYsU0FBU0MsY0FBYyw0QkFDeENFLGVBQWlELElBQUloUCxJQUNyRGlQLGlCQUF3Q0osU0FBU0MsY0FBYyxjQUFjQSxjQUFjLFlBRTNGSSxZQUFjTCxTQUFTQyxjQUFjLGVBQ3JDSyxnQkFBa0QsSUFBSW5QLElBRXREb1AsZ0JBQWtCUCxTQUFTQyxjQUFjLGNBQ3pDTyxtQkFBcUQsSUFBSXJQLElBQ3pEc1AscUJBQTRDclMsS0FBS21TLGdCQUFnQk4sY0FBYyxZQUUvRVMsV0FBYVYsU0FBU0MsY0FBYyxZQUVwQy9GLEtBRUFwSyxZQUFZb0ssR0FFUjlMLEtBQUs4TCxLQUFPQSxDQUNoQixDQUVPNkIsT0FFSDNOLEtBQUs4TCxLQUFLSSxVQUFVdUIsZ0JBQWdCaE4sS0FBSzlCLElBRXJDLElBQUtxQixLQUFLK1IsZUFBZTFPLElBQUkxRSxFQUFFNE4sTUFDL0IsQ0FDSSxJQUFJZ0csRUFBUXZTLEtBQUtnUyxpQkFBaUJRLFFBQVFDLFdBQVUsR0FBc0JaLGNBQWMsT0FDeEZVLEVBQUtHLFVBQVVqUyxJQUFJLGFBR0QsSUFETlQsS0FBSzhMLEtBQUtJLFVBQVVpQixhQUFhaEssSUFBSXhFLEVBQUU0TixNQUN6QzRCLElBRU5uTyxLQUFLOFIsZUFBZWEsWUFBWUosR0FJaEN2UyxLQUFLMlIsZUFBZWdCLFlBQVlKLEdBS3BDLElBQUlLLEVBQWdCLENBQ2hCQyxVQUFXTixFQUNYNVEsS0FBTTRRLEVBQUtWLGNBQWMsU0FDekJpQixNQUFPUCxFQUFLVixjQUFjLFVBQzFCa0IsTUFBT1IsRUFBS1YsY0FBYyxXQUc5QjdSLEtBQUsrUixlQUFlOU8sSUFBSXRFLEVBQUU0TixLQUFNcUcsR0FDaENBLEVBQWNqUixLQUFLcVIsVUFBWSxHQUFHLEVBQUUsSUFBTXJVLEVBQUU0TixPLEtBSXBEdk0sS0FBSzhMLEtBQUttSCxXQUFXakcsV0FBV3pKLGNBQWM5QyxLQUFLeUIsSUFFL0MsSUFBS2xDLEtBQUtrUyxnQkFBZ0I3TyxJQUFJbkIsRUFBRXlJLElBQ2hDLENBQ0ksSUFBSTRILEVBQU9YLFNBQVNzQixjQUFjLFVBQ2xDWCxFQUFLRyxVQUFValMsSUFBSSxZQUNuQlQsS0FBS2lTLFlBQVlVLFlBQVlKLEdBRTdCQSxFQUFLWSxRQUFXQyxJQUFZeEgsRUFBZTFKLEVBQUdsQyxLQUFLOEwsS0FBSyxFQUN4RHlHLEVBQUtTLFVBQVksR0FBRyxFQUFtQixNQUFqQjlRLEVBQUVtUixZQUFzQm5SLEVBQUV5SSxHQUFLekksRUFBRW1SLGVBSXZEclQsS0FBS2tTLGdCQUFnQmpQLElBQUlmLEVBQUV5SSxHQUFJNEgsR0FDL0J2UyxLQUFLOEwsS0FBS0osTUFBTTRILGFBQWFwUixFQUFHLGNBQWUsQ0FBRXFRLEtBQU1BLEVBQU1nQixZQUFhaEIsRUFBS2lCLE1BQU1DLFMsS0FJN0Z6VCxLQUFLOEwsS0FBS21ILFdBQVdTLGFBQWFuUSxjQUFjOUMsS0FBS3lCLElBRWpELElBQUtsQyxLQUFLb1MsbUJBQW1CL08sSUFBSW5CLEVBQUV5SSxJQUNuQyxDQUVJLElBQUk0SCxFQUFRdlMsS0FBS3FTLHFCQUFxQkcsUUFBUUMsV0FBVSxHQUFzQlosY0FBYyxPQUM1RjdSLEtBQUttUyxnQkFBZ0JRLFlBQVlKLEdBQ2pDQSxFQUFLNUgsR0FBSyxRQUFVekksRUFBRXdSLGFBQWFuSCxLQUVuQyxJQUFJb0gsRUFBMkIsQ0FDM0JkLFVBQVdOLEVBQ1hxQixhQUFjckIsRUFBS1YsY0FBYyxjQUNqQ2xRLEtBQU00USxFQUFLVixjQUFjLFNBQ3pCZ0MsTUFBT3RCLEVBQUtWLGNBQWMsV0FJOUI4QixFQUFNQyxhQUFhVCxRQUFXQyxJQUUxQnhILEVBQWUxSixFQUFHbEMsS0FBSzhMLE1BQ3ZCOUwsS0FBSzhULG9CQUFvQjVSLEVBQUV3UixhQUFhbkgsS0FBSyxFQUVqRG9ILEVBQU1DLGFBQWFHLGVBQWtCWCxJQUVqQ3BULEtBQUs4VCxvQkFBb0I1UixFQUFFd1IsYUFBYW5ILEtBQUssRUFFakRvSCxFQUFNQyxhQUFhSSxlQUFrQlosSUFFakNwVCxLQUFLaVUsYUFBYSxFQUd0Qk4sRUFBTWhTLEtBQUtxUixVQUFZLEVBQUUsSUFBTTlRLEVBQUV3UixhQUFhbkgsTUFDOUNvSCxFQUFNRSxNQUFNYixVQUFZLElBSXhCaFQsS0FBS2tTLGdCQUFnQmpQLElBQUlmLEVBQUV5SSxHQUFJZ0osRUFBTUMsY0FDckM1VCxLQUFLOEwsS0FBS0osTUFBTTRILGFBQWFwUixFQUFHLGNBQWUsQ0FBRXFRLEtBQU1vQixFQUFNZCxVQUFXVSxZQUFhSSxFQUFNZCxVQUFVVyxNQUFNQyxVQUMzR3ZSLEVBQUV3UixhQUFhUSxHQUFLUCxDLEtBTzVCM1QsS0FBSzhMLEtBQUttSCxXQUFXa0IsV0FBVzVRLGNBQWM5QyxLQUFLeUIsSUFFUCxRQUFwQ0EsRUFBRWtTLFlBQVk3QixLQUFLaUIsTUFBTUMsVUFFekJ2UixFQUFFa1MsWUFBWWIsWUFBY3JSLEVBQUVrUyxZQUFZN0IsS0FBS2lCLE1BQU1DLFFBQ3JEdlIsRUFBRWtTLFlBQVk3QixLQUFLaUIsTUFBTUMsUUFBVSxPLElBSTNDelQsS0FBSzhMLEtBQUttSCxXQUFXb0IsWUFBWTlRLGNBQWM5QyxLQUFLeUIsSUFFaERBLEVBQUVrUyxZQUFZN0IsS0FBS2lCLE1BQU1DLFFBQVV2UixFQUFFa1MsWUFBWWIsV0FBVyxJQUloRXZULEtBQUs4TCxLQUFLSixNQUFNbkksY0FBYzlDLEtBQUt5QixJQUUvQjZKLFFBQVFDLElBQUksU0FBUzlKLEVBQUV5SSxLQUFNekksRUFBRSxHQUd2QyxDQUtPb1MsWUFBWUMsR0FFZnZVLEtBQUtzUyxXQUFXVSxVQUFZdUIsQ0FDaEMsQ0FFT04sY0FFSGpVLEtBQUtzUyxXQUFXVSxVQUFZLEVBQ2hDLENBRU9jLG9CQUFvQnZILEdBRXZCLElBQUlnSSxFQUFNLEdBQ0N2VSxLQUFLOEwsS0FBS1ksVUFBVUksZ0JBQWdCUCxHQUMxQ25CLFNBQVNvSixJQUVWRCxHQUFPLEdBQUcsRUFBRSxJQUFNQyxFQUFFakksVUFBVWlJLEVBQUVoSSxPQUFPaUksUUFBUSxTQUFTLElBRzVEelUsS0FBS3NVLFlBQVlDLEVBQ3JCLENBRU9HLFNBRUgxVSxLQUFLMlUsbUJBQ0wzVSxLQUFLNFUscUJBQ1QsQ0FFT0QsbUJBRUgsSUFBSyxNQUFNOUcsS0FBUTdOLEtBQUs4TCxLQUFLSSxVQUFVa0IsWUFBWTZCLFNBQ25ELENBQ0ksSUFBSXNELEVBQU92UyxLQUFLK1IsZUFBZTVPLElBQUkwSyxFQUFLdEIsTUFFcENzQixFQUFLRSxJQUFNLEVBRVh3RSxFQUFLTyxNQUFNRSxVQUFZLEdBQUduRixFQUFLQyxRQUFRMkcsUUFBUSxRQUFRNUcsRUFBS0UsSUFBSTBHLFFBQVEsS0FJeEVsQyxFQUFLTyxNQUFNRSxVQUFZLEdBQUduRixFQUFLQyxRQUFRMkcsUUFBUSxLQUduRCxJQUFJSSxFQUFVaEgsRUFBS2tCLGtCQUduQixRQUZ1QixJQUFaOEYsSUFBMkJBLEVBQVVoSCxFQUFLSSxZQUVqRDZHLEtBQUtDLElBQUlGLEdBQVcsS0FDeEIsQ0FDSSxJQUFJeFQsRUFBSXdULEVBQ1J0QyxFQUFLUSxNQUFNQyxVQUFZLElBQUkzUixFQUFJLEVBQUksR0FBSyxLQUFPQSxFQUFFb1QsUUFBUSxRQUFRLEVBQUUsUyxNQUluRWxDLEVBQUtRLE1BQU1DLFVBQVksSUFJTixJQUFqQm5GLEVBQUtLLFFBRUxxRSxFQUFLTSxVQUFVVyxNQUFNQyxRQUFVLE9BSS9CbEIsRUFBS00sVUFBVVcsTUFBTUMsUUFBVSxNLENBRzNDLENBRU9tQixzQkFFSCxJQUFLLE1BQU14UixLQUFVcEQsS0FBSzhMLEtBQUttSCxXQUFXUyxhQUVsQzFULEtBQUs4TCxLQUFLWSxVQUFVc0ksbUJBQW1CNVIsRUFBT3NRLGFBQWFuSCxPQUUzRHZNLEtBQUs4TCxLQUFLSixNQUFNdUosZ0JBQWdCN1IsRUFBUSxVQUc1Q0EsRUFBT3NRLGFBQWFRLEdBQUdMLE1BQU1iLFVBQVksR0FBR2hULEtBQUs4TCxLQUFLWSxVQUFVdUcsV0FBVzdQLEVBQU9zUSxhQUFhbkgsTUFBTTJJLE9BU2pHbFYsS0FBSzhMLEtBQUtJLFVBQVVDLG9CQUNoQm5NLEtBQUs4TCxLQUFLWSxVQUFVSSxnQkFBZ0IxSixFQUFPc1EsYUFBYW5ILE9BRzVEbkosRUFBT3NRLGFBQWFRLEdBQUdOLGFBQWF1QixVQUFXLEVBSS9DL1IsRUFBT3NRLGFBQWFRLEdBQUdOLGFBQWF1QixVQUFXLENBSzNELEVDclBHLE1BQU1DLEVBQW1CLENBQzVCQyxXQUFZLENBQUMsRUFDYkMsS0FBTSxDQUFDLEVBQ1BDLFlBQWEsQ0FBQyxFQUNkQyxhQUFjLENBQUMsRUFDZkMsUUFBUyxDQUFDLEVBQ1ZDLE1BQU8sQ0FBQyxFQUNSQyxNQUFPLENBQUMsRUFDUkMsUUFBUyxDQUFDLEVBQ1ZDLFFBQVMsQ0FBQyxFQUNWQyxLQUFNLENBQUMsR0FJSixNQUFNQyxFQUVGakssS0FDQW1ILFdBQXdHLENBQUMsRUFDekc5RCxLQUF3QyxJQUFJcE0sSUFFbkRyQixZQUFZb0ssR0FFUjlMLEtBQUs4TCxLQUFPQSxDQUNoQixDQUVPNkIsT0FJRnRPLE9BQU84SyxLQUFLaUwsR0FBMENoSyxTQUNsRHpMLElBRUdLLEtBQUtpVCxXQUFXdFQsR0FBU0ssS0FBSzhMLEtBQUtKLE1BQU1zSyxLQUFLLGFBQWNyVyxHQVM1REssS0FBSzhMLEtBQUtKLE1BQU1qTCxJQUFJLENBQ2hCa0ssR0FBSSxhQUFlaEwsRUFDbkIrVCxhQUFjLENBQUVuSCxLQUFNNU0sR0FDdEJzVyxRQUFRLEVBRVI3SixnQkFBaUJwTSxLQUFLOE0sZ0JBQWdCbk4sR0FDdENrTixrQkFBbUIsQ0FBRU4sS0FBTTVNLElBQzdCLEdBR2QsQ0FFT2dOLFlBQVlyTCxHQUVmLElBQUk4QixFQUFjLENBQUMsRUFLbkIsT0FKQS9ELE9BQU82TCxPQUFPOUgsRUFBUTlCLEdBRXRCOEIsRUFBTzhTLFlBQWEsRUFFYmxXLEtBQUs4TCxLQUFLSixNQUFNakwsSUFBSTJDLEVBQy9CLENBRU93SixxQkFBcUJMLEdBRXhCLE9BQU92TSxLQUFLbVAsS0FBS2hNLElBQUlvSixHQUFNakwsU0FDL0IsQ0FFT3dMLGdCQUFnQlAsR0FFbkIsSUFBSTRKLEVBQWFuVyxLQUFLaVQsV0FBVzFHLEdBQU0ySSxLQUV2QyxPQURlbFYsS0FBS21QLEtBQUtoTSxJQUFJb0osR0FBTTZKLFVBQ25CQyxLQUFLQyxJQUVWLENBQUUvSixLQUFNK0osRUFBRy9KLEtBQU1DLE9BQVE4SixFQUFHQyxLQUFPekIsS0FBSzBCLElBQUlGLEVBQUdHLE9BQVFOLE1BRXRFLENBRU9uQixtQkFBbUJ6SSxHQUV0QixJQUFJbUssRUFBWTFXLEtBQUttUCxLQUFLaE0sSUFBSW9KLEdBQU1vSyxvQkFDaENqUixHQUFTLEVBRWIsT0FBaUIsR0FBYmdSLEVBU09BLEdBUFBBLEVBQVV0TCxTQUFRb0osSUFFVjlPLEVBQVNBLEdBQVUxRixLQUFLOEwsS0FBS0ksVUFBVXFDLFlBQVlpRyxFQUFFakksTUFBTTJCLE9BQU8sSUFRdkV4SSxFQUNYLENBS09rUixtQkFFSCxJQUFLLE1BQU14VCxLQUFVcEQsS0FBSzhMLEtBQUttSCxXQUFXNEQsa0JBQzFDLENBRUksSUFBSUMsRUFBZ0IsRUFHcEIsSUFBSyxNQUFNekssS0FBUWpKLEVBQU8yVCxzQkFBc0JDLFNBRTVDRixFQUFnQmhDLEtBQUszRSxJQUFJMkcsRUFBZTlXLEtBQUs4TCxLQUFLSSxVQUFVc0Msa0JBQWtCbkMsRUFBS0UsTUFBU0YsRUFBVyxRQUkzRyxJQUFLLE1BQU1BLEtBQVFqSixFQUFPMlQsc0JBQXNCRSxTQUNoRCxDQUNJLElBQUlDLEVBQU1sWCxLQUFLOEwsS0FBS0ksVUFBVXFDLFlBQVlsQyxFQUFLRSxNQUMvQ3VLLEVBQWdCaEMsS0FBSzNFLElBQUkyRyxHQUFnQkksRUFBSW5KLElBQU1tSixFQUFJcEosU0FBWXpCLEVBQVcsTyxDQUdsRixLQUFJeUssR0FBaUIsTUFBckIsQ0FHQSxJQUFLLE1BQU16SyxLQUFRakosRUFBTzJULHNCQUFzQkMsU0FFNUNoWCxLQUFLOEwsS0FBS0ksVUFBVUksWUFBWUQsRUFBS0UsTUFBT0YsRUFBS0csT0FBU3NLLEdBSTlELElBQUssTUFBTXpLLEtBQVFqSixFQUFPMlQsc0JBQXNCRSxTQUU1Q2pYLEtBQUs4TCxLQUFLSSxVQUFVSSxZQUFZRCxFQUFLRSxLQUFNRixFQUFLRyxPQUFTc0ssRSxFQUdyRSxFQ25KSixTQUFTSyxFQUFTQyxHQUVkLE9BQU8sSUFBSUMsU0FBZ0IsQ0FBQ0gsRUFBS0ksS0FFN0IsSUFBSUMsRUFBTSxJQUFJQyxlQUNkRCxFQUFJRSxtQkFBcUIsV0FDQyxHQUFsQkYsRUFBSUcsWUFBaUMsS0FBZEgsRUFBSUksUUFDM0JULEVBQUlLLEVBQUlLLGFBRWhCLEVBQ0FMLEVBQUlNLEtBQUssTUFBT1QsR0FDaEJHLEVBQUlPLE1BQU0sR0FFbEIsQ0FrQkEsTUFBTUMsRUFBcUMsQ0FDdkMvSixpQkFBa0IsRUFDbEJxQixVQUFXLEVBQ1hDLFlBQWEsRUFDYjBJLE1BQU8sVUFDUDNKLGtCQUFtQixFQUNuQjRKLHNCQUF1QixFQUN2QjlKLEtBQUssR0EwQkgrSixFQUFxQyxDQUN2QzlCLFVBQVcsR0FDWCtCLFVBQVcsSUFDWHhCLG9CQUFxQixHQUNyQnJWLFVBQVcsQ0FBQ3FKLEdBQUksWUMvRGIsTUFBTXlOLEVBRUYxTSxNQUF1QixJQUFJakIsRUFDM0J3SSxXQUFhLENBQ2hCa0IsV0FBWW5VLEtBQUswTCxNQUFNc0ssS0FBSyxTQUFVLGVBQ3RDM0IsWUFBYXJVLEtBQUswTCxNQUFNc0ssS0FBSyxlQUFlL08sUUFBUSxVQUdwRCtGLFdBQVloTixLQUFLMEwsTUFBTXNLLEtBQUssS0FBTSxjQUVsQ2Esa0JBQW1CN1csS0FBSzBMLE1BQU1zSyxLQUFLLGFBQWMseUJBQ2pEdEMsYUFBYzFULEtBQUswTCxNQUFNc0ssS0FBSyxnQkFDOUJxQyxtQkFBb0JyWSxLQUFLMEwsTUFBTXNLLEtBQUssZ0JBQWdCQSxLQUFLLFdBRzdEOUIsR0FBUyxJQUFJeEMsRUFBRzFSLE1BQ2hCa00sVUFBNEIsSUFBSWdCLEVBQWVsTixNQUMvQzBNLFVBQTRCLElBQUlxSixFQUFlL1YsTUFFeEMyTixPQUVILE9BQU8sSUFBSTBKLFNBQWMsQ0FBQ2lCLEVBQVNDLEtEb0RwQyxJQUFxQnpNLEtDbERKOUwsS0RvRGIsSUFBSXFYLFNBQWMsQ0FBQ2lCLEVBQVNDLEtBRS9CbEIsUUFBUW1CLElBQUksQ0FDUnJCLEVBQVMsdUJBQ1RBLEVBQVMseUJBQ1ZzQixNQUFNQyxJQUtMLENBQ0ksSUFBSUMsRUFBZUQsRUFBVyxHQUUxQmhaLEVBQXlCeUgsS0FBS3lSLE1BQU1ELEdBQ3BDalosRUFBSXVNLGVBQWUsbUJBRVh2TSxFQUFxQixRQUdqQyxJQUFLLE1BQU02TSxLQUFRN00sRUFDbkIsQ0FDSSxJQUFJMk0sRUFBTzNNLEVBQUk2TSxHQUNYc00sRUFBd0IsQ0FBRXRNLEtBQU1BLEdBRXBDbE4sT0FBTzZMLE9BQU8yTixFQUFTQyxnQkFBZ0JmLElBQ3ZDMVksT0FBTzZMLE9BQU8yTixFQUFTQyxnQkFBZ0J6TSxJQUV2Q1AsRUFBS0ksVUFBVWlCLGFBQWFsSyxJQUFJc0osRUFBc0JzTSxHQUN0RDlNLFFBQVFDLElBQUkseUJBQXlCTyxLQUFTc00sRSxFQU90RCxDQUNJLElBQUlFLEVBQWVMLEVBQVcsR0FDMUJoWixFQUF5QnlILEtBQUt5UixNQUFNRyxHQUNwQ3JaLEVBQUl1TSxlQUFlLG1CQUVYdk0sRUFBcUIsUUFHakMsSUFBSyxNQUFNNk0sS0FBUTdNLEVBQ25CLENBQ0ksSUFBSTJNLEVBQU8zTSxFQUFJNk0sR0FDWHNNLEVBQXdCLENBQUMsRUFFN0J4WixPQUFPNkwsT0FBTzJOLEVBQVNDLGdCQUFnQlosSUFDdkM3WSxPQUFPNkwsT0FBTzJOLEVBQVNDLGdCQUFnQnpNLElBR3ZDd00sRUFBUXpDLFVBQVVoTCxTQUFTb0osU0FFQyxJQUFiQSxFQUFFaUMsU0FBMEJqQyxFQUFFaUMsT0FBU29DLEVBQVFWLFUsSUFJekRVLEVBQVF2WCxVQUFVMkssZUFBZU0sS0FFakNzTSxFQUFRdlgsVUFBa0JpTCxHQUFRLENBQUMsR0FFbkNzTSxFQUFRdlgsVUFBVTJLLGVBQWUsT0FBa0MsWUFBekI0TSxFQUFRdlgsVUFBVXFKLEtBRTdEa08sRUFBUXZYLFVBQVVxSixHQUFLLElBQU00QixHQUdqQ1QsRUFBS1ksVUFBVXlDLEtBQUtsTSxJQUFJc0osRUFBc0JzTSxHQUM5QzlNLFFBQVFDLElBQUkseUJBQXlCTyxLQUFTc00sRSxFQUl0RFAsR0FBUyxHQUNYLEtDN0hvQkcsTUFBSyxLQUVuQnpZLEtBQUtrVSxHQUFHdkcsT0FDUjNOLEtBQUtrTSxVQUFVeUIsT0FDZjNOLEtBQUswTSxVQUFVaUIsT0FJZjNOLEtBQUtrTSxVQUFVSSxZQUFZLE1BQU8sS0FBSyxHQUN2Q3RNLEtBQUtrTSxVQUFVSSxZQUFZLFFBQVMsR0FBRyxHQUN2Q3RNLEtBQUtrTSxVQUFVSSxZQUFZLFFBQVMsS0FBSyxHQUN6Q3RNLEtBQUtrTSxVQUFVSSxZQUFZLFFBQVMsS0FBSyxHQUV6Q3RNLEtBQUtrTSxVQUFVOEMsbUJBRWZ2RCxFQUFpQnpMLEtBQUswTCxNQUFPc0IsR0FDN0J2QixFQUFpQnpMLEtBQUswTCxNQUFPc0IsR0FDN0JzTCxHQUFTLEdBQ1gsR0FFVixDQUVPdkwsV0FFSC9NLEtBQUtrVSxHQUFHUSxRQUNaLENBRU9zRSxPQUdIaFosS0FBS2tNLFVBQVVnRCxtQkFFZmxQLEtBQUswTSxVQUFVa0ssbUJBRWY1VyxLQUFLa00sVUFBVTJELDZCQUVmN1AsS0FBS2tNLFVBQVVxRCxxQkFDZnZQLEtBQUtrTSxVQUFVc0QscUJBRWZ4UCxLQUFLK00sVUFDVCxFQ0pKLElBQUlrTSxFQUFhLElBckVWLE1BRUg1WCxFQUFZLEVBQ1phLEVBRVFnWCxlQUF5QixFQUN6QkMsVUFBb0IsRUFDcEJDLFdBQXFCLElBQ3JCQyxlQUF5QixJQUV6QnZOLEtBRVJwSyxjQUVJMUIsS0FBSzhMLEtBQU8sSUFBSXNNLENBQ3BCLENBRU9rQixjQUdILElBQUlDLEVBQTBCM0gsU0FBU0MsY0FBYyxlQUNyRCxJQUFJMkgsRUFBUzVILFNBQVM2SCxlQUFlLGFBRXJDN0gsU0FBUzZILGVBQWUsVUFBVXRHLFFBQVd1RyxJQUV6QzlILFNBQVNDLGNBQWdDLGVBQWVsUyxNQUFRLElBQ2hFaVMsU0FBU0MsY0FBZ0MsZUFBZThILFFBQVEsS0FBSyxFQUV6RS9ILFNBQVM2SCxlQUFlLFdBQVd0RyxRQUFXdUcsSUFFMUM5SCxTQUFTQyxjQUFnQyxlQUFlbFMsTUFBUSxLQUNoRWlTLFNBQVNDLGNBQWdDLGVBQWU4SCxRQUFRLEtBQUssRUFFekVILEVBQU94RyxVQUFZdUcsRUFBT0ssY0FBY25GLFFBQVEsR0FBSyxJQUNyRDhFLEVBQU9JLFFBQVUsV0FFYkgsRUFBT3hHLFVBQVl1RyxFQUFPSyxjQUFjbkYsUUFBUSxHQUFLLElBQ3JEd0UsRUFBS0csV0FBYUgsRUFBS0ksZUFBaUJFLEVBQU9LLGFBQ25ELEVBQ0FoSSxTQUFTQyxjQUFnQyxlQUFlOEgsUUFBUSxLQUNwRSxDQUVPaE0sT0FFSDNOLEtBQUtzWixjQUVMdFosS0FBSzhMLEtBQUs2QixPQUFPOEssTUFBSyxLQUdsQnpZLEtBQUttWixVQUFZVSxLQUFLQyxNQUN0QkMsT0FBT0MsdUJBQXNCLElBQU1oYSxLQUFLMFUsVUFBUyxHQUV6RCxDQUVPQSxTQUVILE1BQU11RixFQUFnQkosS0FBS0MsTUFBUTlaLEtBQUttWixVQUNwQ2MsR0FBaUJqYSxLQUFLb1osYUFHdEJwWixLQUFLbVosVUFBWVUsS0FBS0MsT0FBU0csRUFBZ0JqYSxLQUFLb1osWUFFcERwWixLQUFLOEwsS0FBS2tOLFFBR2RlLE9BQU9DLHVCQUFzQixJQUFNaGEsS0FBSzBVLFVBQzVDLEdBSUp1RSxFQUFLdEwsTSIsInNvdXJjZXMiOlsid2VicGFjazovL3RpdGFuaWFucy8uL25vZGVfbW9kdWxlcy9AaG1hbnMvZXZlbnQvZGlzdC9obWFucy1ldmVudC5lc20uanMiLCJ3ZWJwYWNrOi8vdGl0YW5pYW5zLy4vbm9kZV9tb2R1bGVzL0BtaW5pcGxleC9idWNrZXQvZGlzdC9taW5pcGxleC1idWNrZXQuZXNtLmpzIiwid2VicGFjazovL3RpdGFuaWFucy8uL25vZGVfbW9kdWxlcy9AbWluaXBsZXgvY29yZS9kaXN0L21pbmlwbGV4LWNvcmUuZXNtLmpzIiwid2VicGFjazovL3RpdGFuaWFucy8uL3NyYy9hY3Rpdml0eS50cyIsIndlYnBhY2s6Ly90aXRhbmlhbnMvLi9zcmMvcmVzb3VyY2UudHMiLCJ3ZWJwYWNrOi8vdGl0YW5pYW5zLy4vc3JjL2kxOG4vaTE4bi50cyIsIndlYnBhY2s6Ly90aXRhbmlhbnMvLi9zcmMvVUkudHMiLCJ3ZWJwYWNrOi8vdGl0YW5pYW5zLy4vc3JjL2J1aWxkaW5nLnRzIiwid2VicGFjazovL3RpdGFuaWFucy8uL3NyYy9nYW1lZGF0YS50cyIsIndlYnBhY2s6Ly90aXRhbmlhbnMvLi9zcmMvdG93bi50cyIsIndlYnBhY2s6Ly90aXRhbmlhbnMvLi9zcmMvZ2FtZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07XG5cbiAgcmV0dXJuIGFycjI7XG59XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHtcbiAgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1tcIkBAaXRlcmF0b3JcIl07XG5cbiAgaWYgKCFpdCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGlmIChpdCkgbyA9IGl0O1xuICAgICAgdmFyIGkgPSAwO1xuXG4gICAgICB2YXIgRiA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzOiBGLFxuICAgICAgICBuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7XG4gICAgICAgICAgICBkb25lOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogb1tpKytdXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9LFxuICAgICAgICBmOiBGXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbiAgfVxuXG4gIHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSxcbiAgICAgIGRpZEVyciA9IGZhbHNlLFxuICAgICAgZXJyO1xuICByZXR1cm4ge1xuICAgIHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGl0ID0gaXQuY2FsbChvKTtcbiAgICB9LFxuICAgIG46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzdGVwID0gaXQubmV4dCgpO1xuICAgICAgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTtcbiAgICAgIHJldHVybiBzdGVwO1xuICAgIH0sXG4gICAgZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGRpZEVyciA9IHRydWU7XG4gICAgICBlcnIgPSBlO1xuICAgIH0sXG4gICAgZjogZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0LnJldHVybiAhPSBudWxsKSBpdC5yZXR1cm4oKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChkaWRFcnIpIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwge1xuICAgIHdyaXRhYmxlOiBmYWxzZVxuICB9KTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxudmFyIEV2ZW50ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRXZlbnQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxpc3RlbmVyc1wiLCBuZXcgU2V0KCkpO1xuXG4gICAgdGhpcy5lbWl0ID0gdGhpcy5lbWl0LmJpbmQodGhpcyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRXZlbnQsIFt7XG4gICAga2V5OiBcImNsZWFyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgdGhpcy5saXN0ZW5lcnMuY2xlYXIoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZChsaXN0ZW5lcikge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdGhpcy5saXN0ZW5lcnMuYWRkKGxpc3RlbmVyKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5yZW1vdmUobGlzdGVuZXIpO1xuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVtb3ZlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZShsaXN0ZW5lcikge1xuICAgICAgdGhpcy5saXN0ZW5lcnNbXCJkZWxldGVcIl0obGlzdGVuZXIpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJlbWl0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGVtaXQocGF5bG9hZCkge1xuICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMubGlzdGVuZXJzKSxcbiAgICAgICAgICBfc3RlcDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgbGlzdGVuZXIgPSBfc3RlcC52YWx1ZTtcbiAgICAgICAgICBsaXN0ZW5lcihwYXlsb2FkKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9pdGVyYXRvci5lKGVycik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBfaXRlcmF0b3IuZigpO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBFdmVudDtcbn0oKTtcblxuZXhwb3J0IHsgRXZlbnQgfTtcbiIsImltcG9ydCB7IEV2ZW50IH0gZnJvbSAnQGhtYW5zL2V2ZW50JztcblxuZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHtcbiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7XG4gIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTtcbiAgcmV0dXJuIGFycjI7XG59XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHtcbiAgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1tcIkBAaXRlcmF0b3JcIl07XG4gIGlmICghaXQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSB7XG4gICAgICBpZiAoaXQpIG8gPSBpdDtcbiAgICAgIHZhciBpID0gMDtcbiAgICAgIHZhciBGID0gZnVuY3Rpb24gKCkge307XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzOiBGLFxuICAgICAgICBuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7XG4gICAgICAgICAgICBkb25lOiB0cnVlXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogb1tpKytdXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9LFxuICAgICAgICBmOiBGXG4gICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG4gIH1cbiAgdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLFxuICAgIGRpZEVyciA9IGZhbHNlLFxuICAgIGVycjtcbiAgcmV0dXJuIHtcbiAgICBzOiBmdW5jdGlvbiAoKSB7XG4gICAgICBpdCA9IGl0LmNhbGwobyk7XG4gICAgfSxcbiAgICBuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgc3RlcCA9IGl0Lm5leHQoKTtcbiAgICAgIG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7XG4gICAgICByZXR1cm4gc3RlcDtcbiAgICB9LFxuICAgIGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBkaWRFcnIgPSB0cnVlO1xuICAgICAgZXJyID0gZTtcbiAgICB9LFxuICAgIGY6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XG4gIGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvbnN0cnVjdG9yLCBcInByb3RvdHlwZVwiLCB7XG4gICAgd3JpdGFibGU6IGZhbHNlXG4gIH0pO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleSBpbiBvYmopIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9ialtrZXldID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxudmFyIF9TeW1ib2wkaXRlcmF0b3I7XG5cbi8qKlxuICogQSBjbGFzcyB3cmFwcGluZyBhbiBhcnJheSBvZiBlbnRpdGllcyBvZiBhIHNwZWNpZmljIHR5cGUsIHByb3ZpZGluZ1xuICogcGVyZm9ybWFuY2Utb3B0aW1pemVkIG1ldGhvZHMgZm9yIGFkZGluZyBhbmQgcmVtb3ZpbmcgZW50aXRpZXMsIGFuZCBldmVudHNcbiAqIGZvciB3aGVuIGVudGl0aWVzIGFyZSBhZGRlZCBvciByZW1vdmVkLlxuICovXG5fU3ltYm9sJGl0ZXJhdG9yID0gU3ltYm9sLml0ZXJhdG9yO1xudmFyIEJ1Y2tldCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEJ1Y2tldCgpIHtcbiAgICB2YXIgZW50aXRpZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCdWNrZXQpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRW50aXR5QWRkZWRcIiwgbmV3IEV2ZW50KCkpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRW50aXR5UmVtb3ZlZFwiLCBuZXcgRXZlbnQoKSk7XG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwiZW50aXR5UG9zaXRpb25zXCIsIG5ldyBNYXAoKSk7XG4gICAgdGhpcy5lbnRpdGllcyA9IGVudGl0aWVzO1xuICAgIHRoaXMuYWRkID0gdGhpcy5hZGQuYmluZCh0aGlzKTtcbiAgICB0aGlzLnJlbW92ZSA9IHRoaXMucmVtb3ZlLmJpbmQodGhpcyk7XG5cbiAgICAvKiBSZWdpc3RlciBhbGwgZW50aXR5IHBvc2l0aW9ucyAqL1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW50aXRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuZW50aXR5UG9zaXRpb25zLnNldChlbnRpdGllc1tpXSwgaSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVkIHdoZW4gYW4gZW50aXR5IGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBidWNrZXQuXG4gICAqL1xuICBfY3JlYXRlQ2xhc3MoQnVja2V0LCBbe1xuICAgIGtleTogX1N5bWJvbCRpdGVyYXRvcixcbiAgICB2YWx1ZTogLyogQ3VzdG9tIGl0ZXJhdG9yIHRoYXQgaXRlcmF0ZXMgb3ZlciBhbGwgZW50aXRpZXMgaW4gcmV2ZXJzZSBvcmRlci4gKi9cbiAgICBmdW5jdGlvbiB2YWx1ZSgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICB2YXIgaW5kZXggPSB0aGlzLmVudGl0aWVzLmxlbmd0aDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgICAgdmFyIHZhbHVlID0gX3RoaXMuZW50aXRpZXNbLS1pbmRleF07XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIGRvbmU6IGluZGV4IDwgMFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInNpemVcIixcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVudGl0aWVzLmxlbmd0aDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiaGFzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGhhcyhlbnRpdHkpIHtcbiAgICAgIHJldHVybiB0aGlzLmVudGl0eVBvc2l0aW9ucy5oYXMoZW50aXR5KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiYWRkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZChlbnRpdHkpIHtcbiAgICAgIGlmIChlbnRpdHkgJiYgIXRoaXMuaGFzKGVudGl0eSkpIHtcbiAgICAgICAgdGhpcy5lbnRpdGllcy5wdXNoKGVudGl0eSk7XG4gICAgICAgIHRoaXMuZW50aXR5UG9zaXRpb25zLnNldChlbnRpdHksIHRoaXMuZW50aXRpZXMubGVuZ3RoIC0gMSk7XG5cbiAgICAgICAgLyogRW1pdCBvdXIgb3duIG9uRW50aXR5QWRkZWQgZXZlbnQgKi9cbiAgICAgICAgdGhpcy5vbkVudGl0eUFkZGVkLmVtaXQoZW50aXR5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBlbnRpdHk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcInJlbW92ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoZW50aXR5KSB7XG4gICAgICBpZiAodGhpcy5oYXMoZW50aXR5KSkge1xuICAgICAgICAvKiBFbWl0IG91ciBvd24gb25FbnRpdHlSZW1vdmVkIGV2ZW50LiAqL1xuICAgICAgICB0aGlzLm9uRW50aXR5UmVtb3ZlZC5lbWl0KGVudGl0eSk7XG5cbiAgICAgICAgLyogR2V0IHRoZSBlbnRpdHkncyBjdXJyZW50IHBvc2l0aW9uLiAqL1xuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmVudGl0eVBvc2l0aW9ucy5nZXQoZW50aXR5KTtcbiAgICAgICAgdGhpcy5lbnRpdHlQb3NpdGlvbnNbXCJkZWxldGVcIl0oZW50aXR5KTtcblxuICAgICAgICAvKiBQZXJmb3JtIHNodWZmbGUtcG9wIGlmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgZW50aXR5LiAqL1xuICAgICAgICB2YXIgb3RoZXIgPSB0aGlzLmVudGl0aWVzW3RoaXMuZW50aXRpZXMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChvdGhlciAhPT0gZW50aXR5KSB7XG4gICAgICAgICAgdGhpcy5lbnRpdGllc1tpbmRleF0gPSBvdGhlcjtcbiAgICAgICAgICB0aGlzLmVudGl0eVBvc2l0aW9ucy5zZXQob3RoZXIsIGluZGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIFJlbW92ZSB0aGUgZW50aXR5IGZyb20gdGhlIGVudGl0aWVzIGFycmF5LiAqL1xuICAgICAgICB0aGlzLmVudGl0aWVzLnBvcCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2xlYXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcyksXG4gICAgICAgIF9zdGVwO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHtcbiAgICAgICAgICB2YXIgZW50aXR5ID0gX3N0ZXAudmFsdWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmUoZW50aXR5KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9pdGVyYXRvci5lKGVycik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBfaXRlcmF0b3IuZigpO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuICByZXR1cm4gQnVja2V0O1xufSgpO1xuXG5leHBvcnQgeyBCdWNrZXQgfTtcbiIsImltcG9ydCB7IEJ1Y2tldCB9IGZyb20gJ0BtaW5pcGxleC9idWNrZXQnO1xuZXhwb3J0ICogZnJvbSAnQG1pbmlwbGV4L2J1Y2tldCc7XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7XG4gIGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07XG4gIHJldHVybiBhcnIyO1xufVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdICE9IG51bGwgfHwgaXRlcltcIkBAaXRlcmF0b3JcIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7XG59XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHtcbiAgaWYgKCFvKSByZXR1cm47XG4gIGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7XG4gIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTtcbiAgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTtcbiAgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7XG4gIGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn1cblxuZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn1cblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikge1xuICByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpO1xufVxuXG5mdW5jdGlvbiBfdHlwZW9mKG9iaikge1xuICBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7XG5cbiAgcmV0dXJuIF90eXBlb2YgPSBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcInN5bWJvbFwiID09IHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvYmo7XG4gIH0gOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgfSwgX3R5cGVvZihvYmopO1xufVxuXG5mdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkge1xuICB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvW1wiQEBpdGVyYXRvclwiXTtcbiAgaWYgKCFpdCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIGlmIChpdCkgbyA9IGl0O1xuICAgICAgdmFyIGkgPSAwO1xuICAgICAgdmFyIEYgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHM6IEYsXG4gICAgICAgIG46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvbmU6IHRydWVcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiBvW2krK11cbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH0sXG4gICAgICAgIGY6IEZcbiAgICAgIH07XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbiAgfVxuICB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsXG4gICAgZGlkRXJyID0gZmFsc2UsXG4gICAgZXJyO1xuICByZXR1cm4ge1xuICAgIHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGl0ID0gaXQuY2FsbChvKTtcbiAgICB9LFxuICAgIG46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzdGVwID0gaXQubmV4dCgpO1xuICAgICAgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTtcbiAgICAgIHJldHVybiBzdGVwO1xuICAgIH0sXG4gICAgZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGRpZEVyciA9IHRydWU7XG4gICAgICBlcnIgPSBlO1xuICAgIH0sXG4gICAgZjogZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0LnJldHVybiAhPSBudWxsKSBpdC5yZXR1cm4oKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChkaWRFcnIpIHRocm93IGVycjtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7XG4gIGlmIChzZWxmID09PSB2b2lkIDApIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cbiAgcmV0dXJuIHNlbGY7XG59XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7XG4gIF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZi5iaW5kKCkgOiBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICAgIG8uX19wcm90b19fID0gcDtcbiAgICByZXR1cm4gbztcbiAgfTtcbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gIH1cbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgY29uc3RydWN0b3I6IHtcbiAgICAgIHZhbHVlOiBzdWJDbGFzcyxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN1YkNsYXNzLCBcInByb3RvdHlwZVwiLCB7XG4gICAgd3JpdGFibGU6IGZhbHNlXG4gIH0pO1xuICBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTtcbn1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mLmJpbmQoKSA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7XG4gICAgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTtcbiAgfTtcbiAgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTtcbn1cblxuZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHtcbiAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlO1xuICBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlO1xuICBpZiAodHlwZW9mIFByb3h5ID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiB0cnVlO1xuICB0cnkge1xuICAgIEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7XG4gIGlmIChjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkge1xuICAgIHJldHVybiBjYWxsO1xuICB9IGVsc2UgaWYgKGNhbGwgIT09IHZvaWQgMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJEZXJpdmVkIGNvbnN0cnVjdG9ycyBtYXkgb25seSByZXR1cm4gb2JqZWN0IG9yIHVuZGVmaW5lZFwiKTtcbiAgfVxuICByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTtcbn1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHtcbiAgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7XG4gIHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHtcbiAgICB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksXG4gICAgICByZXN1bHQ7XG4gICAgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHtcbiAgICAgIHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7XG4gICAgICByZXN1bHQgPSBSZWZsZWN0LmNvbnN0cnVjdChTdXBlciwgYXJndW1lbnRzLCBOZXdUYXJnZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgPSBTdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gb2JqO1xufVxuXG52YXIgTWVtb2l6ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBNZW1vaXplcigpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWVtb2l6ZXIpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhY2hlXCIsIG5ldyBNYXAoKSk7XG4gIH1cbiAgX2NyZWF0ZUNsYXNzKE1lbW9pemVyLCBbe1xuICAgIGtleTogXCJnZXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0KGtleSwgcHJlZGljYXRlKSB7XG4gICAgICB2YXIgdmFsdWUgPSB0aGlzLmNhY2hlLmdldChrZXkpO1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5jYWNoZS5zZXQoa2V5LCBwcmVkaWNhdGUpO1xuICAgICAgICB2YWx1ZSA9IHByZWRpY2F0ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIE1lbW9pemVyO1xufSgpO1xuXG5mdW5jdGlvbiBpc0FyY2hldHlwZShlbnRpdHkpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGNvbXBvbmVudHMgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGNvbXBvbmVudHNbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICB9XG4gIHJldHVybiBoYXNDb21wb25lbnRzLmFwcGx5KHZvaWQgMCwgW2VudGl0eV0uY29uY2F0KGNvbXBvbmVudHMpKTtcbn1cbmZ1bmN0aW9uIGhhc0NvbXBvbmVudHMoZW50aXR5KSB7XG4gIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgY29tcG9uZW50cyA9IG5ldyBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgY29tcG9uZW50c1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgfVxuICByZXR1cm4gY29tcG9uZW50cy5ldmVyeShmdW5jdGlvbiAoYykge1xuICAgIHJldHVybiBlbnRpdHlbY10gIT09IHVuZGVmaW5lZDtcbiAgfSk7XG59XG5mdW5jdGlvbiBoYXNBbnlDb21wb25lbnRzKGVudGl0eSkge1xuICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGNvbXBvbmVudHMgPSBuZXcgQXJyYXkoX2xlbjMgPiAxID8gX2xlbjMgLSAxIDogMCksIF9rZXkzID0gMTsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgIGNvbXBvbmVudHNbX2tleTMgLSAxXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gIH1cbiAgcmV0dXJuIGNvbXBvbmVudHMuc29tZShmdW5jdGlvbiAoYykge1xuICAgIHJldHVybiBlbnRpdHlbY10gIT09IHVuZGVmaW5lZDtcbiAgfSk7XG59XG5mdW5jdGlvbiBoYXNOb0NvbXBvbmVudHMoZW50aXR5KSB7XG4gIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgY29tcG9uZW50cyA9IG5ldyBBcnJheShfbGVuNCA+IDEgPyBfbGVuNCAtIDEgOiAwKSwgX2tleTQgPSAxOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7XG4gICAgY29tcG9uZW50c1tfa2V5NCAtIDFdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgfVxuICByZXR1cm4gY29tcG9uZW50cy5ldmVyeShmdW5jdGlvbiAoYykge1xuICAgIHJldHVybiBlbnRpdHlbY10gPT09IHVuZGVmaW5lZDtcbiAgfSk7XG59XG5cbi8qIG5vdCAqL1xuXG52YXIgbm90Q2FjaGUgPSBuZXcgTWVtb2l6ZXIoKTtcbnZhciBub3QgPSBmdW5jdGlvbiBub3QocHJlZGljYXRlKSB7XG4gIHJldHVybiBub3RDYWNoZS5nZXQocHJlZGljYXRlLCBmdW5jdGlvbiAoZW50aXR5KSB7XG4gICAgcmV0dXJuICFwcmVkaWNhdGUoZW50aXR5KTtcbiAgfSk7XG59O1xuXG52YXIgbm9ybWFsaXplQ29tcG9uZW50cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUNvbXBvbmVudHMoY29tcG9uZW50cykge1xuICByZXR1cm4gX3RvQ29uc3VtYWJsZUFycmF5KG5ldyBTZXQoY29tcG9uZW50cy5zb3J0KCkuZmlsdGVyKGZ1bmN0aW9uIChjKSB7XG4gICAgcmV0dXJuICEhYyAmJiBjICE9PSBcIlwiO1xuICB9KSkpO1xufTtcblxuLyogQXJjaGV0eXBlIFF1ZXJpZXMgKi9cblxudmFyIG5vcm1hbGl6ZVF1ZXJ5ID0gZnVuY3Rpb24gbm9ybWFsaXplUXVlcnkocXVlcnkpIHtcbiAgcmV0dXJuIHtcbiAgICBcIndpdGhcIjogcXVlcnlbXCJ3aXRoXCJdICE9PSB1bmRlZmluZWQgPyBub3JtYWxpemVDb21wb25lbnRzKHF1ZXJ5W1wid2l0aFwiXSkgOiBbXSxcbiAgICB3aXRob3V0OiBxdWVyeS53aXRob3V0ICE9PSB1bmRlZmluZWQgPyBub3JtYWxpemVDb21wb25lbnRzKHF1ZXJ5LndpdGhvdXQpIDogW11cbiAgfTtcbn07XG52YXIgcXVlcnlDYWNoZSA9IG5ldyBNZW1vaXplcigpO1xudmFyIG1lbW9pemVRdWVyeSA9IGZ1bmN0aW9uIG1lbW9pemVRdWVyeShxdWVyeSkge1xuICB2YXIgbm9ybWFsaXplZFF1ZXJ5ID0gbm9ybWFsaXplUXVlcnkocXVlcnkpO1xuICB2YXIga2V5ID0gSlNPTi5zdHJpbmdpZnkobm9ybWFsaXplZFF1ZXJ5KTtcbiAgcmV0dXJuIHF1ZXJ5Q2FjaGUuZ2V0KGtleSwgbm9ybWFsaXplZFF1ZXJ5KTtcbn07XG5cbi8qKlxuICogQW4gZW50aXR5LWF3YXJlIGJ1Y2tldCBwcm92aWRpbmcgbWV0aG9kcyBmb3IgY3JlYXRpbmdcbiAqIGRlcml2ZWQgYnVja2V0cywgYW5kIHRyYWNraW5nIHRoZSBidWNrZXRzIGRlcml2ZWQgZnJvbSBpdC5cbiAqL1xudmFyIEVudGl0eUJ1Y2tldCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0J1Y2tldCkge1xuICBfaW5oZXJpdHMoRW50aXR5QnVja2V0LCBfQnVja2V0KTtcbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihFbnRpdHlCdWNrZXQpO1xuICBmdW5jdGlvbiBFbnRpdHlCdWNrZXQoKSB7XG4gICAgdmFyIF90aGlzO1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFbnRpdHlCdWNrZXQpO1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbC5hcHBseShfc3VwZXIsIFt0aGlzXS5jb25jYXQoYXJncykpO1xuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJidWNrZXRzXCIsIG5ldyBTZXQoKSk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIF9jcmVhdGVDbGFzcyhFbnRpdHlCdWNrZXQsIFt7XG4gICAga2V5OiBcIndhbnRzXCIsXG4gICAgdmFsdWU6XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGdpdmVuIGVudGl0eSBzaG91bGQgYmUgaW4gdGhpcyBidWNrZXQuIENoaWxkIGNsYXNzZXNcbiAgICAgKiBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gaW1wbGVtZW50IGN1c3RvbSBidWNrZXQgbG9naWMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZW50aXR5IFRoZSBlbnRpdHkgdG8gY2hlY2sgZm9yLlxuICAgICAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGlzIGJ1Y2tldCB3YW50cyB0aGUgc3BlY2lmaWVkIGVudGl0eSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZnVuY3Rpb24gd2FudHMoZW50aXR5KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmFsdWF0ZXMgdGhlIGdpdmVuIGVudGl0eSAoYGVudGl0eWApIHRvIGNoZWNrIGlmIGl0IHNob3VsZCBiZSBpbiB0aGlzIGJ1Y2tldCBvciBub3QuXG4gICAgICogVGhlIGVudGl0eSB3aWxsIGJlIGFkZGVkIG9yIHJlbW92ZWQgZnJvbSB0aGlzIGJ1Y2tldCBhcyBuZWNlc3NhcnkuXG4gICAgICpcbiAgICAgKiBJZiB5b3UgcGFzcyBhIHNlY29uZCBhcmd1bWVudCAoYGZ1dHVyZWApIGludG8gdGhpcyBmdW5jdGlvbiwgaXQgd2lsbCBiZSB1c2VkXG4gICAgICogZm9yIHRoZXNlIGNoZWNrcyBpbnN0ZWFkIG9mIHRoZSBlbnRpdHkgaXRzZWxmLiBUaGlzIGlzIHVzZWZ1bCBpbiBzdXRhdGlvbnNcbiAgICAgKiB3aGVyZSB5b3UncmUgYWJvdXQgdG8gbWFrZSBhIGRlc3RydWN0aXZlIGNoYW5nZSB0byB0aGUgZW50aXR5LCBhbmQgd2FudCB0b1xuICAgICAqIGdpdmUgYXJjaGV0eXBlIGNhbGxiYWNrcyBhIGNoYW5jZSB0byBydW4gd2l0aCB0aGUgZW50aXR5IGludGFjdCBiZWZvcmUgYWN0dWFsbHlcbiAgICAgKiBtYWtpbmcgdGhlIGNoYW5nZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBlbnRpdHkgVGhlIGVudGl0eSB0aGF0IGlzIGJlaW5nIGV2YWx1YXRlZC5cbiAgICAgKiBAcGFyYW0gZnV0dXJlIEFuIG9wdGlvbmFsIGZ1dHVyZSB2ZXJzaW9uIG9mIHRoZSBlbnRpdHkgdGhhdCBpcyB1c2VkIGluIHRoZSBjaGVjay5cbiAgICAgKi9cbiAgfSwge1xuICAgIGtleTogXCJldmFsdWF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBldmFsdWF0ZShlbnRpdHkpIHtcbiAgICAgIHZhciBmdXR1cmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGVudGl0eTtcbiAgICAgIC8qIEFjY2VwdCBvciByZWplY3QgdGhlIGVudGl0eSAqL1xuICAgICAgaWYgKHRoaXMud2FudHMoZnV0dXJlKSkge1xuICAgICAgICB0aGlzLmFkZChlbnRpdHkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmUoZW50aXR5KTtcbiAgICAgIH1cblxuICAgICAgLyogSWYgdGhlIGVudGl0eSBpcyBzdGlsbCBpbiB0aGlzIGJ1Y2tldCwgdXBkYXRlIGRlcml2ZWQgYnVja2V0cy4gKi9cbiAgICAgIGlmICh0aGlzLmhhcyhlbnRpdHkpKSB7XG4gICAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmJ1Y2tldHMpLFxuICAgICAgICAgIF9zdGVwO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7XG4gICAgICAgICAgICB2YXIgYnVja2V0ID0gX3N0ZXAudmFsdWU7XG4gICAgICAgICAgICBidWNrZXQuZXZhbHVhdGUoZW50aXR5LCBmdXR1cmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBfaXRlcmF0b3IuZigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIndoZXJlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHdoZXJlKHByZWRpY2F0ZSkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgICB2YXIgaW5kZXggPSB0aGlzLmVudGl0aWVzLmxlbmd0aDtcbiAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgdmFsdWUgPSBfdGhpczIuZW50aXRpZXNbLS1pbmRleF07XG4gICAgICAgIH0gd2hpbGUgKHZhbHVlICYmICFwcmVkaWNhdGUodmFsdWUpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgZG9uZTogaW5kZXggPCAwXG4gICAgICAgIH07XG4gICAgICB9O1xuICAgICAgcmV0dXJuIF9kZWZpbmVQcm9wZXJ0eSh7fSwgU3ltYm9sLml0ZXJhdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbmV4dDogbmV4dFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyogd2l0aCAqL1xuICB9LCB7XG4gICAga2V5OiBcIndpdGhcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gX3dpdGgoKSB7XG4gICAgICByZXR1cm4gdGhpcy5hcmNoZXR5cGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICAvKiB3aXRob3V0ICovXG4gIH0sIHtcbiAgICBrZXk6IFwid2l0aG91dFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB3aXRob3V0KCkge1xuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBwcm9wcyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBwcm9wc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuYXJjaGV0eXBlKHtcbiAgICAgICAgd2l0aG91dDogcHJvcHNcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qIFByZWRpY2F0ZSBmb3JtICovXG4gIH0sIHtcbiAgICBrZXk6IFwiYXJjaGV0eXBlXCIsXG4gICAgdmFsdWU6IC8qIEltcGxlbWVudGF0aW9uICovXG5cbiAgICBmdW5jdGlvbiBhcmNoZXR5cGUocXVlcnkpIHtcbiAgICAgIC8qIEhhbmRsZSB0aGUgZnVuY3Rpb24gZm9ybSAqL1xuICAgICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5idWNrZXRzKSxcbiAgICAgICAgICBfc3RlcDI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHtcbiAgICAgICAgICAgIHZhciBfYnVja2V0MiA9IF9zdGVwMi52YWx1ZTtcbiAgICAgICAgICAgIGlmIChfYnVja2V0MiBpbnN0YW5jZW9mIFByZWRpY2F0ZUJ1Y2tldCAmJiBfYnVja2V0Mi5wcmVkaWNhdGUgPT09IHF1ZXJ5KSB7XG4gICAgICAgICAgICAgIHJldHVybiBfYnVja2V0MjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIF9pdGVyYXRvcjIuZigpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfYnVja2V0ID0gbmV3IFByZWRpY2F0ZUJ1Y2tldCh0aGlzLCBxdWVyeSk7XG4gICAgICAgIHRoaXMuYnVja2V0cy5hZGQoX2J1Y2tldCk7XG4gICAgICAgIHJldHVybiBfYnVja2V0O1xuICAgICAgfVxuXG4gICAgICAvKiBIYW5kbGUgdGhlIHN0cmluZyBmb3JtICovXG4gICAgICBpZiAoX3R5cGVvZihxdWVyeSkgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCByZXN0ID0gbmV3IEFycmF5KF9sZW4zID4gMSA/IF9sZW4zIC0gMSA6IDApLCBfa2V5MyA9IDE7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgICAgICByZXN0W19rZXkzIC0gMV0gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmFyY2hldHlwZSh7XG4gICAgICAgICAgXCJ3aXRoXCI6IFtxdWVyeV0uY29uY2F0KHJlc3QpXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvKiBGaW5kIGFuZCByZXR1cm4gZXhpc3RpbmcgYXJjaGV0eXBlIGJ1Y2tldCAqL1xuICAgICAgdmFyIG1lbW9pemVkUXVlcnkgPSBtZW1vaXplUXVlcnkocXVlcnkpO1xuICAgICAgdmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0aGlzLmJ1Y2tldHMpLFxuICAgICAgICBfc3RlcDM7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykge1xuICAgICAgICAgIHZhciBfYnVja2V0MyA9IF9zdGVwMy52YWx1ZTtcbiAgICAgICAgICBpZiAoX2J1Y2tldDMgaW5zdGFuY2VvZiBBcmNoZXR5cGVCdWNrZXQgJiYgX2J1Y2tldDMucXVlcnkgPT09IG1lbW9pemVkUXVlcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBfYnVja2V0MztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKiBDcmVhdGUgYSBuZXcgYnVja2V0ICovXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBfaXRlcmF0b3IzLmYoKTtcbiAgICAgIH1cbiAgICAgIHZhciBidWNrZXQgPSBuZXcgQXJjaGV0eXBlQnVja2V0KHRoaXMsIG1lbW9pemVkUXVlcnkpO1xuICAgICAgdGhpcy5idWNrZXRzLmFkZChidWNrZXQpO1xuICAgICAgcmV0dXJuIGJ1Y2tldDtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIEVudGl0eUJ1Y2tldDtcbn0oQnVja2V0KTtcbnZhciBEZXJpdmVkRW50aXR5QnVja2V0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfRW50aXR5QnVja2V0KSB7XG4gIF9pbmhlcml0cyhEZXJpdmVkRW50aXR5QnVja2V0LCBfRW50aXR5QnVja2V0KTtcbiAgdmFyIF9zdXBlcjIgPSBfY3JlYXRlU3VwZXIoRGVyaXZlZEVudGl0eUJ1Y2tldCk7XG4gIGZ1bmN0aW9uIERlcml2ZWRFbnRpdHlCdWNrZXQoc291cmNlKSB7XG4gICAgdmFyIF90aGlzMztcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGVyaXZlZEVudGl0eUJ1Y2tldCk7XG4gICAgX3RoaXMzID0gX3N1cGVyMi5jYWxsKHRoaXMpO1xuICAgIF90aGlzMy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgcmV0dXJuIF90aGlzMztcbiAgfVxuICBfY3JlYXRlQ2xhc3MoRGVyaXZlZEVudGl0eUJ1Y2tldCwgW3tcbiAgICBrZXk6IFwic3RhcnRVcGRhdGluZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydFVwZGF0aW5nKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG4gICAgICB0aGlzLnNvdXJjZS5vbkVudGl0eUFkZGVkLmFkZChmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoX3RoaXM0LndhbnRzKGUpKSBfdGhpczQuYWRkKGUpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLnNvdXJjZS5vbkVudGl0eVJlbW92ZWQuYWRkKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIF90aGlzNC5yZW1vdmUoZSk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY29udGVudHMgb2YgdGhpcyBidWNrZXQgYnkgaXRlcmF0aW5nIG92ZXIgdGhlIGVudGl0aWVzXG4gICAgICogaW4gaXRzIHNvdXJjZSBidWNrZXQsIHJlLWNoZWNraW5nIGVhY2ggb25lIHRvIHNlZSBpZiBpdCBzaG91bGQgYmVcbiAgICAgKiBpbiB0aGlzIGJ1Y2tldCBvciBub3QuXG4gICAgICovXG4gIH0sIHtcbiAgICBrZXk6IFwidXBkYXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgIHZhciBfaXRlcmF0b3I0ID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5zb3VyY2UpLFxuICAgICAgICBfc3RlcDQ7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykge1xuICAgICAgICAgIHZhciBlbnRpdHkgPSBfc3RlcDQudmFsdWU7XG4gICAgICAgICAgdGhpcy5ldmFsdWF0ZShlbnRpdHkpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBfaXRlcmF0b3I0LmYoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIERlcml2ZWRFbnRpdHlCdWNrZXQ7XG59KEVudGl0eUJ1Y2tldCk7XG5cbi8qKlxuICogQSBidWNrZXQgcmVwcmVzZW50aW5nIGEgc3Vic2V0IG9mIGVudGl0aWVzIHRoYXQgc2F0aXNmeVxuICogYSBnaXZlbiBwcmVkaWNhdGUuXG4gKi9cbnZhciBQcmVkaWNhdGVCdWNrZXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9EZXJpdmVkRW50aXR5QnVja2V0KSB7XG4gIF9pbmhlcml0cyhQcmVkaWNhdGVCdWNrZXQsIF9EZXJpdmVkRW50aXR5QnVja2V0KTtcbiAgdmFyIF9zdXBlcjMgPSBfY3JlYXRlU3VwZXIoUHJlZGljYXRlQnVja2V0KTtcbiAgZnVuY3Rpb24gUHJlZGljYXRlQnVja2V0KHNvdXJjZSwgcHJlZGljYXRlKSB7XG4gICAgdmFyIF90aGlzNTtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJlZGljYXRlQnVja2V0KTtcbiAgICBfdGhpczUgPSBfc3VwZXIzLmNhbGwodGhpcywgc291cmNlKTtcbiAgICBfdGhpczUuc291cmNlID0gc291cmNlO1xuICAgIF90aGlzNS5wcmVkaWNhdGUgPSBwcmVkaWNhdGU7XG4gICAgX3RoaXM1LnN0YXJ0VXBkYXRpbmcoKTtcbiAgICByZXR1cm4gX3RoaXM1O1xuICB9XG4gIF9jcmVhdGVDbGFzcyhQcmVkaWNhdGVCdWNrZXQsIFt7XG4gICAga2V5OiBcIndhbnRzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHdhbnRzKGVudGl0eSkge1xuICAgICAgcmV0dXJuIHRoaXMucHJlZGljYXRlKGVudGl0eSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBQcmVkaWNhdGVCdWNrZXQ7XG59KERlcml2ZWRFbnRpdHlCdWNrZXQpO1xuXG4vKipcbiAqIEEgYnVja2V0IHJlcHJlc2VudGluZyBhIHN1YnNldCBvZiBlbnRpdGllcyB0aGF0IGhhdmUgYVxuICogc3BlY2lmaWMgc2V0IG9mIGNvbXBvbmVudHMuXG4gKi9cbnZhciBBcmNoZXR5cGVCdWNrZXQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9EZXJpdmVkRW50aXR5QnVja2V0Mikge1xuICBfaW5oZXJpdHMoQXJjaGV0eXBlQnVja2V0LCBfRGVyaXZlZEVudGl0eUJ1Y2tldDIpO1xuICB2YXIgX3N1cGVyNCA9IF9jcmVhdGVTdXBlcihBcmNoZXR5cGVCdWNrZXQpO1xuICBmdW5jdGlvbiBBcmNoZXR5cGVCdWNrZXQoc291cmNlLCBxdWVyeSkge1xuICAgIHZhciBfdGhpczY7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFyY2hldHlwZUJ1Y2tldCk7XG4gICAgX3RoaXM2ID0gX3N1cGVyNC5jYWxsKHRoaXMsIHNvdXJjZSk7XG4gICAgX3RoaXM2LnNvdXJjZSA9IHNvdXJjZTtcbiAgICBfdGhpczYucXVlcnkgPSBxdWVyeTtcbiAgICBfdGhpczYuc3RhcnRVcGRhdGluZygpO1xuICAgIHJldHVybiBfdGhpczY7XG4gIH1cbiAgX2NyZWF0ZUNsYXNzKEFyY2hldHlwZUJ1Y2tldCwgW3tcbiAgICBrZXk6IFwid2FudHNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gd2FudHMoZW50aXR5KSB7XG4gICAgICByZXR1cm4gaGFzQ29tcG9uZW50cy5hcHBseSh2b2lkIDAsIFtlbnRpdHldLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5xdWVyeVtcIndpdGhcIl0gfHwgW10pKSkgJiYgaGFzTm9Db21wb25lbnRzLmFwcGx5KHZvaWQgMCwgW2VudGl0eV0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheSh0aGlzLnF1ZXJ5LndpdGhvdXQgfHwgW10pKSk7XG4gICAgfVxuICB9XSk7XG4gIHJldHVybiBBcmNoZXR5cGVCdWNrZXQ7XG59KERlcml2ZWRFbnRpdHlCdWNrZXQpO1xuXG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpO1xuICAgIGVudW1lcmFibGVPbmx5ICYmIChzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkge1xuICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7XG4gICAgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7XG4gIH1cbiAgcmV0dXJuIGtleXM7XG59XG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTtcbiAgICBpICUgMiA/IG93bktleXMoT2JqZWN0KHNvdXJjZSksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgIH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG52YXIgV29ybGQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FbnRpdHlCdWNrZXQpIHtcbiAgX2luaGVyaXRzKFdvcmxkLCBfRW50aXR5QnVja2V0KTtcbiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihXb3JsZCk7XG4gIGZ1bmN0aW9uIFdvcmxkKCkge1xuICAgIHZhciBfdGhpcztcbiAgICB2YXIgZW50aXRpZXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IFtdO1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBXb3JsZCk7XG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBlbnRpdGllcyk7XG5cbiAgICAvKiBXaGVuIGVudGl0aWVzIGFyZSByZW1vdmVkLCBhbHNvIG1ha2Ugc3VyZSB0byBmb3JnZXQgYWJvdXQgdGhlaXIgSURzLiAqL1xuICAgIF9kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgXCJlbnRpdHlUb0lkXCIsIG5ldyBNYXAoKSk7XG4gICAgX2RlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCBcImlkVG9FbnRpdHlcIiwgbmV3IE1hcCgpKTtcbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwibmV4dElkXCIsIDApO1xuICAgIF90aGlzLm9uRW50aXR5UmVtb3ZlZC5hZGQoZnVuY3Rpb24gKGVudGl0eSkge1xuICAgICAgLyogUmVtb3ZlIHRoZSBlbnRpdHkgZnJvbSB0aGUgSUQgbWFwICovXG4gICAgICBpZiAoX3RoaXMuZW50aXR5VG9JZC5oYXMoZW50aXR5KSkge1xuICAgICAgICB2YXIgaWQgPSBfdGhpcy5lbnRpdHlUb0lkLmdldChlbnRpdHkpO1xuICAgICAgICBfdGhpcy5pZFRvRW50aXR5W1wiZGVsZXRlXCJdKGlkKTtcbiAgICAgICAgX3RoaXMuZW50aXR5VG9JZFtcImRlbGV0ZVwiXShlbnRpdHkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuICBfY3JlYXRlQ2xhc3MoV29ybGQsIFt7XG4gICAga2V5OiBcInVwZGF0ZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiAoX3VwZGF0ZSkge1xuICAgICAgZnVuY3Rpb24gdXBkYXRlKF94LCBfeDIsIF94Mykge1xuICAgICAgICByZXR1cm4gX3VwZGF0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgdXBkYXRlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3VwZGF0ZS50b1N0cmluZygpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiB1cGRhdGU7XG4gICAgfShmdW5jdGlvbiAoZW50aXR5LCB1cGRhdGUsIHZhbHVlKSB7XG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHZhciBwYXJ0aWFsID0gdXBkYXRlKGVudGl0eSk7XG4gICAgICAgIHBhcnRpYWwgJiYgT2JqZWN0LmFzc2lnbihlbnRpdHksIHBhcnRpYWwpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdXBkYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGVudGl0eVt1cGRhdGVdID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKHVwZGF0ZSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKGVudGl0eSwgdXBkYXRlKTtcbiAgICAgIH1cblxuICAgICAgLyogSWYgdGhpcyB3b3JsZCBrbm93cyBhYm91dCB0aGUgZW50aXR5LCBub3RpZnkgYW55IGRlcml2ZWQgYnVja2V0cyBhYm91dCB0aGUgY2hhbmdlLiAqL1xuICAgICAgaWYgKHRoaXMuaGFzKGVudGl0eSkpIHtcbiAgICAgICAgdGhpcy5ldmFsdWF0ZShlbnRpdHkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGVudGl0eTtcbiAgICB9KVxuICB9LCB7XG4gICAga2V5OiBcImFkZENvbXBvbmVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDb21wb25lbnQoZW50aXR5LCBjb21wb25lbnQsIHZhbHVlKSB7XG4gICAgICAvKiBSZXR1cm4gZWFybHkgaWYgdGhlIGVudGl0eSBhbHJlYWR5IGhhcyB0aGUgY29tcG9uZW50LiAqL1xuICAgICAgaWYgKGVudGl0eVtjb21wb25lbnRdICE9PSB1bmRlZmluZWQpIHJldHVybjtcblxuICAgICAgLyogU2V0IHRoZSBjb21wb25lbnQgKi9cbiAgICAgIGVudGl0eVtjb21wb25lbnRdID0gdmFsdWU7XG5cbiAgICAgIC8qIFRvdWNoIHRoZSBlbnRpdHksIHRyaWdnZXJpbmcgcmUtY2hlY2tzIG9mIGluZGljZXMgKi9cbiAgICAgIGlmICh0aGlzLmhhcyhlbnRpdHkpKSB7XG4gICAgICAgIHRoaXMuZXZhbHVhdGUoZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVtb3ZlQ29tcG9uZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUNvbXBvbmVudChlbnRpdHksIGNvbXBvbmVudCkge1xuICAgICAgLyogUmV0dXJuIGVhcmx5IGlmIHRoZSBlbnRpdHkgZG9lc24ndCBldmVuIGhhdmUgdGhlIGNvbXBvbmVudC4gKi9cbiAgICAgIGlmIChlbnRpdHlbY29tcG9uZW50XSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cbiAgICAgIC8qIElmIHRoaXMgd29ybGQga25vd3MgYWJvdXQgdGhlIGVudGl0eSwgbm90aWZ5IGFueSBkZXJpdmVkIGJ1Y2tldHMgYWJvdXQgdGhlIGNoYW5nZS4gKi9cbiAgICAgIGlmICh0aGlzLmhhcyhlbnRpdHkpKSB7XG4gICAgICAgIHZhciBmdXR1cmUgPSBfb2JqZWN0U3ByZWFkMih7fSwgZW50aXR5KTtcbiAgICAgICAgZGVsZXRlIGZ1dHVyZVtjb21wb25lbnRdO1xuICAgICAgICB0aGlzLmV2YWx1YXRlKGVudGl0eSwgZnV0dXJlKTtcbiAgICAgIH1cblxuICAgICAgLyogUmVtb3ZlIHRoZSBjb21wb25lbnQuICovXG4gICAgICBkZWxldGUgZW50aXR5W2NvbXBvbmVudF07XG4gICAgfVxuXG4gICAgLyogSURzICovXG4gIH0sIHtcbiAgICBrZXk6IFwiaWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaWQoZW50aXR5KSB7XG4gICAgICAvKiBXZSBvbmx5IGV2ZXIgd2FudCB0byBnZW5lcmF0ZSBJRHMgZm9yIGVudGl0aWVzIHRoYXQgYXJlIGFjdHVhbGx5IGluIHRoZSB3b3JsZC4gKi9cbiAgICAgIGlmICghdGhpcy5oYXMoZW50aXR5KSkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgICAgLyogTGF6aWx5IGdlbmVyYXRlIGFuIElELiAqL1xuICAgICAgaWYgKCF0aGlzLmVudGl0eVRvSWQuaGFzKGVudGl0eSkpIHtcbiAgICAgICAgdmFyIGlkID0gdGhpcy5uZXh0SWQrKztcbiAgICAgICAgdGhpcy5lbnRpdHlUb0lkLnNldChlbnRpdHksIGlkKTtcbiAgICAgICAgdGhpcy5pZFRvRW50aXR5LnNldChpZCwgZW50aXR5KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmVudGl0eVRvSWQuZ2V0KGVudGl0eSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImVudGl0eVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbnRpdHkoaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmlkVG9FbnRpdHkuZ2V0KGlkKTtcbiAgICB9XG4gIH1dKTtcbiAgcmV0dXJuIFdvcmxkO1xufShFbnRpdHlCdWNrZXQpO1xuXG5leHBvcnQgeyBBcmNoZXR5cGVCdWNrZXQsIERlcml2ZWRFbnRpdHlCdWNrZXQsIEVudGl0eUJ1Y2tldCwgUHJlZGljYXRlQnVja2V0LCBXb3JsZCwgaGFzQW55Q29tcG9uZW50cywgaGFzQ29tcG9uZW50cywgaGFzTm9Db21wb25lbnRzLCBpc0FyY2hldHlwZSwgbWVtb2l6ZVF1ZXJ5LCBub3JtYWxpemVDb21wb25lbnRzLCBub3JtYWxpemVRdWVyeSwgbm90IH07XG4iLCJpbXBvcnQgeyBXb3JsZCB9IGZyb20gXCJtaW5pcGxleFwiXHJcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuL2VudGl0eVwiXHJcbmltcG9ydCB7IFJlc291cmNlVHlwZSB9IGZyb20gXCIuL3Jlc291cmNlXCJcclxuaW1wb3J0IHsgVG93biB9IGZyb20gXCIuL3Rvd25cIlxyXG5pbXBvcnQgeyBCdWlsZGluZ1R5cGUgfSBmcm9tIFwiLi9idWlsZGluZ1wiXHJcblxyXG5leHBvcnQgdHlwZSBBY3Rpdml0eSA9IFxyXG57XHJcbiAgICBpc0FjdGl2aXR5PzogdHJ1ZSxcclxuICAgIGFjdGl2YXRlZD86IHRydWUsXHJcbiAgICBcclxuICAgIC8vIEFjdGl2aXRpZXNcclxuICAgIFVzZVJlc291cmNlT25jZT86IHtcclxuICAgICAgICB0eXBlOiBSZXNvdXJjZVR5cGUsXHJcbiAgICAgICAgYW1vdW50OiBudW1iZXJcclxuICAgIH1bXSxcclxuICAgIEFkZFJlc291cmNlT25jZT86IHtcclxuICAgICAgICB0eXBlOiBSZXNvdXJjZVR5cGUsXHJcbiAgICAgICAgYW1vdW50OiBudW1iZXJcclxuICAgIH1bXSxcclxuICAgIENvbnN0cnVjdEJ1aWxkaW5nPzoge1xyXG4gICAgICAgIHR5cGU6IEJ1aWxkaW5nVHlwZSxcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGVudW0gQWN0aXZpdGllcyBcclxue1xyXG4gICAgR2F0aGVyRnJ1aXQsXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBBZGRBY3Rpdml0eUVudHJ5KFxyXG4gICAgd29ybGQ6IFdvcmxkPEVudGl0eT4sXHJcbiAgICBwcm90b3R5cGU6IEVudGl0eVxyXG4pXHJcbntcclxuICAgIGxldCBlbnRpdHk6IGFueSA9IHt9O1xyXG4gICAgT2JqZWN0LmFzc2lnbihlbnRpdHksIHByb3RvdHlwZSk7XHJcblxyXG4gICAgZW50aXR5LmlzQWN0aXZpdHkgPSB0cnVlO1xyXG5cclxuICAgIHJldHVybiB3b3JsZC5hZGQoZW50aXR5KTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gQWN0aXZpdHkgYWN0aXZhdGlvbiBoZWxwZXJzIC8gc3lzdGVtc1xyXG4vLyBBcyB3ZSBkb24ndCB3YW50IGFjdGl2YXRpb25zIHRvIGJlIGFjdGl2ZWQgb25seSBkdXJpbmcgdGlja3MsXHJcbi8vIHNvIHdlIGlnbm9yZWQgdGhlIEVDUyBzY2hlbWUgb2YgaGFuZGxpbmcgdXNlciBpbnB1dHMuXHJcbi8vXHJcbi8vIGkuZS4sIGluIHNvbWUgRUNTIGRlc2lnbnMsIHVzZXIgaW5wdXQgaXMgaGFuZGxlZCBieSBhbiBcIklOUFVUXCJcclxuLy8gY29tcG9uZW50LCB3aGljaCBtb2RpZmllcyBpdHNlbGYgdXBvbiByZWNpZXZpbmcgaW5wdXRzLlxyXG4vLyBBZnRlciB0aGF0LCBhIHN5c3RlbSBxdWVyaWVzIGZvciBcIklOUFVUICsgWFwiIGVudGl0aWVzIGFuZCB1cGRhdGVcclxuLy8gY29tcG9uZW50IFwiWFwiIHdpdGggYXR0cmlidXRlcyBjb250YWluZWQgaW4gXCJJTlBVVFwiLlxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIEhhbmRsZUFjdGl2aXR5KGFjdDogRW50aXR5LCB0b3duOiBUb3duKVxyXG57XHJcbiAgICBjb25zb2xlLmxvZyhhY3QpO1xyXG5cclxuICAgIGlmIChVc2VSZXNvdXJjZU9uY2UoYWN0LCB0b3duKSlcclxuICAgIHtcclxuICAgICAgICBBZGRSZXNvdXJjZU9uY2UoYWN0LCB0b3duKTtcclxuICAgICAgICBDb25zdHJ1Y3RCdWlsZGluZyhhY3QsIHRvd24pO1xyXG4gICAgfVxyXG5cclxuICAgIHRvd24uVXBkYXRlVUkoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gQWRkUmVzb3VyY2VPbmNlKGFjdDogRW50aXR5LCB0b3duOiBUb3duKVxyXG57XHJcbiAgICBpZiAoYWN0Lmhhc093blByb3BlcnR5KFwiQWRkUmVzb3VyY2VPbmNlXCIpKVxyXG4gICAge1xyXG4gICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBhY3QuQWRkUmVzb3VyY2VPbmNlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdG93bi5yZXNvdXJjZXMuQWRkUmVzb3VyY2UobGluZS50eXBlLCBsaW5lLmFtb3VudCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gVXNlUmVzb3VyY2VPbmNlKGFjdDogRW50aXR5LCB0b3duOiBUb3duKVxyXG57XHJcbiAgICAvLyBGaXJzdCBjaGVjayBpZiByZXNvdXJjZXMgYXJlIGVub3VnaFxyXG4gICAgaWYgKGFjdC5oYXNPd25Qcm9wZXJ0eShcIlVzZVJlc291cmNlT25jZVwiKSlcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRvd24ucmVzb3VyY2VzLklzQWxsUmVzb3VyY2VFbm91Z2goYWN0LlVzZVJlc291cmNlT25jZSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyBJZiBubyBlbm91Z2ggcmVzb3VyY2VzLCBhYm9ydCB0aGlzIGFjdGlvblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIEFjdHVhbGx5IGNvbnN1bWVzIHRoZSByZXNvdXJjZXNcclxuICAgIGlmIChhY3QuaGFzT3duUHJvcGVydHkoXCJVc2VSZXNvdXJjZU9uY2VcIikpXHJcbiAgICB7XHJcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGFjdC5Vc2VSZXNvdXJjZU9uY2UpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0b3duLnJlc291cmNlcy5BZGRSZXNvdXJjZShsaW5lLnR5cGUsIC1saW5lLmFtb3VudCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gQ29uc3RydWN0QnVpbGRpbmcoYWN0OiBFbnRpdHksIHRvd246IFRvd24pXHJcbntcclxuICAgIGlmIChhY3QuaGFzT3duUHJvcGVydHkoXCJDb25zdHJ1Y3RCdWlsZGluZ1wiKSlcclxuICAgIHtcclxuICAgICAgICAvLyBDb25zdHJ1Y3QgbmV3IGJ1aWxkaW5nXHJcbiAgICAgICAgdG93bi5idWlsZGluZ3MuQWRkQnVpbGRpbmcodG93bi5idWlsZGluZ3MuR2V0QnVpbGRpbmdQcm90b3R5cGUoYWN0LkNvbnN0cnVjdEJ1aWxkaW5nLnR5cGUpKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIGJ1aWxkaW5nIGNvc3RcclxuICAgICAgICBpZiAoYWN0Lmhhc093blByb3BlcnR5KFwiVXNlUmVzb3VyY2VPbmNlXCIpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYWN0LlVzZVJlc291cmNlT25jZSA9IHRvd24uYnVpbGRpbmdzLkdldEJ1aWxkaW5nQ29zdChhY3QuQ29uc3RydWN0QnVpbGRpbmcudHlwZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vLyBBY3Rpdml0eSBkZWZpbml0aW9uIC8gcHJlZmFic1xyXG5cclxuZXhwb3J0IGNvbnN0IGFjdGl2aXRpZXMgPSB7XHJcbiAgICBHYXRoZXJGcnVpdDoge1xyXG4gICAgICAgIGlkOiBcImFHYXRoZXJGcnVpdFwiLFxyXG4gICAgICAgIEFkZFJlc291cmNlT25jZTogW3sgdHlwZTogXCJGcnVpdFwiLCBhbW91bnQ6IDEuMCB9XSxcclxuICAgIH0sXHJcbiAgICBHYXRoZXJCcmFuY2g6IHtcclxuICAgICAgICBpZDogXCJhR2F0aGVyQnJhbmNoXCIsXHJcbiAgICAgICAgQWRkUmVzb3VyY2VPbmNlOiBbeyB0eXBlOiBcIkJyYW5jaFwiLCBhbW91bnQ6IDEuMCB9XSxcclxuICAgIH1cclxufSBzYXRpc2ZpZXMgUmVjb3JkPHN0cmluZywgRW50aXR5PlxyXG4iLCJpbXBvcnQgeyBXb3JsZCB9IGZyb20gXCJtaW5pcGxleFwiXG5pbXBvcnQgeyBFbnRpdHkgfSBmcm9tIFwiLi9lbnRpdHlcIlxuaW1wb3J0IHsgVG93biB9IGZyb20gXCIuL3Rvd25cIlxuaW1wb3J0IHsgUmVzb3VyY2VEYXRhIH0gZnJvbSBcIi4vZ2FtZWRhdGFcIlxuaW1wb3J0IHsgRXZlbnQgfSBmcm9tIFwiQGhtYW5zL2V2ZW50XCI7XG5cbi8vIGV4cG9ydCB0eXBlIFJlc291cmNlID0ge1xuLy8gICAgIGlzUmVzb3VyY2U/OiB0cnVlLFxuLy8gICAgIHJlbmV3YWJsZT86IHRydWUsXG4vLyAgICAgcmVzb3VyY2VJbmZvPzoge1xuLy8gICAgICAgICB0eXBlOiBSZXNvdXJjZVR5cGUsXG4vLyAgICAgICAgIGN1cnJlbnQ6IG51bWJlcixcbi8vICAgICAgICAgbWF4OiBudW1iZXIsXG4vLyAgICAgICAgIHRpY2tNb2RpZnk6IG51bWJlclxuLy8gICAgIH1cbi8vIH1cblxuZXhwb3J0IHR5cGUgUmVzb3VyY2VJbmZvID0ge1xuICAgIHR5cGU6IFJlc291cmNlVHlwZSxcbiAgICBjdXJyZW50OiBudW1iZXIsXG4gICAgbWF4OiBudW1iZXIsXG5cbiAgICB0aWNrTW9kaWZ5OiBudW1iZXIsXG4gICAgdGlja01vZGlmeUVudkhpbnQ/OiBudW1iZXIsXG5cbiAgICB2aXNpYmxlOiBib29sZWFuXG59XG5cbmV4cG9ydCB0eXBlIEVudmlyb25tZW50SW5mbyA9IHtcbiAgICBhbW91bnQ6IG51bWJlcixcbiAgICBjYXBhY2l0eTogbnVtYmVyXG59XG5cbmV4cG9ydCBjb25zdCBSZXNvdXJjZVR5cGVzID1cbntcbiAgICBcIkdyYXNzXCI6IDAsXG4gICAgXCJTaHJ1YlwiOiAwLFxuICAgIFwiT2FrXCI6IDAsXG4gICAgXCJQaWNlYVwiOiAwLFxuXG4gICAgXCJGcnVpdFwiOiAwLFxuICAgIFwiV29vZFwiOiAwLFxuICAgIFwiQnJhbmNoXCI6IDAsXG5cbiAgICBcIkN1bHR1cmVcIjogMCxcbiAgICBcIlNjaWVuY2VcIjogMCxcbn1cbmV4cG9ydCB0eXBlIFJlc291cmNlVHlwZSA9IGtleW9mIHR5cGVvZiBSZXNvdXJjZVR5cGVzO1xuXG5leHBvcnQgY2xhc3MgUmVzb3VyY2VIb2xkZXJcbntcbiAgICBwdWJsaWMgdG93bjogVG93bjtcblxuICAgIHB1YmxpYyByZXNvdXJjZURhdGE6IE1hcDxSZXNvdXJjZVR5cGUsIFJlc291cmNlRGF0YT4gPSBuZXcgTWFwPFJlc291cmNlVHlwZSwgUmVzb3VyY2VEYXRhPigpO1xuICAgIFxuICAgIHJlc291cmNlTWFwOiBNYXA8UmVzb3VyY2VUeXBlLCBSZXNvdXJjZUluZm8+ID0gbmV3IE1hcDxSZXNvdXJjZVR5cGUsIFJlc291cmNlSW5mbz4oKTtcbiAgICByZXNvdXJjZU1hcEVudjogTWFwPFJlc291cmNlVHlwZSwgUmVzb3VyY2VJbmZvPiA9IG5ldyBNYXA8UmVzb3VyY2VUeXBlLCBSZXNvdXJjZUluZm8+KCk7XG4gICAgc3RhdGljIHJlc291cmNlTWFwVW5pdmVyc2FsOiBNYXA8UmVzb3VyY2VUeXBlLCBSZXNvdXJjZUluZm8+ID0gbmV3IE1hcDxSZXNvdXJjZVR5cGUsIFJlc291cmNlSW5mbz4oKTtcblxuICAgIHB1YmxpYyBlbnZpcm9ubWVudDogRW52aXJvbm1lbnRJbmZvID0ge1xuICAgICAgICBhbW91bnQ6IDAsXG4gICAgICAgIGNhcGFjaXR5OiAxMDAwLFxuICAgIH1cblxuICAgIHB1YmxpYyBvblJlc291cmNlQWRkZWQ6IEV2ZW50PFJlc291cmNlSW5mbz4gPSBuZXcgRXZlbnQ8UmVzb3VyY2VJbmZvPigpO1xuICAgIHB1YmxpYyBvblJlc291cmNlUmVtb3ZlZDogRXZlbnQ8UmVzb3VyY2VJbmZvPiA9IG5ldyBFdmVudDxSZXNvdXJjZUluZm8+KCk7XG5cbiAgICBjb25zdHJ1Y3Rvcih0b3duOiBUb3duKVxuICAgIHtcbiAgICAgICAgdGhpcy50b3duID0gdG93bjtcbiAgICB9XG5cbiAgICBwdWJsaWMgSW5pdCgpXG4gICAge1xuICAgICAgICAoT2JqZWN0LmtleXMoUmVzb3VyY2VUeXBlcykgYXMgQXJyYXk8UmVzb3VyY2VUeXBlPikuZm9yRWFjaCgodHlwZSkgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5BZGRSZXNvdXJjZUVudHJ5KHR5cGUpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHByaXZhdGUgQWRkUmVzb3VyY2VFbnRyeShcbiAgICAgICAgdHlwZTogUmVzb3VyY2VUeXBlLFxuICAgIClcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5yZXNvdXJjZU1hcC5oYXModHlwZSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBtYXg6IG51bWJlciA9IHRoaXMucmVzb3VyY2VEYXRhLmdldCh0eXBlKS5pbml0aWFsTWF4U3RhY2tzO1xuXG4gICAgICAgICAgICBsZXQgaW5mbyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IDAsXG4gICAgICAgICAgICAgICAgbWF4OiBtYXgsXG4gICAgICAgICAgICAgICAgdGlja01vZGlmeTogMCxcblxuICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5yZXNvdXJjZU1hcC5zZXQodHlwZSwgaW5mbyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc291cmNlRGF0YS5nZXQodHlwZSkuZW52ID09PSB0cnVlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzb3VyY2VNYXBFbnYuc2V0KHR5cGUsIGluZm8pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBbHNvIGNyZWF0ZXMgdW5pdmVyc2FsIGluZm8gaWYgbm90IHByZXNlbnRlZFxuICAgICAgICAgICAgaWYgKCFSZXNvdXJjZUhvbGRlci5yZXNvdXJjZU1hcFVuaXZlcnNhbC5oYXModHlwZSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IG1heDogbnVtYmVyID0gdGhpcy5yZXNvdXJjZURhdGEuZ2V0KHR5cGUpLmluaXRpYWxVTWF4U3RhY2tzO1xuXG4gICAgICAgICAgICAgICAgbGV0IGluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIG1heDogbWF4LFxuICAgICAgICAgICAgICAgICAgICB0aWNrTW9kaWZ5OiAwLFxuXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBSZXNvdXJjZUhvbGRlci5yZXNvdXJjZU1hcFVuaXZlcnNhbC5zZXQodHlwZSwgaW5mbyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMub25SZXNvdXJjZUFkZGVkLmVtaXQoaW5mbyk7XG4gICAgICAgICAgICByZXR1cm4gaW5mbztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBJc1Jlc291cmNlRW5vdWdoKFxuICAgICAgICB0eXBlOiBSZXNvdXJjZVR5cGUsXG4gICAgICAgIGFtb3VudDogbnVtYmVyXG4gICAgKVxuICAgIHtcbiAgICAgICAgbGV0IHJlcyA9IHRoaXMuR2V0UmVzb3VyY2UodHlwZSk7XG4gICAgICAgIHJldHVybiBhbW91bnQgPD0gcmVzLmN1cnJlbnQ7XG4gICAgfVxuXG4gICAgcHVibGljIElzQWxsUmVzb3VyY2VFbm91Z2goXG4gICAgICAgIHJlc291cmNlczoge3R5cGU6IFJlc291cmNlVHlwZSwgYW1vdW50OiBudW1iZXJ9W11cbiAgICApXG4gICAge1xuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgcmVzb3VyY2VzKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBJZiBubyBlbm91Z2ggcmVzb3VyY2VzLCByZXR1cm4gTk9cbiAgICAgICAgICAgIGlmICh0aGlzLkdldFJlc291cmNlQW1vdW50KGxpbmUudHlwZSkgPCBsaW5lLmFtb3VudCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFJldHVybnM6ICUgb2YgZmluYWwgYWRkZWQgcmVzb3VyY2UgKHcuci50LiBhbW91bnQpXG4gICAgcHVibGljIEFkZFJlc291cmNlKFxuICAgICAgICB0eXBlOiBSZXNvdXJjZVR5cGUsXG4gICAgICAgIGFtb3VudDogbnVtYmVyLFxuICAgICAgICB0aWNrOiBib29sZWFuID0gdHJ1ZSlcbiAgICB7XG4gICAgICAgIGlmICghdGhpcy5yZXNvdXJjZU1hcC5oYXModHlwZSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIFRPRE86IGRlZmF1bHQgbWF4aW11bT9cbiAgICAgICAgICAgIHRoaXMuQWRkUmVzb3VyY2VFbnRyeSh0eXBlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBpbmZvID0gdGhpcy5yZXNvdXJjZU1hcC5nZXQodHlwZSk7XG4gICAgICAgIGluZm8udmlzaWJsZSA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICAvLyBXZSBhcmUgdXNpbmcgcmVzb3VyY2U7IHdlIG1heSBuZWVkIHRvIHVzZSB1bml2ZXJzYWwgcmVzb3VyY2VzLlxuICAgICAgICBpZiAoYW1vdW50IDwgMClcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gSWYgbG9jYWwgcmVzb3VyY2UgaXMgbm90IGVub3VnaFxuICAgICAgICAgICAgaWYgKGluZm8uY3VycmVudCA8ICgtYW1vdW50KSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsZXQgdUluZm8gPSBSZXNvdXJjZUhvbGRlci5yZXNvdXJjZU1hcFVuaXZlcnNhbC5nZXQodHlwZSk7XG4gICAgICAgICAgICAgICAgbGV0IHVCZWZvcmUgPSB1SW5mby5jdXJyZW50O1xuICAgICAgICAgICAgICAgIHVJbmZvLmN1cnJlbnQgKz0gYW1vdW50O1xuICAgICAgICAgICAgICAgIGlmICh1SW5mby5jdXJyZW50IDwgMClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHVJbmZvLmN1cnJlbnQgPSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGFtb3VudCAtPSAodUluZm8uY3VycmVudCAtIHVCZWZvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGJlZm9yZUFkZCA9IGluZm8uY3VycmVudDtcbiAgICAgICAgaW5mby5jdXJyZW50ICs9IGFtb3VudDtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLnJlc291cmNlRGF0YS5nZXQodHlwZSkuZW52ID09PSB0cnVlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodGljayA9PT0gZmFsc2UpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRW52aXJvbm1lbnQgcmVzb3VyY2UgaXMgbW9kaWZpZWQgd2l0aG91dCBgdGljayA9PSB0cnVlYCEhIERvaW5nIHNvIHdpbGwgYnJlYWsgZW52aXJvbm1lbnQgY29uc3RyYWludHMgLi4uXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGluZm8ubWF4ID4gMFxuICAgICAgICAgJiYgaW5mby5jdXJyZW50ID49IGluZm8ubWF4KVxuICAgICAgICB7XG4gICAgICAgICAgICBpbmZvLmN1cnJlbnQgPSBpbmZvLm1heDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbmZvLmN1cnJlbnQgPCAwKVxuICAgICAgICB7XG4gICAgICAgICAgICBpbmZvLmN1cnJlbnQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRpY2spXG4gICAgICAgIHtcbiAgICAgICAgICAgIGluZm8udGlja01vZGlmeSArPSBpbmZvLmN1cnJlbnQgLSBiZWZvcmVBZGQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKGluZm8uY3VycmVudCAtIGJlZm9yZUFkZCkgLyBhbW91bnQ7XG4gICAgfVxuXG4gICAgcHVibGljIEdldFJlc291cmNlKHR5cGU6IFJlc291cmNlVHlwZSk6IFJlc291cmNlSW5mb1xuICAgIHtcbiAgICAgICAgaWYgKHRoaXMucmVzb3VyY2VNYXAuaGFzKHR5cGUpKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBDb21iaW5lIHVuaXZlcnNhbFxuICAgICAgICAgICAgaWYgKFJlc291cmNlSG9sZGVyLnJlc291cmNlTWFwVW5pdmVyc2FsLmhhcyh0eXBlKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsZXQgdUluZm8gPSBSZXNvdXJjZUhvbGRlci5yZXNvdXJjZU1hcFVuaXZlcnNhbC5nZXQodHlwZSk7XG4gICAgICAgICAgICAgICAgbGV0IGxJbmZvID0gdGhpcy5yZXNvdXJjZU1hcC5nZXQodHlwZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudDogdUluZm8uY3VycmVudCArIGxJbmZvLmN1cnJlbnQsXG4gICAgICAgICAgICAgICAgICAgIG1heDogdUluZm8ubWF4ICsgbEluZm8ubWF4LFxuICAgICAgICAgICAgICAgICAgICB0aWNrTW9kaWZ5OiBsSW5mby50aWNrTW9kaWZ5LFxuICAgICAgICAgICAgICAgICAgICB0aWNrTW9kaWZ5RW52SGludDogbEluZm8udGlja01vZGlmeUVudkhpbnQsXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGxJbmZvLnZpc2libGUgfHwgdUluZm8udmlzaWJsZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBObyB1bml2ZXJzYWwgZGF0YSwgd2h5IHRobz9cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuaXZlcnNhbCBkYXRhIG5vdCBmb3VuZCBmb3IgcmVzb3VyY2UgJHt0eXBlfS4gSXQgbWlnaHQgYmUgYSBidWcuYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzb3VyY2VNYXAuZ2V0KHR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHB1YmxpYyBHZXRSZXNvdXJjZUFtb3VudCh0eXBlOiBSZXNvdXJjZVR5cGUpXG4gICAge1xuICAgICAgICBpZiAodGhpcy5yZXNvdXJjZU1hcC5oYXModHlwZSkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc291cmNlTWFwLmdldCh0eXBlKS5jdXJyZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHB1YmxpYyBTZXR1cEVudmlyb25tZW50KClcbiAgICB7XG4gICAgICAgIHRoaXMuZW52aXJvbm1lbnQuYW1vdW50ID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBpbmZvIG9mIHRoaXMucmVzb3VyY2VNYXBFbnYudmFsdWVzKCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBkYXRhID0gdGhpcy5yZXNvdXJjZURhdGEuZ2V0KGluZm8udHlwZSk7XG4gICAgICAgICAgICBpZiAoZGF0YS5lbnYgPT09IHRydWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnZpcm9ubWVudC5hbW91bnQgKz0gaW5mby5jdXJyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZW52aXJvbm1lbnQuYW1vdW50ID4gdGhpcy5lbnZpcm9ubWVudC5jYXBhY2l0eSlcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRW52IGFtb3VudCA+IGNhcGFjaXR5LiBBdXRvLXJlYmFsYW5jZSBub3QgaW1wbGVtZW50ZWQuIFRPRE86IGltcGxlbWVudCB0aGlzLlwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gUmVzb3VyY2Ugc3lzdGVtc1xuXG4gICAgcHVibGljIHNSZWZyZXNoUmVzb3VyY2UoKVxuICAgIHtcbiAgICAgICAgZm9yIChjb25zdCBpbmZvIG9mIHRoaXMucmVzb3VyY2VNYXAudmFsdWVzKCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGluZm8udGlja01vZGlmeSA9IDA7XG5cbiAgICAgICAgICAgIGxldCB0eXBlID0gaW5mby50eXBlO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzb3VyY2VEYXRhLmhhcyh0eXBlKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHRoaXMucmVzb3VyY2VEYXRhLmdldCh0eXBlKTtcbiAgICAgICAgICAgICAgICBsZXQgcmVnZW5BbW91bnQgPSBkYXRhLnJlZ2VuQmFzZSArIGRhdGEucmVnZW5GYWN0b3IgKiBpbmZvLmN1cnJlbnQ7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVnZW5BbW91bnQgPiAxZS01KVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5BZGRSZXNvdXJjZShpbmZvLnR5cGUsIHJlZ2VuQW1vdW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc1VwZGF0ZUVudlRpY2tIaW50KClcbiAgICB7XG4gICAgICAgIGZvciAoY29uc3QgaW5mbyBvZiB0aGlzLnJlc291cmNlTWFwRW52LnZhbHVlcygpKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBVcGRhdGUgdGlja01vZGlmeSBoaW50cyBmb3IgVUlcbiAgICAgICAgICAgIGluZm8udGlja01vZGlmeUVudkhpbnQgPSBpbmZvLnRpY2tNb2RpZnk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc0FkanVzdEVudmlyb25tZW50KClcbiAgICB7XG4gICAgICAgIGxldCB0b3RhbEluYyA9IDAsIHRvdGFsRGVjID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBpbmZvIG9mIHRoaXMucmVzb3VyY2VNYXBFbnYudmFsdWVzKCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIC8vIENvbGxlY3QgYWxsIHRpY2tNb2RpZnknc1xuICAgICAgICAgICAgaWYgKGluZm8udGlja01vZGlmeSA+IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdG90YWxJbmMgKz0gaW5mby50aWNrTW9kaWZ5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRvdGFsRGVjICs9IC0gaW5mby50aWNrTW9kaWZ5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGluYyA9IHRvdGFsSW5jO1xuICAgICAgICBpZiAodGhpcy5lbnZpcm9ubWVudC5hbW91bnQgLSB0b3RhbERlYyArIHRvdGFsSW5jID4gdGhpcy5lbnZpcm9ubWVudC5jYXBhY2l0eSlcbiAgICAgICAge1xuICAgICAgICAgICAgaW5jID0gdGhpcy5lbnZpcm9ubWVudC5jYXBhY2l0eSAtIHRoaXMuZW52aXJvbm1lbnQuYW1vdW50ICsgdG90YWxEZWM7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcmVkdWNlbWVudCA9IDEgLSAoaW5jIC8gdG90YWxJbmMpO1xuICAgICAgICBmb3IgKGNvbnN0IGluZm8gb2YgdGhpcy5yZXNvdXJjZU1hcEVudi52YWx1ZXMoKSlcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gQ29sbGVjdCBhbGwgdGlja01vZGlmeSdzXG4gICAgICAgICAgICBpZiAoaW5mby50aWNrTW9kaWZ5ID4gMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpbmZvLmN1cnJlbnQgLT0gaW5mby50aWNrTW9kaWZ5ICogcmVkdWNlbWVudDtcbiAgICAgICAgICAgICAgICBpbmZvLnRpY2tNb2RpZnkgLT0gaW5mby50aWNrTW9kaWZ5ICogcmVkdWNlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzVHJhbnNmZXJVbml2ZXJzYWxSZXNvdXJjZSgpXG4gICAge1xuICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgbWVcbiAgICB9XG59XG4iLCJpbXBvcnQgTG9jYWxpemVkU3RyaW5ncyBmcm9tICdsb2NhbGl6ZWQtc3RyaW5ncydcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEN1c3RvbUludGVyZmFjZUxhbmd1YWdlKCkgXG57XG4gICAgcmV0dXJuIFwiemhcIjtcbn1cblxudHlwZSBpMThuRGljdGlvbmFyeSA9IHsgW2luZGV4OiBzdHJpbmddOiBzdHJpbmcgfVxuXG5sZXQgc3RyaW5nczpSZWNvcmQ8c3RyaW5nLCBpMThuRGljdGlvbmFyeT4gPSB7XG4gICAgZW46IHtcbiAgICAgICAgckZydWl0OiBcIldpbGQgZnJ1aXRzXCIsXG4gICAgfSxcbiAgICB6aDoge1xuICAgICAgICB0aWNrOiBcIuWIu1wiLFxuICAgICAgICBzZWM6IFwi56eSXCIsXG4gICAgICAgIG1pbjogXCLliIZcIixcblxuICAgICAgICByT2FrOiBcIuapoeagkVwiLFxuICAgICAgICByUGljZWE6IFwi5LqR5p2JXCIsXG4gICAgICAgIHJTaHJ1YjogXCLngYzmnKjkuJtcIixcbiAgICAgICAgckdyYXNzOiBcIuiNiVwiLFxuXG4gICAgICAgIHJGcnVpdDogXCLph47mnpxcIixcbiAgICAgICAgcldvb2Q6IFwi5pyo5p2QXCIsXG4gICAgICAgIHJCcmFuY2g6IFwi5qCR5p6dXCIsXG4gICAgICAgIHJDdWx0dXJlOiBcIuaWh+WMllwiLFxuICAgICAgICBcbiAgICAgICAgYlBsYW50YXRpb246IFwi56eN5qSN5ZutXCIsXG4gICAgICAgIGJGYXJtOiBcIuWGnOWculwiLFxuICAgICAgICBiTG9nZ2luZ0NhbXA6IFwi5LyQ5pyo5Zy6XCIsXG4gICAgICAgIGJGb3Jlc3RLZWVwZXI6IFwi5oqk5p6X5ZGY5bCP5bGLXCIsXG4gICAgICAgIGJCb25maXJlOiBcIuevneeBq+WghlwiLFxuICAgICAgICBiSG91c2U6IFwi5pyo5bGLXCIsXG4gICAgICAgIGJHdWlsZDogXCLmjqLpmanlt6XkvJpcIixcbiAgICAgICAgYkF0ZWxpZXI6IFwi6aOO6L2m5bel5oi/XCIsXG4gICAgICAgIGJMaWJyYXJ5OiBcIuWbvuS5pummhlwiLFxuICAgICAgICBiQWNhZGVteTogXCLlrabpmaJcIixcbiAgICAgICAgYlRoZWF0cmU6IFwi5Ymn6ZmiXCIsXG4gICAgICAgIGJNaW5lOiBcIuefv+S6lVwiLFxuICAgICAgICBcbiAgICAgICAgYUdhdGhlckZydWl0OiBcIuaUtumbhuS4gOS6m+mHjuaenFwiLFxuICAgICAgICBhR2F0aGVyQnJhbmNoOiBcIuaUtumbhuS4gOS6m+agkeaenVwiXG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZXRTdHJpbmdzKGtleTogc3RyaW5nKTogc3RyaW5nXG57XG4gICAgcmV0dXJuIHN0cmluZ3NbZ2V0Q3VzdG9tSW50ZXJmYWNlTGFuZ3VhZ2UoKV1ba2V5XSB8fCBrZXk7XG59XG5cbmV4cG9ydCB7c3RyaW5ncywgZ2V0U3RyaW5nc307XG4iLCJpbXBvcnQgeyBUb3duIH0gZnJvbSBcIi4vdG93blwiO1xyXG5pbXBvcnQgeyBnZXRTdHJpbmdzIGFzIEwgfSBmcm9tIFwiLi9pMThuL2kxOG5cIjtcclxuaW1wb3J0IHsgSGFuZGxlQWN0aXZpdHkgfSBmcm9tIFwiLi9hY3Rpdml0eVwiO1xyXG5pbXBvcnQgeyBCdWlsZGluZ1R5cGUgfSBmcm9tIFwiLi9idWlsZGluZ1wiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBCdWlsZGluZ0luZm9QYW5lbFxyXG57XHJcbiAgICBjb250YWluZXI6IEhUTUxFbGVtZW50LFxyXG4gICAgY29uc3RydWN0QnRuOiBIVE1MQnV0dG9uRWxlbWVudCxcclxuICAgIG5hbWU6IEhUTUxFbGVtZW50LFxyXG4gICAgY291bnQ6IEhUTUxFbGVtZW50XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVzb3VyY2VJbmZvUGFuZWxcclxue1xyXG4gICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuICAgIG5hbWU6IEhUTUxFbGVtZW50LFxyXG4gICAgc3RhY2s6IEhUTUxFbGVtZW50LFxyXG4gICAgcmVnZW46IEhUTUxFbGVtZW50LFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVUlcclxue1xyXG4gICAgYXJ0UmVzb3VyY2VEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Jlc291cmNlcyAjYXJ0UmVzb3VyY2VzXCIpO1xyXG4gICAgZW52UmVzb3VyY2VEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Jlc291cmNlcyAjZW52UmVzb3VyY2VzXCIpO1xyXG4gICAgcmVzb3VyY2VQYW5lbHM6IE1hcDxzdHJpbmcsIFJlc291cmNlSW5mb1BhbmVsPiA9IG5ldyBNYXA8c3RyaW5nLCBSZXNvdXJjZUluZm9QYW5lbD4oKTtcclxuICAgIHJlc291cmNlVGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Jlc291cmNlc1wiKS5xdWVyeVNlbGVjdG9yKFwidGVtcGxhdGVcIik7XHJcblxyXG4gICAgYWN0aXZpdHlEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FjdGl2aXRpZXNcIik7XHJcbiAgICBhY3Rpdml0eUJ1dHRvbnM6IE1hcDxzdHJpbmcsIEhUTUxCdXR0b25FbGVtZW50PiA9IG5ldyBNYXA8c3RyaW5nLCBIVE1MQnV0dG9uRWxlbWVudD4oKTtcclxuXHJcbiAgICBidWlsZGluZ0luZm9EaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2J1aWxkaW5nc1wiKTtcclxuICAgIGJ1aWxkaW5nSW5mb1BhbmVsczogTWFwPHN0cmluZywgQnVpbGRpbmdJbmZvUGFuZWw+ID0gbmV3IE1hcDxzdHJpbmcsIEJ1aWxkaW5nSW5mb1BhbmVsPigpO1xyXG4gICAgYnVpbGRpbmdJbmZvVGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQgPSB0aGlzLmJ1aWxkaW5nSW5mb0Rpdi5xdWVyeVNlbGVjdG9yKFwidGVtcGxhdGVcIik7XHJcblxyXG4gICAgdG9vbHRpcERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdG9vbHRpcFwiKTtcclxuXHJcbiAgICB0b3duOiBUb3duO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRvd246IFRvd24pXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy50b3duID0gdG93bjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgSW5pdCgpXHJcbiAgICB7XHJcbiAgICAgICAgdGhpcy50b3duLnJlc291cmNlcy5vblJlc291cmNlQWRkZWQuYWRkKChpKSA9PlxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlc291cmNlUGFuZWxzLmhhcyhpLnR5cGUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZWxlbSA9ICh0aGlzLnJlc291cmNlVGVtcGxhdGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQpLnF1ZXJ5U2VsZWN0b3IoXCJkaXZcIik7XHJcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ3Jlc291cmNlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHJEYXRhID0gdGhpcy50b3duLnJlc291cmNlcy5yZXNvdXJjZURhdGEuZ2V0KGkudHlwZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAockRhdGEuZW52ID09PSB0cnVlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW52UmVzb3VyY2VEaXYuYXBwZW5kQ2hpbGQoZWxlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcnRSZXNvdXJjZURpdi5hcHBlbmRDaGlsZChlbGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgQWRkZWQgUmVzb3VyY2UgJHtlLmlkfWApO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCByZXNvdXJjZVBhbmVsID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogZWxlbSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKSBhcyBIVE1MRWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICBzdGFjazogZWxlbS5xdWVyeVNlbGVjdG9yKFwiI3N0YWNrXCIpIGFzIEhUTUxFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2VuOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoXCIjcmVnZW5cIikgYXMgSFRNTEVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZVBhbmVscy5zZXQoaS50eXBlLCByZXNvdXJjZVBhbmVsKTtcclxuICAgICAgICAgICAgICAgIHJlc291cmNlUGFuZWwubmFtZS5pbm5lckhUTUwgPSBgJHtMKCdyJyArIGkudHlwZSl9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMudG93bi5hcmNoZXR5cGVzLmFjdGl2aXRpZXMub25FbnRpdHlBZGRlZC5hZGQoKGUpID0+XHJcbiAgICAgICAgeyBcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmFjdGl2aXR5QnV0dG9ucy5oYXMoZS5pZCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2aXR5Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2aXR5RGl2LmFwcGVuZENoaWxkKGVsZW0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGVsZW0ub25jbGljayA9IChldmVudCkgPT4geyBIYW5kbGVBY3Rpdml0eShlLCB0aGlzLnRvd24pIH1cclxuICAgICAgICAgICAgICAgIGVsZW0uaW5uZXJIVE1MID0gYCR7TChlLmRpc3BsYXlOYW1lID09IG51bGwgPyBlLmlkIDogZS5kaXNwbGF5TmFtZSl9YDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgQWRkZWQgQWN0aXZpdHkgJHtlLmlkfWApO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZpdHlCdXR0b25zLnNldChlLmlkLCBlbGVtKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG93bi53b3JsZC5hZGRDb21wb25lbnQoZSwgXCJIVE1MRWxlbWVudFwiLCB7IGVsZW06IGVsZW0sIHByZXZEaXNwbGF5OiBlbGVtLnN0eWxlLmRpc3BsYXkgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy50b3duLmFyY2hldHlwZXMuYnVpbGRpbmdJbmZvLm9uRW50aXR5QWRkZWQuYWRkKChlKSA9PlxyXG4gICAgICAgIHsgXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5idWlsZGluZ0luZm9QYW5lbHMuaGFzKGUuaWQpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW0gPSAodGhpcy5idWlsZGluZ0luZm9UZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudCkucXVlcnlTZWxlY3RvcihcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRpbmdJbmZvRGl2LmFwcGVuZENoaWxkKGVsZW0pO1xyXG4gICAgICAgICAgICAgICAgZWxlbS5pZCA9ICdpbmZvLScgKyBlLmJ1aWxkaW5nSW5mby50eXBlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBwYW5lbDogQnVpbGRpbmdJbmZvUGFuZWwgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBlbGVtLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0cnVjdEJ0bjogZWxlbS5xdWVyeVNlbGVjdG9yKFwiI2NvbnN0cnVjdFwiKSxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogZWxlbS5xdWVyeVNlbGVjdG9yKFwiI2NvdW50XCIpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IElmIGNhbiBjb25zdHJ1Y3RcclxuICAgICAgICAgICAgICAgIHBhbmVsLmNvbnN0cnVjdEJ0bi5vbmNsaWNrID0gKGV2ZW50KSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIEhhbmRsZUFjdGl2aXR5KGUsIHRoaXMudG93bik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5TaG93QnVpbGRpbmdUb29sdGlwKGUuYnVpbGRpbmdJbmZvLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFuZWwuY29uc3RydWN0QnRuLm9ucG9pbnRlcmVudGVyID0gKGV2ZW50KSA9PlxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuU2hvd0J1aWxkaW5nVG9vbHRpcChlLmJ1aWxkaW5nSW5mby50eXBlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHBhbmVsLmNvbnN0cnVjdEJ0bi5vbnBvaW50ZXJsZWF2ZSA9IChldmVudCkgPT5cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkhpZGVUb29sdGlwKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcGFuZWwubmFtZS5pbm5lckhUTUwgPSBMKCdiJyArIGUuYnVpbGRpbmdJbmZvLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgcGFuZWwuY291bnQuaW5uZXJIVE1MID0gXCIwXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYEFkZGVkIEFjdGl2aXR5ICR7ZS5pZH1gKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2aXR5QnV0dG9ucy5zZXQoZS5pZCwgcGFuZWwuY29uc3RydWN0QnRuKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudG93bi53b3JsZC5hZGRDb21wb25lbnQoZSwgXCJIVE1MRWxlbWVudFwiLCB7IGVsZW06IHBhbmVsLmNvbnRhaW5lciwgcHJldkRpc3BsYXk6IHBhbmVsLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5IH0pO1xyXG4gICAgICAgICAgICAgICAgZS5idWlsZGluZ0luZm8udWkgPSBwYW5lbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBPbiByZW1vdmVcclxuXHJcbiAgICAgICAgLy8gVmlzaWJpbGl0eVxyXG4gICAgICAgIHRoaXMudG93bi5hcmNoZXR5cGVzLmhpZGRlbkhUTUwub25FbnRpdHlBZGRlZC5hZGQoKGUpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZS5IVE1MRWxlbWVudC5lbGVtLnN0eWxlLmRpc3BsYXkgIT0gJ25vbmUnKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlLkhUTUxFbGVtZW50LnByZXZEaXNwbGF5ID0gZS5IVE1MRWxlbWVudC5lbGVtLnN0eWxlLmRpc3BsYXk7XHJcbiAgICAgICAgICAgICAgICBlLkhUTUxFbGVtZW50LmVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnRvd24uYXJjaGV0eXBlcy52aXNpYmxlSFRNTC5vbkVudGl0eUFkZGVkLmFkZCgoZSkgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGUuSFRNTEVsZW1lbnQuZWxlbS5zdHlsZS5kaXNwbGF5ID0gZS5IVE1MRWxlbWVudC5wcmV2RGlzcGxheTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gRm9yIGRlYnVnZ2luZ1xyXG4gICAgICAgIHRoaXMudG93bi53b3JsZC5vbkVudGl0eUFkZGVkLmFkZCgoZSkgPT5cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBZGRlZCAke2UuaWR9YCwgZSk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIFRvb2x0aXBzXHJcblxyXG4gICAgcHVibGljIFNob3dUb29sdGlwKHRpcDogc3RyaW5nKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMudG9vbHRpcERpdi5pbm5lckhUTUwgPSB0aXA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIEhpZGVUb29sdGlwKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLnRvb2x0aXBEaXYuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgU2hvd0J1aWxkaW5nVG9vbHRpcCh0eXBlOiBCdWlsZGluZ1R5cGUpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IHRpcCA9IFwiXCI7XHJcbiAgICAgICAgbGV0IGNvc3QgPSB0aGlzLnRvd24uYnVpbGRpbmdzLkdldEJ1aWxkaW5nQ29zdCh0eXBlKTtcclxuICAgICAgICBjb3N0LmZvckVhY2goKHgpID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aXAgKz0gYCR7TCgncicgKyB4LnR5cGUpfSB4JHt4LmFtb3VudC50b0ZpeGVkKDIpfTxici8+YDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5TaG93VG9vbHRpcCh0aXApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBVcGRhdGUoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc1VwZGF0ZVJlc291cmNlcygpO1xyXG4gICAgICAgIHRoaXMuc1VwZGF0ZUJ1aWxkaW5nSW5mbygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzVXBkYXRlUmVzb3VyY2VzKClcclxuICAgIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGluZm8gb2YgdGhpcy50b3duLnJlc291cmNlcy5yZXNvdXJjZU1hcC52YWx1ZXMoKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBlbGVtID0gdGhpcy5yZXNvdXJjZVBhbmVscy5nZXQoaW5mby50eXBlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbmZvLm1heCA+IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVsZW0uc3RhY2suaW5uZXJIVE1MID0gYCR7aW5mby5jdXJyZW50LnRvRml4ZWQoMil9IC8gJHtpbmZvLm1heC50b0ZpeGVkKDApfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbGVtLnN0YWNrLmlubmVySFRNTCA9IGAke2luZm8uY3VycmVudC50b0ZpeGVkKDIpfWA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCB0aWNrTW9kID0gaW5mby50aWNrTW9kaWZ5RW52SGludDtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aWNrTW9kID09PSAndW5kZWZpbmVkJykgeyB0aWNrTW9kID0gaW5mby50aWNrTW9kaWZ5OyB9XHJcblxyXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnModGlja01vZCkgPiAxZS04KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbiA9IHRpY2tNb2Q7XHJcbiAgICAgICAgICAgICAgICBlbGVtLnJlZ2VuLmlubmVySFRNTCA9IGAkeyhuIDwgMCA/IFwiXCIgOiBcIitcIikgKyBuLnRvRml4ZWQoNCl9IC8gJHtMKCd0aWNrJyl9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVsZW0ucmVnZW4uaW5uZXJIVE1MID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVG9nZ2xlIHZpc2liaWxpdHlcclxuICAgICAgICAgICAgaWYgKGluZm8udmlzaWJsZSA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGVsZW0uY29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbGVtLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzVXBkYXRlQnVpbGRpbmdJbmZvKClcclxuICAgIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGVudGl0eSBvZiB0aGlzLnRvd24uYXJjaGV0eXBlcy5idWlsZGluZ0luZm8pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50b3duLmJ1aWxkaW5ncy5Jc0J1aWxkaW5nVW5sb2NrZWQoZW50aXR5LmJ1aWxkaW5nSW5mby50eXBlKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3duLndvcmxkLnJlbW92ZUNvbXBvbmVudChlbnRpdHksIFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbnRpdHkuYnVpbGRpbmdJbmZvLnVpLmNvdW50LmlubmVySFRNTCA9IGAke3RoaXMudG93bi5idWlsZGluZ3MuYXJjaGV0eXBlc1tlbnRpdHkuYnVpbGRpbmdJbmZvLnR5cGVdLnNpemV9YDtcclxuICAgICAgICAgICAgLy8gTm90IG5lY2Vzc2FyeT9cclxuICAgICAgICAgICAgLy8gZWxzZVxyXG4gICAgICAgICAgICAvLyB7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLnRvd24ud29ybGQuYWRkQ29tcG9uZW50KGVudGl0eSwgXCJoaWRkZW5cIiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGNhbiBiZSBjb25zdHJ1Y3RlZFxyXG4gICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvd24ucmVzb3VyY2VzLklzQWxsUmVzb3VyY2VFbm91Z2goXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3duLmJ1aWxkaW5ncy5HZXRCdWlsZGluZ0Nvc3QoZW50aXR5LmJ1aWxkaW5nSW5mby50eXBlKVxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBlbnRpdHkuYnVpbGRpbmdJbmZvLnVpLmNvbnN0cnVjdEJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZW50aXR5LmJ1aWxkaW5nSW5mby51aS5jb25zdHJ1Y3RCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRPRE86IFJlbW92ZSBidXR0b25zIGlmIGFjdGl2aXR5IGhhcyBiZWVuIHJlbW92ZWRcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBBcmNoZXR5cGVCdWNrZXQsIFdpdGggfSBmcm9tIFwibWluaXBsZXhcIjtcbmltcG9ydCB7IEVudGl0eSB9IGZyb20gXCIuL2VudGl0eVwiO1xuaW1wb3J0IHsgUmVzb3VyY2VUeXBlIH0gZnJvbSBcIi4vcmVzb3VyY2VcIlxuaW1wb3J0IHsgVG93biB9IGZyb20gXCIuL3Rvd25cIlxuaW1wb3J0IHsgQWRkQWN0aXZpdHlFbnRyeSwgYWN0aXZpdGllcyB9IGZyb20gXCIuL2FjdGl2aXR5XCI7XG5pbXBvcnQgeyBCdWlsZGluZ0luZm9QYW5lbCB9IGZyb20gXCIuL1VJXCI7XG5pbXBvcnQgeyBCdWlsZGluZ0RhdGEgfSBmcm9tIFwiLi9nYW1lZGF0YVwiO1xuXG5leHBvcnQgdHlwZSBCdWlsZGluZyA9IHtcbiAgICBpc0J1aWxkaW5nPzogdHJ1ZSxcbiAgICBidWlsZGluZ0luZm8/OiB7IHR5cGU6IEJ1aWxkaW5nVHlwZSwgdWk/OiBCdWlsZGluZ0luZm9QYW5lbCB9LFxuICAgIENoYW5nZVJlc291cmNlUGVyVGljaz86IHtcbiAgICAgICAgcmVxdWlyZXM6IHsgdHlwZTogUmVzb3VyY2VUeXBlLCBhbW91bnQ6IG51bWJlciB9W10sXG4gICAgICAgIHByb2R1Y3RzOiB7IHR5cGU6IFJlc291cmNlVHlwZSwgYW1vdW50OiBudW1iZXIgfVtdXG4gICAgfVxufSAmIFBhcnRpYWw8dHlwZW9mIEJ1aWxkaW5nVHlwZXNEZWY+XG5cbi8vIE1lYW5pbmdzIGluIGVudGl0aWVzOiBWYXJpYW50IG9mIGVhY2ggYnVpbGRpbmcgdHlwZVxuLy8gQnVpbGRpbmcgbGV2ZWwgYXJlIGdsb2JhbC5cbmV4cG9ydCBjb25zdCBCdWlsZGluZ1R5cGVzRGVmID0ge1xuICAgIFBsYW50YXRpb246IHt9LFxuICAgIEZhcm06IHt9LFxuICAgIExvZ2dpbmdDYW1wOiB7fSxcbiAgICBGb3Jlc3RLZWVwZXI6IHt9LFxuICAgIEJvbmZpcmU6IHt9LFxuICAgIEhvdXNlOiB7fSxcbiAgICBHdWlsZDoge30sXG4gICAgQXRlbGllcjoge30sXG4gICAgQWNhZGVteToge30sXG4gICAgTWluZToge31cbn1cbmV4cG9ydCB0eXBlIEJ1aWxkaW5nVHlwZSA9IGtleW9mIHR5cGVvZiBCdWlsZGluZ1R5cGVzRGVmO1xuXG5leHBvcnQgY2xhc3MgQnVpbGRpbmdIZWxwZXJcbntcbiAgICBwdWJsaWMgdG93bjogVG93bjtcbiAgICBwdWJsaWMgYXJjaGV0eXBlczogUGFydGlhbDxSZWNvcmQ8QnVpbGRpbmdUeXBlLCBBcmNoZXR5cGVCdWNrZXQ8V2l0aDxFbnRpdHksIFwiaXNCdWlsZGluZ1wiIHwgQnVpbGRpbmdUeXBlPj4+PiA9IHt9O1xuICAgIHB1YmxpYyBkYXRhOiBNYXA8QnVpbGRpbmdUeXBlLCBCdWlsZGluZ0RhdGE+ID0gbmV3IE1hcDxCdWlsZGluZ1R5cGUsIEJ1aWxkaW5nRGF0YT4oKTtcblxuICAgIGNvbnN0cnVjdG9yKHRvd246IFRvd24pXG4gICAge1xuICAgICAgICB0aGlzLnRvd24gPSB0b3duO1xuICAgIH1cblxuICAgIHB1YmxpYyBJbml0KClcbiAgICB7XG4gICAgICAgIC8vIFJlZ2lzdGVyIGFyY2hldHlwZXMgZm9yIGVhY2ggYnVpbGRpbmcgdHlwZVxuICAgICAgICAvLyBUb28gbWFnaWNhbCAuLi4gd2hhdCB0aGUgaGVsbCBsb2xcbiAgICAgICAgKE9iamVjdC5rZXlzKEJ1aWxkaW5nVHlwZXNEZWYpIGFzIEFycmF5PEJ1aWxkaW5nVHlwZT4pLmZvckVhY2goXG4gICAgICAgICAgICAodmFsdWUpID0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5hcmNoZXR5cGVzW3ZhbHVlXSA9IHRoaXMudG93bi53b3JsZC53aXRoKFwiaXNCdWlsZGluZ1wiLCB2YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBhZGQgYWN0aXZpdGllcyBmb3IgY29uc3RydWN0IHRoaXMgdHlwZSBvZiBidWlsZGluZ3NcbiAgICAgICAgICAgICAgICAvLyBBZGRBY3Rpdml0eUVudHJ5KHRoaXMudG93bi53b3JsZCwge1xuICAgICAgICAgICAgICAgIC8vICAgICBpZDogXCJhQ29uc3RydWN0XCIgKyB2YWx1ZSxcbiAgICAgICAgICAgICAgICAvLyAgICAgaGlkZGVuOiB0cnVlLFxuICAgICAgICAgICAgICAgIC8vICAgICBVc2VSZXNvdXJjZU9uY2U6IHRoaXMuR2V0QnVpbGRpbmdDb3N0KHZhbHVlKSxcbiAgICAgICAgICAgICAgICAvLyAgICAgQ29uc3RydWN0QnVpbGRpbmc6IHsgdHlwZTogdmFsdWUgfVxuICAgICAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMudG93bi53b3JsZC5hZGQoe1xuICAgICAgICAgICAgICAgICAgICBpZDogXCJhQ29uc3RydWN0XCIgKyB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRpbmdJbmZvOiB7IHR5cGU6IHZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgIGhpZGRlbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIFVzZVJlc291cmNlT25jZTogdGhpcy5HZXRCdWlsZGluZ0Nvc3QodmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICBDb25zdHJ1Y3RCdWlsZGluZzogeyB0eXBlOiB2YWx1ZSB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgQWRkQnVpbGRpbmcocHJvdG90eXBlOiBhbnkpXG4gICAge1xuICAgICAgICBsZXQgZW50aXR5OiBhbnkgPSB7fTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihlbnRpdHksIHByb3RvdHlwZSk7XG5cbiAgICAgICAgZW50aXR5LmlzQnVpbGRpbmcgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiB0aGlzLnRvd24ud29ybGQuYWRkKGVudGl0eSk7XG4gICAgfVxuXG4gICAgcHVibGljIEdldEJ1aWxkaW5nUHJvdG90eXBlKHR5cGU6IEJ1aWxkaW5nVHlwZSlcbiAgICB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZ2V0KHR5cGUpLnByb3RvdHlwZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgR2V0QnVpbGRpbmdDb3N0KHR5cGU6IEJ1aWxkaW5nVHlwZSk6IHt0eXBlOiBSZXNvdXJjZVR5cGUsIGFtb3VudDogbnVtYmVyfVtdXG4gICAge1xuICAgICAgICBsZXQgbkJ1aWxkaW5ncyA9IHRoaXMuYXJjaGV0eXBlc1t0eXBlXS5zaXplO1xuICAgICAgICBsZXQgYmFzZUNvc3QgPSB0aGlzLmRhdGEuZ2V0KHR5cGUpLmJ1aWxkQ29zdDtcbiAgICAgICAgcmV0dXJuIGJhc2VDb3N0Lm1hcCgoYmMpID0+XG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB7IHR5cGU6IGJjLnR5cGUsIGFtb3VudDogYmMuYmFzZSAqIE1hdGgucG93KGJjLmdyb3d0aCwgbkJ1aWxkaW5ncykgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIElzQnVpbGRpbmdVbmxvY2tlZCh0eXBlOiBCdWlsZGluZ1R5cGUpOiBib29sZWFuXG4gICAge1xuICAgICAgICBsZXQgY29uZGl0aW9uID0gdGhpcy5kYXRhLmdldCh0eXBlKS52aXNpYmxlUmVxdWlyZW1lbnRzO1xuICAgICAgICBsZXQgcmVzdWx0ID0gdHJ1ZTtcblxuICAgICAgICBpZiAoY29uZGl0aW9uICE9IGZhbHNlKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25kaXRpb24uZm9yRWFjaCh4ID0+XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgJiYgdGhpcy50b3duLnJlc291cmNlcy5HZXRSZXNvdXJjZSh4LnR5cGUpLnZpc2libGU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gY29uZGl0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIEJ1aWxkaW5nIHN5c3RlbXNcblxuICAgIHB1YmxpYyBzTW9kaWZ5UmVzb3VyY2VzKClcbiAgICB7XG4gICAgICAgIGZvciAoY29uc3QgZW50aXR5IG9mIHRoaXMudG93bi5hcmNoZXR5cGVzLnJlc291cmNlQnVpbGRpbmdzKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBjb25kaXRpb25zIG1ldCAoZW5vdWdoIGlucHV0cyBhbmQgb3V0cHV0IHNwYWNlcylcbiAgICAgICAgICAgIGxldCBtaW5QZXJjZW50YWdlID0gMS4wO1xuXG4gICAgICAgICAgICAvLyBIYW5kbGUgcmVxdWlyZW1lbnRzXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgZW50aXR5LkNoYW5nZVJlc291cmNlUGVyVGljay5yZXF1aXJlcylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBtaW5QZXJjZW50YWdlID0gTWF0aC5taW4obWluUGVyY2VudGFnZSwgdGhpcy50b3duLnJlc291cmNlcy5HZXRSZXNvdXJjZUFtb3VudChsaW5lLnR5cGUpIC8gKGxpbmUuYW1vdW50KSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEhhbmRsZSBwcm9kdWN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGVudGl0eS5DaGFuZ2VSZXNvdXJjZVBlclRpY2sucHJvZHVjdHMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IHJlcyA9IHRoaXMudG93bi5yZXNvdXJjZXMuR2V0UmVzb3VyY2UobGluZS50eXBlKTtcbiAgICAgICAgICAgICAgICBtaW5QZXJjZW50YWdlID0gTWF0aC5taW4obWluUGVyY2VudGFnZSwgKHJlcy5tYXggLSByZXMuY3VycmVudCkgLyAobGluZS5hbW91bnQpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG1pblBlcmNlbnRhZ2UgPD0gMWUtNSkgeyBjb250aW51ZTsgfVxuXG4gICAgICAgICAgICAvLyBDb25zdW1lIHJlcXVpcmVtZW50c1xuICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGVudGl0eS5DaGFuZ2VSZXNvdXJjZVBlclRpY2sucmVxdWlyZXMpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy50b3duLnJlc291cmNlcy5BZGRSZXNvdXJjZShsaW5lLnR5cGUsIC1saW5lLmFtb3VudCAqIG1pblBlcmNlbnRhZ2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBQcm9kdWNlIHByb2R1Y3RzXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgZW50aXR5LkNoYW5nZVJlc291cmNlUGVyVGljay5wcm9kdWN0cylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvd24ucmVzb3VyY2VzLkFkZFJlc291cmNlKGxpbmUudHlwZSwgbGluZS5hbW91bnQgKiBtaW5QZXJjZW50YWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IFJlc291cmNlVHlwZSwgUmVzb3VyY2VUeXBlcyB9IGZyb20gXCIuL3Jlc291cmNlXCI7XHJcbmltcG9ydCB7IFRvd24gfSBmcm9tIFwiLi90b3duXCI7XHJcbmltcG9ydCB7IHBhcnNlIGFzIHBhcnNlQ1NWIH0gZnJvbSBcInBhcGFwYXJzZVwiO1xyXG5cclxuaW1wb3J0IHsgQnVpbGRpbmdUeXBlIH0gZnJvbSBcIi4vYnVpbGRpbmdcIjtcclxuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4vZW50aXR5XCI7XHJcblxyXG5mdW5jdGlvbiBMb2FkRmlsZShwYXRoOiBzdHJpbmcpXHJcbntcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXMsIHJlaikgPT5cclxuICAgIHtcclxuICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCAmJiB4aHIuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgcmVzKHhoci5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHhoci5vcGVuKCdHRVQnLCBwYXRoKTtcclxuICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgfSkgICBcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVzb3VyY2VEYXRhXHJcbntcclxuICAgIHR5cGU/OiBSZXNvdXJjZVR5cGUsXHJcbiAgICBpbml0aWFsTWF4U3RhY2tzPzogbnVtYmVyLFxyXG4gICAgcmVnZW5CYXNlPzogbnVtYmVyLFxyXG4gICAgcmVnZW5GYWN0b3I/OiBudW1iZXIsXHJcbiAgICBjb2xvcj86IHN0cmluZyxcclxuICAgIGluaXRpYWxVTWF4U3RhY2tzPzogbnVtYmVyLFxyXG4gICAgaW5pdGlhbFVUcmFuc2ZlclNwZWVkPzogbnVtYmVyLFxyXG4gICAgXHJcbiAgICBlbnY/OiBib29sZWFuLFxyXG59XHJcbmV4cG9ydCB0eXBlIFJlc291cmNlRGF0YVNoZWV0ID0gUmVjb3JkPFJlc291cmNlVHlwZSwgUmVzb3VyY2VEYXRhPjtcclxuXHJcbmNvbnN0IHJlc291cmNlRGF0YURlZmF1bHRzOiBSZXNvdXJjZURhdGEgPSB7XHJcbiAgICBpbml0aWFsTWF4U3RhY2tzOiAwLFxyXG4gICAgcmVnZW5CYXNlOiAwLFxyXG4gICAgcmVnZW5GYWN0b3I6IDAsXHJcbiAgICBjb2xvcjogXCIjMDAwMDAwXCIsXHJcbiAgICBpbml0aWFsVU1heFN0YWNrczogMCxcclxuICAgIGluaXRpYWxVVHJhbnNmZXJTcGVlZDogMCxcclxuICAgIGVudjogZmFsc2VcclxufTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJ1aWxkaW5nRGF0YVxyXG57XHJcbiAgICAvLyBIb3cgbXVjaCB3aWxsIHRoZSBidWlsZGluZyBjb3N0P1xyXG4gICAgYnVpbGRDb3N0Pzoge1xyXG4gICAgICAgIHR5cGU6IFJlc291cmNlVHlwZSxcclxuICAgICAgICBiYXNlOiBudW1iZXIsXHJcblxyXG4gICAgICAgIC8vIEFjdHVhbCBjb3N0ID0gYmFzZSAqIHBvdyhncm93dGgsICNidWlsZGluZ3MpXHJcbiAgICAgICAgZ3Jvd3RoPzogbnVtYmVyLFxyXG4gICAgfVtdLFxyXG4gICAgZ3Jvd3RoQWxsPzogbnVtYmVyLFxyXG5cclxuICAgIC8vIFdoZW4gd2lsbCB0aGlzIGJ1aWxkaW5nIGJlIHZpc2libGU/XHJcbiAgICB2aXNpYmxlUmVxdWlyZW1lbnRzPzoge1xyXG4gICAgICAgIHR5cGU6IFJlc291cmNlVHlwZVxyXG4gICAgfVtdIHwgZmFsc2UsXHJcblxyXG4gICAgcHJvdG90eXBlPzogRW50aXR5LFxyXG59XHJcbmV4cG9ydCB0eXBlIEJ1aWxkaW5nRGF0YVNoZWV0ID0gUmVjb3JkPEJ1aWxkaW5nVHlwZSwgQnVpbGRpbmdEYXRhPjtcclxuXHJcbmNvbnN0IEJ1aWxkaW5nRGF0YURlZmF1bHRzOiBCdWlsZGluZ0RhdGEgPSB7XHJcbiAgICBidWlsZENvc3Q6IFtdLFxyXG4gICAgZ3Jvd3RoQWxsOiAxLjUsXHJcbiAgICB2aXNpYmxlUmVxdWlyZW1lbnRzOiBbXSxcclxuICAgIHByb3RvdHlwZToge2lkOiBcIlVOS05PV05cIn1cclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIGRzKHM6IHN0cmluZywgZGVmOiBzdHJpbmcpXHJcbntcclxuICAgIHJldHVybiBzID09PSAnJyA/IGRlZiA6IHM7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBMb2FkQWxsRGF0YSh0b3duOiBUb3duKVxyXG57XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT5cclxuICAgIHtcclxuICAgICAgICBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIExvYWRGaWxlKFwiZGF0YS9yZXNvdXJjZXMuanNvblwiKSxcclxuICAgICAgICAgICAgTG9hZEZpbGUoXCJkYXRhL2J1aWxkaW5ncy5qc29uXCIpLFxyXG4gICAgICAgIF0pLnRoZW4oKHBhcnNlZEpTT04pID0+XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAgICAgLy8gUmVzb3VyY2VzXHJcblxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzb3VyY2VKU09OID0gcGFyc2VkSlNPTlswXTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgb2JqOiBSZXNvdXJjZURhdGFTaGVldCA9IEpTT04ucGFyc2UocmVzb3VyY2VKU09OKTtcclxuICAgICAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoXCIkc2NoZW1hXCIpKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSAob2JqIGFzIGFueSlbXCIkc2NoZW1hXCJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdHlwZSBpbiBvYmopXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmUgPSBvYmpbdHlwZSBhcyBSZXNvdXJjZVR5cGVdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdEYXRhOiBSZXNvdXJjZURhdGEgPSB7IHR5cGU6IHR5cGUgYXMgUmVzb3VyY2VUeXBlIH07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG5ld0RhdGEsIHN0cnVjdHVyZWRDbG9uZShyZXNvdXJjZURhdGFEZWZhdWx0cykpO1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24obmV3RGF0YSwgc3RydWN0dXJlZENsb25lKGxpbmUpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdG93bi5yZXNvdXJjZXMucmVzb3VyY2VEYXRhLnNldCh0eXBlIGFzIFJlc291cmNlVHlwZSwgbmV3RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFJlYWQgcmVzb3VyY2UgZGF0YSBvZiAke3R5cGV9OmAsIG5ld0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAgICAgLy8gQnVpbGRpbmdzXHJcblxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYnVpbGRpbmdKU09OID0gcGFyc2VkSlNPTlsxXTtcclxuICAgICAgICAgICAgICAgIGxldCBvYmo6IEJ1aWxkaW5nRGF0YVNoZWV0ID0gSlNPTi5wYXJzZShidWlsZGluZ0pTT04pO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShcIiRzY2hlbWFcIikpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIChvYmogYXMgYW55KVtcIiRzY2hlbWFcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0eXBlIGluIG9iailcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGluZSA9IG9ialt0eXBlIGFzIEJ1aWxkaW5nVHlwZV07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0RhdGE6IEJ1aWxkaW5nRGF0YSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihuZXdEYXRhLCBzdHJ1Y3R1cmVkQ2xvbmUoQnVpbGRpbmdEYXRhRGVmYXVsdHMpKTtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKG5ld0RhdGEsIHN0cnVjdHVyZWRDbG9uZShsaW5lKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbGwgY29zdFxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0RhdGEuYnVpbGRDb3N0LmZvckVhY2goKHgpID0+XHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHguZ3Jvd3RoID09PSAndW5kZWZpbmVkJykgeyB4Lmdyb3d0aCA9IG5ld0RhdGEuZ3Jvd3RoQWxsOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbGwgcHJvdG90eXBlXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdEYXRhLnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSh0eXBlKSlcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChuZXdEYXRhLnByb3RvdHlwZSBhcyBhbnkpW3R5cGVdID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbmV3RGF0YS5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoXCJpZFwiKSB8fCBuZXdEYXRhLnByb3RvdHlwZS5pZCA9PT0gXCJVTktOT1dOXCIpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRhLnByb3RvdHlwZS5pZCA9IFwiYlwiICsgdHlwZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRvd24uYnVpbGRpbmdzLmRhdGEuc2V0KHR5cGUgYXMgQnVpbGRpbmdUeXBlLCBuZXdEYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgUmVhZCBidWxpZGluZyBkYXRhIG9mICR7dHlwZX06YCwgbmV3RGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgfSk7XHJcbn0iLCJpbXBvcnQgeyBXb3JsZCB9IGZyb20gXCJtaW5pcGxleFwiO1xuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSBcIi4vZW50aXR5XCI7XG5pbXBvcnQgeyBzdHJpbmdzIGFzIEwsIGdldFN0cmluZ3MgfSBmcm9tIFwiLi9pMThuL2kxOG5cIjtcbmltcG9ydCB7IEFkZEFjdGl2aXR5RW50cnksIGFjdGl2aXRpZXMgfSBmcm9tIFwiLi9hY3Rpdml0eVwiO1xuaW1wb3J0IHsgUmVzb3VyY2VIb2xkZXIsIFJlc291cmNlVHlwZSB9IGZyb20gXCIuL3Jlc291cmNlXCI7XG5pbXBvcnQgeyBVSSB9IGZyb20gXCIuL1VJXCI7XG5pbXBvcnQgeyBCdWlsZGluZ0hlbHBlciB9IGZyb20gXCIuL2J1aWxkaW5nXCI7XG5pbXBvcnQgeyBMb2FkQWxsRGF0YSB9IGZyb20gXCIuL2dhbWVkYXRhXCI7XG5cbi8qIEhhbmRsZXMgdGhlIG1haW4gZ2FtZSBsb2dpYy5cbiAqL1xuXG5leHBvcnQgY2xhc3MgVG93blxue1xuICAgIHB1YmxpYyB3b3JsZDogV29ybGQ8RW50aXR5PiA9IG5ldyBXb3JsZDxFbnRpdHk+KCk7XG4gICAgcHVibGljIGFyY2hldHlwZXMgPSB7XG4gICAgICAgIGhpZGRlbkhUTUw6IHRoaXMud29ybGQud2l0aChcImhpZGRlblwiLCBcIkhUTUxFbGVtZW50XCIpLFxuICAgICAgICB2aXNpYmxlSFRNTDogdGhpcy53b3JsZC53aXRoKFwiSFRNTEVsZW1lbnRcIikud2l0aG91dChcImhpZGRlblwiKSxcblxuICAgICAgICAvLyByZXNvdXJjZXM6IHRoaXMud29ybGQud2l0aChcImlkXCIsIFwiaXNSZXNvdXJjZVwiKSxcbiAgICAgICAgYWN0aXZpdGllczogdGhpcy53b3JsZC53aXRoKFwiaWRcIiwgXCJpc0FjdGl2aXR5XCIpLFxuXG4gICAgICAgIHJlc291cmNlQnVpbGRpbmdzOiB0aGlzLndvcmxkLndpdGgoXCJpc0J1aWxkaW5nXCIsIFwiQ2hhbmdlUmVzb3VyY2VQZXJUaWNrXCIpLFxuICAgICAgICBidWlsZGluZ0luZm86IHRoaXMud29ybGQud2l0aChcImJ1aWxkaW5nSW5mb1wiKSxcbiAgICAgICAgaGlkZGVuQnVpbGRpbmdJbmZvOiB0aGlzLndvcmxkLndpdGgoXCJidWlsZGluZ0luZm9cIikud2l0aChcImhpZGRlblwiKSxcbiAgICB9O1xuXG4gICAgdWk6IFVJID0gbmV3IFVJKHRoaXMpO1xuICAgIHJlc291cmNlczogUmVzb3VyY2VIb2xkZXIgPSBuZXcgUmVzb3VyY2VIb2xkZXIodGhpcyk7XG4gICAgYnVpbGRpbmdzOiBCdWlsZGluZ0hlbHBlciA9IG5ldyBCdWlsZGluZ0hlbHBlcih0aGlzKTtcblxuICAgIHB1YmxpYyBJbml0KClcbiAgICB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgICB7XG4gICAgICAgICAgICBMb2FkQWxsRGF0YSh0aGlzKS50aGVuKCgpID0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy51aS5Jbml0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXMuSW5pdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRpbmdzLkluaXQoKTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5yZXNvdXJjZXMuQWRkUmVzb3VyY2UoXCJGcnVpdFwiLCAxMCwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXMuQWRkUmVzb3VyY2UoXCJPYWtcIiwgMjUwLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXMuQWRkUmVzb3VyY2UoXCJQaWNlYVwiLCA1LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXMuQWRkUmVzb3VyY2UoXCJHcmFzc1wiLCA1NDUsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc291cmNlcy5BZGRSZXNvdXJjZShcIlNocnViXCIsIDIwMCwgZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvdXJjZXMuU2V0dXBFbnZpcm9ubWVudCgpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICBBZGRBY3Rpdml0eUVudHJ5KHRoaXMud29ybGQsIGFjdGl2aXRpZXMuR2F0aGVyRnJ1aXQpO1xuICAgICAgICAgICAgICAgIEFkZEFjdGl2aXR5RW50cnkodGhpcy53b3JsZCwgYWN0aXZpdGllcy5HYXRoZXJCcmFuY2gpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcHVibGljIFVwZGF0ZVVJKClcbiAgICB7XG4gICAgICAgIHRoaXMudWkuVXBkYXRlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIFRpY2soKVxuICAgIHtcbiAgICAgICAgLy8gTWFpbiBsb29wIHBlciB0aWNrXG4gICAgICAgIHRoaXMucmVzb3VyY2VzLnNSZWZyZXNoUmVzb3VyY2UoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYnVpbGRpbmdzLnNNb2RpZnlSZXNvdXJjZXMoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucmVzb3VyY2VzLnNUcmFuc2ZlclVuaXZlcnNhbFJlc291cmNlKCk7XG5cbiAgICAgICAgdGhpcy5yZXNvdXJjZXMuc1VwZGF0ZUVudlRpY2tIaW50KCk7XG4gICAgICAgIHRoaXMucmVzb3VyY2VzLnNBZGp1c3RFbnZpcm9ubWVudCgpO1xuXG4gICAgICAgIHRoaXMuVXBkYXRlVUkoKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgVG93biB9IGZyb20gXCIuL3Rvd25cIjtcblxuZXhwb3J0IGNsYXNzIEdhbWVcbntcbiAgICBuOiBudW1iZXIgPSAwO1xuICAgIGU6IEVsZW1lbnQ7XG5cbiAgICBwcml2YXRlIF9sYXN0VGltZXN0YW1wOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgX2xhc3RUaWNrOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgdGlja1RpbWVNUzogbnVtYmVyID0gMjUwOyAvLyAxIHRpY2sgdGltZSBpbiBtc1xuICAgIHByaXZhdGUgdGlja1RpbWVNU0Jhc2U6IG51bWJlciA9IDI1MDsgLy8gMSB0aWNrIHRpbWUgaW4gbXNcblxuICAgIHByaXZhdGUgdG93bjogVG93bjtcblxuICAgIGNvbnN0cnVjdG9yKClcbiAgICB7XG4gICAgICAgIHRoaXMudG93biA9IG5ldyBUb3duKCk7XG4gICAgfVxuXG4gICAgcHVibGljIFNldHVwVGVzdFVJKClcbiAgICB7XG4gICAgICAgIC8vIFRlc3QgZnVuY3Rpb25zXG4gICAgICAgIGxldCBzbGlkZXI6SFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGltZVNsaWRlclwiKTtcbiAgICAgICAgdmFyIG91dHB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGltZVNjYWxlXCIpO1xuXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGltZTF4XCIpLm9uY2xpY2sgPSAoZXZ0KSA9PlxuICAgICAgICB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiI3RpbWVTbGlkZXJcIikudmFsdWUgPSBcIjFcIjtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXCIjdGltZVNsaWRlclwiKS5vbmlucHV0KG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGltZTEweFwiKS5vbmNsaWNrID0gKGV2dCkgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcIiN0aW1lU2xpZGVyXCIpLnZhbHVlID0gXCIxMFwiO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcIiN0aW1lU2xpZGVyXCIpLm9uaW5wdXQobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0LmlubmVySFRNTCA9IHNsaWRlci52YWx1ZUFzTnVtYmVyLnRvRml4ZWQoMSkgKyBcInhcIjtcbiAgICAgICAgc2xpZGVyLm9uaW5wdXQgPSBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICBvdXRwdXQuaW5uZXJIVE1MID0gc2xpZGVyLnZhbHVlQXNOdW1iZXIudG9GaXhlZCgxKSArIFwieFwiO1xuICAgICAgICAgICAgZ2FtZS50aWNrVGltZU1TID0gZ2FtZS50aWNrVGltZU1TQmFzZSAvIHNsaWRlci52YWx1ZUFzTnVtYmVyO1xuICAgICAgICB9XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXCIjdGltZVNsaWRlclwiKS5vbmlucHV0KG51bGwpO1xuICAgIH1cblxuICAgIHB1YmxpYyBJbml0KClcbiAgICB7XG4gICAgICAgIHRoaXMuU2V0dXBUZXN0VUkoKTtcblxuICAgICAgICB0aGlzLnRvd24uSW5pdCgpLnRoZW4oKCkgPT5cbiAgICAgICAge1xuICAgICAgICAgICAgLy8gdGhpcy5fbGFzdFRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLl9sYXN0VGljayA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuVXBkYXRlKCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgVXBkYXRlKClcbiAgICB7XG4gICAgICAgIGNvbnN0IGRlbHRhVGlja1RpbWUgPSBEYXRlLm5vdygpIC0gdGhpcy5fbGFzdFRpY2s7XG4gICAgICAgIGlmIChkZWx0YVRpY2tUaW1lID49IHRoaXMudGlja1RpbWVNUylcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHBlciB0aWNrXG4gICAgICAgICAgICB0aGlzLl9sYXN0VGljayA9IERhdGUubm93KCkgLSAoZGVsdGFUaWNrVGltZSAtIHRoaXMudGlja1RpbWVNUyk7XG5cbiAgICAgICAgICAgIHRoaXMudG93bi5UaWNrKCk7XG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuVXBkYXRlKCkpO1xuICAgIH1cbn1cblxubGV0IGdhbWU6IEdhbWUgPSBuZXcgR2FtZSgpO1xuZ2FtZS5Jbml0KCk7XG4iXSwibmFtZXMiOlsiX2FycmF5TGlrZVRvQXJyYXkiLCJhcnIiLCJsZW4iLCJsZW5ndGgiLCJpIiwiYXJyMiIsIkFycmF5IiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsIl9TeW1ib2wkaXRlcmF0b3IiLCJFdmVudCIsIm9iaiIsInZhbHVlIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJTZXQiLCJlbWl0IiwiYmluZCIsInByb3RvUHJvcHMiLCJsaXN0ZW5lcnMiLCJjbGVhciIsImxpc3RlbmVyIiwiX3RoaXMiLCJhZGQiLCJyZW1vdmUiLCJwYXlsb2FkIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJvIiwiYWxsb3dBcnJheUxpa2UiLCJpdCIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiaXNBcnJheSIsIm1pbkxlbiIsIm4iLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJzbGljZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsImZyb20iLCJ0ZXN0IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwiRiIsInMiLCJkb25lIiwiZSIsImYiLCJlcnIiLCJub3JtYWxDb21wbGV0aW9uIiwiZGlkRXJyIiwic3RlcCIsIm5leHQiLCJyZXR1cm4iLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsIkJ1Y2tldCIsImVudGl0aWVzIiwiYXJndW1lbnRzIiwidW5kZWZpbmVkIiwiTWFwIiwiZW50aXR5UG9zaXRpb25zIiwic2V0IiwiaW5kZXgiLCJnZXQiLCJlbnRpdHkiLCJoYXMiLCJwdXNoIiwib25FbnRpdHlBZGRlZCIsIm9uRW50aXR5UmVtb3ZlZCIsIm90aGVyIiwicG9wIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiX2FycmF5V2l0aG91dEhvbGVzIiwiaXRlciIsIl9pdGVyYWJsZVRvQXJyYXkiLCJfbm9uSXRlcmFibGVTcHJlYWQiLCJfdHlwZW9mIiwic3RhdGljUHJvcHMiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX3NldFByb3RvdHlwZU9mIiwicCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiX2dldFByb3RvdHlwZU9mIiwiZ2V0UHJvdG90eXBlT2YiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIl9jcmVhdGVTdXBlciIsIkRlcml2ZWQiLCJoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsInNoYW0iLCJQcm94eSIsIkJvb2xlYW4iLCJ2YWx1ZU9mIiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsInJlc3VsdCIsIlN1cGVyIiwiTmV3VGFyZ2V0IiwiYXBwbHkiLCJNZW1vaXplciIsInByZWRpY2F0ZSIsImNhY2hlIiwiaGFzQ29tcG9uZW50cyIsIl9sZW4yIiwiY29tcG9uZW50cyIsIl9rZXkyIiwiZXZlcnkiLCJjIiwiaGFzTm9Db21wb25lbnRzIiwiX2xlbjQiLCJfa2V5NCIsIm5vcm1hbGl6ZUNvbXBvbmVudHMiLCJzb3J0IiwiZmlsdGVyIiwicXVlcnlDYWNoZSIsIm1lbW9pemVRdWVyeSIsInF1ZXJ5Iiwibm9ybWFsaXplZFF1ZXJ5Iiwid2l0aG91dCIsIm5vcm1hbGl6ZVF1ZXJ5IiwiSlNPTiIsInN0cmluZ2lmeSIsIkVudGl0eUJ1Y2tldCIsIl9CdWNrZXQiLCJfc3VwZXIiLCJfbGVuIiwiYXJncyIsIl9rZXkiLCJjb25jYXQiLCJmdXR1cmUiLCJ3YW50cyIsImJ1Y2tldHMiLCJidWNrZXQiLCJldmFsdWF0ZSIsIl90aGlzMiIsImFyY2hldHlwZSIsIl9zdGVwMiIsIl9pdGVyYXRvcjIiLCJfYnVja2V0MiIsIlByZWRpY2F0ZUJ1Y2tldCIsIl9idWNrZXQiLCJfbGVuMyIsInJlc3QiLCJfa2V5MyIsIl9zdGVwMyIsIm1lbW9pemVkUXVlcnkiLCJfaXRlcmF0b3IzIiwiX2J1Y2tldDMiLCJBcmNoZXR5cGVCdWNrZXQiLCJEZXJpdmVkRW50aXR5QnVja2V0IiwiX0VudGl0eUJ1Y2tldCIsIl9zdXBlcjIiLCJzb3VyY2UiLCJfdGhpczMiLCJfdGhpczQiLCJ1cGRhdGUiLCJfc3RlcDQiLCJfaXRlcmF0b3I0IiwiX0Rlcml2ZWRFbnRpdHlCdWNrZXQiLCJfc3VwZXIzIiwiX3RoaXM1Iiwic3RhcnRVcGRhdGluZyIsIl9EZXJpdmVkRW50aXR5QnVja2V0MiIsIl9zdXBlcjQiLCJfdGhpczYiLCJvd25LZXlzIiwib2JqZWN0IiwiZW51bWVyYWJsZU9ubHkiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwic3ltYm9scyIsInN5bSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkFjdGl2aXRpZXMiLCJXb3JsZCIsImVudGl0eVRvSWQiLCJpZCIsImlkVG9FbnRpdHkiLCJfdXBkYXRlIiwiX3giLCJfeDIiLCJfeDMiLCJwYXJ0aWFsIiwiYXNzaWduIiwiY29tcG9uZW50IiwiZm9yRWFjaCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiX29iamVjdFNwcmVhZDIiLCJuZXh0SWQiLCJBZGRBY3Rpdml0eUVudHJ5Iiwid29ybGQiLCJpc0FjdGl2aXR5IiwiSGFuZGxlQWN0aXZpdHkiLCJhY3QiLCJ0b3duIiwiY29uc29sZSIsImxvZyIsImhhc093blByb3BlcnR5IiwicmVzb3VyY2VzIiwiSXNBbGxSZXNvdXJjZUVub3VnaCIsIlVzZVJlc291cmNlT25jZSIsImxpbmUiLCJBZGRSZXNvdXJjZSIsInR5cGUiLCJhbW91bnQiLCJBZGRSZXNvdXJjZU9uY2UiLCJidWlsZGluZ3MiLCJBZGRCdWlsZGluZyIsIkdldEJ1aWxkaW5nUHJvdG90eXBlIiwiQ29uc3RydWN0QnVpbGRpbmciLCJHZXRCdWlsZGluZ0Nvc3QiLCJVcGRhdGVVSSIsImFjdGl2aXRpZXMiLCJSZXNvdXJjZVR5cGVzIiwiUmVzb3VyY2VIb2xkZXIiLCJyZXNvdXJjZURhdGEiLCJyZXNvdXJjZU1hcCIsInJlc291cmNlTWFwRW52Iiwic3RhdGljIiwiZW52aXJvbm1lbnQiLCJjYXBhY2l0eSIsIm9uUmVzb3VyY2VBZGRlZCIsIm9uUmVzb3VyY2VSZW1vdmVkIiwiSW5pdCIsIkFkZFJlc291cmNlRW50cnkiLCJpbmZvIiwiY3VycmVudCIsIm1heCIsImluaXRpYWxNYXhTdGFja3MiLCJ0aWNrTW9kaWZ5IiwidmlzaWJsZSIsImVudiIsInJlc291cmNlTWFwVW5pdmVyc2FsIiwiaW5pdGlhbFVNYXhTdGFja3MiLCJJc1Jlc291cmNlRW5vdWdoIiwiR2V0UmVzb3VyY2UiLCJHZXRSZXNvdXJjZUFtb3VudCIsInRpY2siLCJ1SW5mbyIsInVCZWZvcmUiLCJiZWZvcmVBZGQiLCJ3YXJuIiwibEluZm8iLCJ0aWNrTW9kaWZ5RW52SGludCIsIlNldHVwRW52aXJvbm1lbnQiLCJ2YWx1ZXMiLCJzUmVmcmVzaFJlc291cmNlIiwiZGF0YSIsInJlZ2VuQW1vdW50IiwicmVnZW5CYXNlIiwicmVnZW5GYWN0b3IiLCJzVXBkYXRlRW52VGlja0hpbnQiLCJzQWRqdXN0RW52aXJvbm1lbnQiLCJ0b3RhbEluYyIsInRvdGFsRGVjIiwiaW5jIiwicmVkdWNlbWVudCIsInNUcmFuc2ZlclVuaXZlcnNhbFJlc291cmNlIiwic3RyaW5ncyIsImVuIiwickZydWl0IiwiemgiLCJzZWMiLCJtaW4iLCJyT2FrIiwiclBpY2VhIiwiclNocnViIiwickdyYXNzIiwicldvb2QiLCJyQnJhbmNoIiwickN1bHR1cmUiLCJiUGxhbnRhdGlvbiIsImJGYXJtIiwiYkxvZ2dpbmdDYW1wIiwiYkZvcmVzdEtlZXBlciIsImJCb25maXJlIiwiYkhvdXNlIiwiYkd1aWxkIiwiYkF0ZWxpZXIiLCJiTGlicmFyeSIsImJBY2FkZW15IiwiYlRoZWF0cmUiLCJiTWluZSIsImFHYXRoZXJGcnVpdCIsImFHYXRoZXJCcmFuY2giLCJnZXRTdHJpbmdzIiwiVUkiLCJhcnRSZXNvdXJjZURpdiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImVudlJlc291cmNlRGl2IiwicmVzb3VyY2VQYW5lbHMiLCJyZXNvdXJjZVRlbXBsYXRlIiwiYWN0aXZpdHlEaXYiLCJhY3Rpdml0eUJ1dHRvbnMiLCJidWlsZGluZ0luZm9EaXYiLCJidWlsZGluZ0luZm9QYW5lbHMiLCJidWlsZGluZ0luZm9UZW1wbGF0ZSIsInRvb2x0aXBEaXYiLCJlbGVtIiwiY29udGVudCIsImNsb25lTm9kZSIsImNsYXNzTGlzdCIsImFwcGVuZENoaWxkIiwicmVzb3VyY2VQYW5lbCIsImNvbnRhaW5lciIsInN0YWNrIiwicmVnZW4iLCJpbm5lckhUTUwiLCJhcmNoZXR5cGVzIiwiY3JlYXRlRWxlbWVudCIsIm9uY2xpY2siLCJldmVudCIsImRpc3BsYXlOYW1lIiwiYWRkQ29tcG9uZW50IiwicHJldkRpc3BsYXkiLCJzdHlsZSIsImRpc3BsYXkiLCJidWlsZGluZ0luZm8iLCJwYW5lbCIsImNvbnN0cnVjdEJ0biIsImNvdW50IiwiU2hvd0J1aWxkaW5nVG9vbHRpcCIsIm9ucG9pbnRlcmVudGVyIiwib25wb2ludGVybGVhdmUiLCJIaWRlVG9vbHRpcCIsInVpIiwiaGlkZGVuSFRNTCIsIkhUTUxFbGVtZW50IiwidmlzaWJsZUhUTUwiLCJTaG93VG9vbHRpcCIsInRpcCIsIngiLCJ0b0ZpeGVkIiwiVXBkYXRlIiwic1VwZGF0ZVJlc291cmNlcyIsInNVcGRhdGVCdWlsZGluZ0luZm8iLCJ0aWNrTW9kIiwiTWF0aCIsImFicyIsIklzQnVpbGRpbmdVbmxvY2tlZCIsInJlbW92ZUNvbXBvbmVudCIsInNpemUiLCJkaXNhYmxlZCIsIkJ1aWxkaW5nVHlwZXNEZWYiLCJQbGFudGF0aW9uIiwiRmFybSIsIkxvZ2dpbmdDYW1wIiwiRm9yZXN0S2VlcGVyIiwiQm9uZmlyZSIsIkhvdXNlIiwiR3VpbGQiLCJBdGVsaWVyIiwiQWNhZGVteSIsIk1pbmUiLCJCdWlsZGluZ0hlbHBlciIsIndpdGgiLCJoaWRkZW4iLCJpc0J1aWxkaW5nIiwibkJ1aWxkaW5ncyIsImJ1aWxkQ29zdCIsIm1hcCIsImJjIiwiYmFzZSIsInBvdyIsImdyb3d0aCIsImNvbmRpdGlvbiIsInZpc2libGVSZXF1aXJlbWVudHMiLCJzTW9kaWZ5UmVzb3VyY2VzIiwicmVzb3VyY2VCdWlsZGluZ3MiLCJtaW5QZXJjZW50YWdlIiwiQ2hhbmdlUmVzb3VyY2VQZXJUaWNrIiwicmVxdWlyZXMiLCJwcm9kdWN0cyIsInJlcyIsIkxvYWRGaWxlIiwicGF0aCIsIlByb21pc2UiLCJyZWoiLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXNwb25zZVRleHQiLCJvcGVuIiwic2VuZCIsInJlc291cmNlRGF0YURlZmF1bHRzIiwiY29sb3IiLCJpbml0aWFsVVRyYW5zZmVyU3BlZWQiLCJCdWlsZGluZ0RhdGFEZWZhdWx0cyIsImdyb3d0aEFsbCIsIlRvd24iLCJoaWRkZW5CdWlsZGluZ0luZm8iLCJyZXNvbHZlIiwicmVqZWN0IiwiYWxsIiwidGhlbiIsInBhcnNlZEpTT04iLCJyZXNvdXJjZUpTT04iLCJwYXJzZSIsIm5ld0RhdGEiLCJzdHJ1Y3R1cmVkQ2xvbmUiLCJidWlsZGluZ0pTT04iLCJUaWNrIiwiZ2FtZSIsIl9sYXN0VGltZXN0YW1wIiwiX2xhc3RUaWNrIiwidGlja1RpbWVNUyIsInRpY2tUaW1lTVNCYXNlIiwiU2V0dXBUZXN0VUkiLCJzbGlkZXIiLCJvdXRwdXQiLCJnZXRFbGVtZW50QnlJZCIsImV2dCIsIm9uaW5wdXQiLCJ2YWx1ZUFzTnVtYmVyIiwiRGF0ZSIsIm5vdyIsIndpbmRvdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRlbHRhVGlja1RpbWUiXSwic291cmNlUm9vdCI6IiJ9